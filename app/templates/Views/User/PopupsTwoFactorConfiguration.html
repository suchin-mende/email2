<div class="popups">
	<div class="modal hide b-two-factor-content g-ui-user-select-none" data-bind="modal: modalVisibility">
		<div class="modal-flex">
			<div class="modal-header">
				<h3 class="i18nflex">
					<span class="i18n" data-i18n="POPUPS_TWO_FACTOR_CFG/LEGEND_TWO_FACTOR_AUTH"></span>
				</h3>
			</div>
			<div class="modal-body">
				<div class="form-horizontal view-flex" data-bind="visible: capaTwoFactor">

					<div class="v-items" data-bind="visible: twoFactorStatus">
						<div class="vertical-view">
							<div data-tooltip-join="top" data-bind="tooltip: viewTwoFactorEnableTooltip">
								<div data-bind="component: {
									name: 'Checkbox',
									params: {
										label: 'POPUPS_TWO_FACTOR_CFG/LABEL_ENABLE_TWO_FACTOR',
										enable: twoFactorAllowedEnable,
										value: viewEnable,
										inline: true
									}
								}"></div>
							</div>
						</div>

						<div class="i18n g-ui-link i18nflex"
							data-bind="click: testTwoFactor, visible: twoFactorStatus"
							data-i18n="POPUPS_TWO_FACTOR_CFG/LINK_TEST">
						</div>
					</div>

					<div class="v-items">
						<div class="pop-label pop-label-iden">
							<div class="i18n i18nflex"
								data-i18n="POPUPS_TWO_FACTOR_CFG/LABEL_TWO_FACTOR_USER">
							</div>
						</div>
						<div class="vertical-view">
							<strong>
								<span style="line-height: 30px;" data-bind="text: viewUser"></span>
							</strong>

							<div data-bind="visible: lock">
								<blockquote>
									<p class="muted i18n width100-on-mobile"
										data-i18n="POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_REQUIRE_DESC">
									</p>
								</blockquote>
							</div>
						</div>
					</div>

					<div class="v-items"
						data-bind="visible: '' === viewSecret() && twoFactorStatus() && !clearing()">
						<div style="line-height: 30px;">
							<strong data-bind="visible: secreting">...</strong>
							<span class="g-ui-link i18n i18nflex"
								data-bind="click: showSecret, visible: !secreting()"
								data-i18n="POPUPS_TWO_FACTOR_CFG/BUTTON_SHOW_SECRET"></span>
						</div>
					</div>
					<div class="v-items" data-bind="visible: '' !== viewSecret()">
						<div class="pop-label pop-label-iden">
							<span class="i18n i18nflex"
								data-i18n="POPUPS_TWO_FACTOR_CFG/LABEL_TWO_FACTOR_SECRET"></span>
						</div>
						<div class="vertical-view">
							<strong style="line-height: 30px;" data-bind="text: viewSecret"></strong>
							<span style="line-height: 30px;" class="g-ui-link i18n"
								data-bind="click: hideSecret"
								data-i18n="POPUPS_TWO_FACTOR_CFG/BUTTON_HIDE_SECRET"></span>
						</div>
					</div>
					<div class="v-items" data-bind="visible: '' !== viewSecret()">
						<!-- ko if: '' !== viewUrl() -->
						<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2P8DwQACgAD/il4QJ8AAAAASUVORK5CYII="
							data-bind="attr: {'src': viewUrl}" />
						<!-- /ko -->
						<blockquote class="v-quote">
							<p class="muted i18n i18nflex width100-on-mobile"
								data-i18n="POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_DESC">
							</p>
						</blockquote>
					</div>
					<div class="v-items" data-bind="visible: '' !== viewBackupCodes()">
						<div class="pop-label pop-label-iden">
							<span class="i18n i18nflex"
								data-i18n="POPUPS_TWO_FACTOR_CFG/LABEL_TWO_FACTOR_BACKUP_CODES"></span>
						</div>
					</div>
					<div class="v-items" data-bind="visible: '' !== viewBackupCodes()">
						<pre class="pre-mgl" data-bind="text: viewBackupCodes"></pre>

						<blockquote class="v-quote">
							<p class="muted i18n i18nflex width100-on-mobile"
								data-i18n="POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_BACKUP_CODES_DESC">
							</p>
						</blockquote>
					</div>
				</div>
			</div>
			<div class="modal-footer md-grid">
				<div>
					<button type="button" class="close v-close"
						data-bind="visible: viewEnable() || !lock(), command: cancelCommand">&times;</button>
				</div>

				<div class="btn-bottom">
					<a class="btn" data-bind="visible: lock, click: logout">
						<i class="icon-power"></i>
						<span class="i18n i18nflex" data-i18n="POPUPS_TWO_FACTOR_CFG/BUTTON_LOGOUT"></span>
					</a>
					<a class="btn btn-danger" data-bind="click: clearTwoFactor, visible: twoFactorStatus">
						<i class="icon-remove"
							data-bind="css: {'icon-remove': !clearing(), 'icon-spinner animated': clearing()}"></i>

						<span class="i18n i18nflex" data-i18n="POPUPS_TWO_FACTOR_CFG/BUTTON_CLEAR"></span>
					</a>
					<a class="btn" data-bind="click: createTwoFactor, visible: !twoFactorStatus()">
						<i class="icon-play"
							data-bind="css: {'icon-play': !processing(), 'icon-spinner animated': processing()}"></i>

						<span class="i18n i18nflex"
							data-i18n="POPUPS_TWO_FACTOR_CFG/BUTTON_ACTIVATE"></span>
					</a>
					<a class="btn" data-bind="command: cancelCommand, visible: viewEnable() || !lock()">
						<i class="icon-ok"></i>

						<span class="i18n i18nflex" data-i18n="POPUPS_TWO_FACTOR_CFG/BUTTON_DONE"></span>
					</a>
				</div>
			</div>
		</div>
	</div>
</div>