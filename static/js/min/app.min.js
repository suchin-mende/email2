!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,t,i){Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="rainloop/v/email2/static/js/min/",t(t.s=277)}([function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,i){"use strict";function n(e){try{e()}catch(e){}}function o(e){return!Ae(e)&&!Fe(e)}function a(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return!!o(e)&&(t?/^[0-9]*$/.test(e.toString()):/^[1-9]+[0-9]*$/.test(e.toString()))}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=o(e)&&""!==e?se.a.parseInt(e,10):t;return se.a.isNaN(i)?t:i}function s(e){return o(e)?""+e:""}function l(e){return!!e}function c(e){return e?"1":"0"}function u(e){return Te(e)&&0<e.length}function d(e){return se.a.encodeURIComponent(e)}function p(e){return se.a.decodeURIComponent(e)}function h(e){return se.a.decodeURI(e)}function f(e){return se.a.encodeURI(e)}function m(e){var t=0,i=0,n=null,o=e.split("&"),a={};for(i=o.length;t<i;t++)n=o[t].split("="),a[p(n[0])]=p(n[1]);return a}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="0123456789abcdefghijklmnopqrstuvwxyz",i=t.length;e=r(e);for(var n="";n.length<e;)n+=t.substr(se.a.Math.round(se.a.Math.random()*i),1);return n}function b(e){return o(e)?de.a.escape(e.toString()):""}function y(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,i="",n="",o=e,a=0,r=0;o.length>t;)n=o.substring(0,t),a=n.lastIndexOf(" "),r=n.lastIndexOf("\n"),-1!==r&&(a=r),-1===a&&(a=t),i+=n.substring(0,a)+"\n",o=o.substring(a+1);return i+o}function v(){try{if(se.a.document.activeElement)return Ae(se.a.document.activeElement.__inFocusCache)&&(se.a.document.activeElement.__inFocusCache=ce()(se.a.document.activeElement).is("input,textarea,iframe,.cke_editable")),!!se.a.document.activeElement.__inFocusCache}catch(e){}return!1}function S(e){if(se.a.document&&se.a.document.activeElement&&se.a.document.activeElement.blur)try{var t=ce()(se.a.document.activeElement);t&&t.is("input,textarea")?se.a.document.activeElement.blur():e&&se.a.document.activeElement.blur()}catch(e){}}function w(){try{if(se.a&&se.a.getSelection){var e=se.a.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}else se.a.document&&se.a.document.selection&&se.a.document.selection.empty&&se.a.document.selection.empty()}catch(e){}}function T(e,t){e=Se(e.toUpperCase()),t=Se(t.replace(/[\s]+/g," "));var i=!1,n="RE"===e,o="FWD"===e,a=[],r=!o;return""!==t&&de.a.each(t.split(":"),function(e){var t=Se(e);i||!/^(RE|FWD)$/i.test(t)&&!/^(RE|FWD)[\[\(][\d]+[\]\)]$/i.test(t)?(a.push(e),i=!0):(n||(n=!!/^RE/i.test(t)),o||(o=!!/^FWD/i.test(t)))}),r?n=!1:o=!1,Se((r?"Re: ":"Fwd: ")+(n?"Re: ":"")+(o?"Fwd: ":"")+Se(a.join(":")))}function C(e,t){return se.a.Math.round(e*se.a.Math.pow(10,t))/se.a.Math.pow(10,t)}function E(e){switch(e=r(e),!0){case 1073741824<=e:return C(e/1073741824,1)+"GB";case 1048576<=e:return C(e/1048576,1)+"MB";case 1024<=e:return C(e/1024,0)+"KB"}return e+"B"}function A(e){se.a.console&&se.a.console.log&&se.a.console.log(e)}function F(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e&&e[t]&&(n=r(n),i=Te(i)?i:[],0>=n?e[t].apply(e,i):de.a.delay(function(){e[t].apply(e,i)},n))}function N(e){if(e=e||se.a.event,e&&e.ctrlKey&&!e.shiftKey&&!e.altKey){var t=e.keyCode||e.which;if(t===be.EventKeyCode.S)return void e.preventDefault();if(t===be.EventKeyCode.A){var i=e.target||e.srcElement;if(i&&("true"==""+i.contentEditable||i.tagName&&i.tagName.match(/INPUT|TEXTAREA/i)))return;se.a.getSelection?se.a.getSelection().removeAllRanges():se.a.document.selection&&se.a.document.selection.clear&&se.a.document.selection.clear(),e.preventDefault()}}}function R(e,t){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=null,o=function(){for(var i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];return n&&n.canExecute&&n.canExecute()&&t.apply(e,o),!1};return n=t?o:Ie,n.enabled=he.a.observable(!0),n.isCommand=!0,Ee(i)?n.canExecute=he.a.computed(function(){return n&&n.enabled()&&i.call(e)}):n.canExecute=he.a.computed(function(){return n&&n.enabled()&&!!i}),n}function I(e){return e.replace(/["]/g,'\\"')}function L(){return(new se.a.Date).getTime()}function _(){return se.a.Math.round(L()/1e3)}function P(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i(8).i18n("LANGS_NAMES"+(!0===t?"_EN":"")+"/LANG_"+e.toUpperCase().replace(/[^a-zA-Z0-9]+/g,"_"),null,e)}function D(){return ce()('<div class="draggablePlace"><span class="text"></span>&nbsp;<i class="icon-copy icon-white visible-on-ctrl"></i><i class="icon-mail icon-white hidden-on-ctrl"></i></div>').appendTo("#rl-hidden")}function M(e,t){t&&!Ae(t.disabled)&&e&&ce()(e).toggleClass("disabled",t.disabled).prop("disabled",t.disabled)}function k(e){e.find("blockquote.rl-bq-switcher").removeClass("rl-bq-switcher hidden-bq"),e.find(".rlBlockquoteSwitcher").off(".rlBlockquoteSwitcher").remove(),e.find("[data-html-editor-font-wrapper]").removeAttr("data-html-editor-font-wrapper")}function O(e,t,n,o){var a=e.title,r=e.subject,s=e.date,l=e.fromCreds,c=e.toCreds,u=e.toLabel,d=se.a.open(""),p=d.document,h=t.clone(),f=n?"html":"plain";k(h);var m=h?h.html():"";p.write(i(171).replace("{{title}}",b(a)).replace("{{subject}}",b(r)).replace("{{date}}",b(s)).replace("{{fromCreds}}",b(l)).replace("{{toCreds}}",b(c)).replace("{{toLabel}}",b(u)).replace("{{bodyClass}}",f).replace("{{html}}",m)),p.close(),o&&se.a.setTimeout(function(){return d.print()},100)}function x(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e3;return n=r(n),function(o,a,r,s,l){t.call(i,a&&a.Result?be.SaveSettingsStep.TrueResult:be.SaveSettingsStep.FalseResult),e&&e.call(i,o,a,r,s,l),de.a.delay(function(){t.call(i,be.SaveSettingsStep.Idle)},n)}}function U(e,t){return x(null,e,t,1e3)}function H(e,t,i,n){return function(o){if(e){switch(i){case"bool":case"boolean":o=o?"1":"0";break;case"int":case"integer":case"number":o=r(o);break;case"trim":o=Se(o);break;default:o=s(o)}var a={};a[t]=o,e.saveAdminConfig?e.saveAdminConfig(n||null,a):e.saveSettings&&e.saveSettings(n||null,a)}}}function B(e){return me.a?me.a.link(e,{newWindow:!0,stripPrefix:!1,urls:!0,email:!0,mention:!1,phone:!1,hashtag:!1,replaceFn:function(e){return!(e&&"url"===e.getType()&&e.matchedText&&0!==e.matchedText.indexOf("http"))}}):e}function G(e){var t=0,i=0,n=0,o=0,a=0,r="",s=function(e){return e="> "+Se(e).replace(/\n/gm,"\n> "),e.replace(/(^|\n)([> ]+)/gm,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t&&2<t.length?t[1]+Se(t[2].replace(/[\s]/g,""))+" ":""})},l=function e(){for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];if(i&&1<i.length){var o=Se(i[1]);return 0<o.length&&(o=o.replace(/<div[^>]*>([\s\S\r\n]*)<\/div>/gim,e),o="\n"+Se(o)+"\n"),o}return""},c=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t&&1<t.length?t[1].toString().replace(/[\n]/gm,"<br />").replace(/[\r]/gm,""):""},u=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t&&1<t.length?""+t[1]+de.a.escape(t[2]):""},d=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return t&&1<t.length?Se(t[1]):""};for(r=e.replace(/<p[^>]*><\/p>/gi,"").replace(/<pre[^>]*>([\s\S\r\n\t]*)<\/pre>/gim,c).replace(/[\s]+/gm," ").replace(/((?:href|data)\s?=\s?)("[^"]+?"|'[^']+?')/gim,u).replace(/<br[^>]*>/gim,"\n").replace(/<\/h[\d]>/gi,"\n").replace(/<\/p>/gi,"\n\n").replace(/<ul[^>]*>/gim,"\n").replace(/<\/ul>/gi,"\n").replace(/<li[^>]*>/gim," * ").replace(/<\/li>/gi,"\n").replace(/<\/td>/gi,"\n").replace(/<\/tr>/gi,"\n").replace(/<hr[^>]*>/gim,"\n_______________________________\n\n").replace(/<div[^>]*>([\s\S\r\n]*)<\/div>/gim,l).replace(/<blockquote[^>]*>/gim,"\n__bq__start__\n").replace(/<\/blockquote>/gim,"\n__bq__end__\n").replace(/<a [^>]*>([\s\S\r\n]*?)<\/a>/gim,d).replace(/<\/div>/gi,"\n").replace(/&nbsp;/gi," ").replace(/&quot;/gi,'"').replace(/<[^>]*>/gm,""),r=ge.$div.html(r).text(),r=r.replace(/\n[ \t]+/gm,"\n").replace(/[\n]{3,}/gm,"\n\n").replace(/&gt;/gi,">").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&"),r=y(Se(r)),t=0,i=800;0<i&&(i-=1,n=r.indexOf("__bq__start__",t),-1<n);)o=r.indexOf("__bq__start__",n+5),a=r.indexOf("__bq__end__",n+5),(-1===o||a<o)&&n<a?(r=r.substring(0,n)+s(r.substring(n+13,a))+r.substring(a+11),t=0):t=-1<o&&o<a?o-1:0;return r=r.replace(/__bq__start__/gm,"").replace(/__bq__end__/gm,"")}function K(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e.toString().replace(/\r/g,""),e=e.replace(/^>[> ]>+/gm,function(e){var t=e[0];return t?t.replace(/[ ]+/g,""):t});var i=!1,n=!0,o=!0,a=[],r="",s=0,l=e.split("\n");do{for(n=!1,a=[],s=0;s<l.length;s++)r=l[s],o=">"===r.substr(0,1),o&&!i?(n=!0,i=!0,a.push("~~~blockquote~~~"),a.push(r.substr(1))):!o&&i?""!==r?(i=!1,a.push("~~~/blockquote~~~"),a.push(r)):a.push(r):o&&i?a.push(r.substr(1)):a.push(r);i&&(i=!1,a.push("~~~/blockquote~~~")),l=a}while(n);return e=l.join("\n"),e=e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/~~~blockquote~~~[\s]*/g,"<blockquote>").replace(/[\s]*~~~\/blockquote~~~/g,"</blockquote>").replace(/\n/g,"<br />"),t?B(e):e}function V(e,t,i,n,a,r,s,l,c,u){var d=null,p=!1,h=0,f=0,m=[],g="   ";for(u=!Ae(u)&&!!u,c=o(c)?c:0<e.length,a=o(a)?a:0,r=o(r)?r:null,s=o(s)?s:null,l=o(l)?l:null,Te(i)||(i=[]),Te(n)||(n=[]),h=0,f=n.length;h<f;h++)m.push({id:n[h][0],name:n[h][1],system:!1,seporator:!1,disabled:!1});for(p=!0,h=0,f=e.length;h<f;h++)d=e[h],s&&!s(d)||(p&&0<m.length&&m.push({id:"---",name:"---",system:!1,seporator:!0,disabled:!0}),p=!1,m.push({id:d.fullNameRaw,name:l?l(d):d.name(),system:!0,seporator:!1,disabled:!d.selectable||-1<we(d.fullNameRaw,i)||!!r&&r(d)}));for(p=!0,h=0,f=t.length;h<f;h++)d=t[h],!d.subScribed()&&d.existen&&!u||!d.selectable&&!d.hasSubScribedSubfolders()||s&&!s(d)||be.FolderType.User!==d.type()&&c&&!d.hasSubScribedSubfolders()||(p&&0<m.length&&m.push({id:"---",name:"---",system:!1,seporator:!0,disabled:!0}),p=!1,m.push({id:d.fullNameRaw,name:new se.a.Array(d.deep+1-a).join(g)+(l?l(d):d.name()),system:!1,seporator:!1,disabled:!d.selectable||-1<we(d.fullNameRaw,i)||!!r&&r(d)})),d.subScribed()&&0<d.subFolders().length&&(m=m.concat(V([],d.subFolders(),i,[],a,r,s,l,c,u)));return m}function z(e){var t=null,i=null;se.a.getSelection?(t=se.a.getSelection(),t.removeAllRanges(),i=se.a.document.createRange(),i.selectNodeContents(e),t.addRange(i)):se.a.document.selection&&(i=se.a.document.body.createTextRange(),i.moveToElementText(e),i.select())}function j(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=function(){ce()(".checkAutocomplete").trigger("change")};e?de.a.delay(t,100):t()}function q(e){Oe[e]||(Oe[e]=ce()('script[type="application/json"][data-configuration="'+e+'"]'));try{return JSON.parse(Oe[e].text())}catch(e){}return{}}function W(e,t){var i=t||e;i&&"function"==typeof i.dispose&&i.dispose()}function Y(e){e&&(Te(e.disposables)&&de.a.each(e.disposables,W),he.a.utils.objectForEach(e,W))}function $(e){e&&(Te(e)?de.a.each(e,function(e){$(e)}):e&&e.onDestroy&&e.onDestroy())}function J(e,t){return!(!e||!e[0])&&(e[0].styleSheet&&!Ae(e[0].styleSheet.cssText)?e[0].styleSheet.cssText=t:e.text(t),!0)}function X(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ie,i=ce()("#app-theme-link"),n=function(){xe=se.a.setTimeout(function(){return t(be.SaveSettingsStep.Idle)},1e3),Ue=null},o=ce()("#app-theme-style"),a=i.attr("href");a||(a=o.attr("data-href")),a&&(a=a.toString().replace(/\/-\/[^\/]+\/\-\//,"/-/"+e+"/-/"),a=a.replace(/\/Css\/[^\/]+\/User\//,"/Css/0/User/"),a=a.replace(/\/Hash\/[^\/]+\//,"/Hash/-/"),"Json/"!==a.substring(a.length-5,a.length)&&(a+="Json/"),se.a.clearTimeout(xe),t(be.SaveSettingsStep.Animate),Ue&&Ue.abort&&Ue.abort(),Ue=ce.a.ajax({url:a,dataType:"json"}).then(function(e){e&&Te(e)&&2===e.length&&(!i||!i[0]||o&&o[0]||(o=ce()('<style id="app-theme-style"></style>'),i.after(o),i.remove()),o&&o[0]&&J(o,e[1])&&o.attr("data-href",a).attr("data-theme",e[0]),t(be.SaveSettingsStep.TrueResult))}).then(n,n))}function Z(e,t){return function(){var i=e(),n=t(),o=[],a=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a={current:e===i,name:""===n?e.toString():n.toString(),custom:""!==n,title:""===n?"":e.toString(),value:e.toString()};t?o.push(a):o.unshift(a)},r=0,s=0,l=2;if(1<n||0<n&&n<i){for(n<i?(a(n),r=n,s=n):((3>=i||n-2<=i)&&(l+=2),a(i),r=i,s=i);0<l;)if(r-=1,s+=1,0<r&&(a(r,!1),l-=1),n>=s)a(s,!0),l-=1;else if(0>=r)break;3===r?a(2,!1):3<r&&a(Math.round((r-1)/2),!1,"..."),n-2===s?a(n-1,!0):n-2>s&&a(Math.round((n+s)/2),!0,"..."),1<r&&a(1,!1),n>s&&a(n,!0)}return o}}function Q(e){e=Se(e).toLowerCase();var t=e.split(".").pop();return t===e?"":t}function ee(e){var t="",i="application/octet-stream";return e=Se(e).toLowerCase(),"winmail.dat"===e?"application/ms-tnef":(t=Q(e),t&&0<t.length&&!Ae(ye.a[t])&&(i=ye.a[t]),i)}function te(e){e.clone().show().appendTo(ge.$hcont);var t=ge.$hcont.height();return ge.$hcont.empty(),t}function ie(e,t,i){var n=new se.a.Image;n.onload=function(){var e=[0,0],n=se.a.document.createElement("canvas"),o=n.getContext("2d");n.width=t,n.height=t,e=this.width>this.height?[this.width-this.height,0]:[0,this.height-this.width],o.fillStyle="#fff",o.fillRect(0,0,t,t),o.drawImage(this,e[0]/2,e[1]/2,this.width-e[0],this.height-e[1],0,0,t,t),i(n.toDataURL("image/jpeg"))},n.src=e}function ne(e,t){if(e&&"mailto:"===e.toString().substr(0,7).toLowerCase()){if(!t)return!0;e=e.toString().substr(7);var n=[],o=null,a=null,r={},l=e.replace(/\?.+$/,""),c=e.replace(/^[^\?]*\?/,""),u=i(38).default,d=new u,h=function(e){return e?de.a.compact(de.a.map(p(e).split(/[,]/),function(e){return d.clear(),d.mailsoParse(e),""!==d.email?d:null})):null};return n=h(l),r=m(c),Ae(r.cc)||(o=h(p(r.cc))),Ae(r.bcc)||(a=h(p(r.bcc))),i(9).showScreenPopup(t,[be.ComposeType.Empty,null,n,o,a,Ae(r.subject)?null:s(p(r.subject)),Ae(r.body)?null:K(s(p(r.body)))]),!0}return!1}function oe(e){ce()(function(){return e()})}function ae(){He()}var re=i(11),se=i.n(re),le=i(12),ce=i.n(le),ue=i(6),de=i.n(ue),pe=i(2),he=i.n(pe),fe=i(173),me=i.n(fe),ge=i(7),be=i(3),ye=i(103),ve=i(76);i.d(t,"isArray",function(){return Te}),i.d(t,"isObject",function(){return Ce}),i.d(t,"isUnd",function(){return Ae}),i.d(t,"isNull",function(){return Fe}),i.d(t,"has",function(){return Ne}),i.d(t,"bind",function(){return Re}),i.d(t,"noop",function(){return Ie}),i.d(t,"noopTrue",function(){return Le}),i.d(t,"noopFalse",function(){return _e}),i.d(t,"trim",function(){return Se}),i.d(t,"inArray",function(){return we}),i.d(t,"isFunc",function(){return Ee}),t.silentTryCatch=n,t.isNormal=o,t.isPosNumeric=a,t.pInt=r,t.pString=s,t.pBool=l,t.boolToAjax=c,t.isNonEmptyArray=u,t.encodeURIComponent=d,t.decodeURIComponent=p,t.decodeURI=h,t.encodeURI=f,t.simpleQueryParser=m,t.fakeMd5=g,t.encodeHtml=b,t.splitPlainText=y,i.d(t,"timeOutActionSecond",function(){return De}),i.d(t,"timeOutAction",function(){return Pe}),t.inFocus=v,t.removeInFocus=S,t.removeSelection=w,t.replySubjectAdd=T,t.roundNumber=C,t.friendlySize=E,t.log=A,t.delegateRun=F,t.killCtrlACtrlS=N,t.createCommandLegacy=R,i.d(t,"convertThemeName",function(){return Me}),t.quoteName=I,t.microtime=L,t.timestamp=_,t.convertLangName=P,t.draggablePlace=D,t.defautOptionsAfterRender=M,t.clearBqSwitcher=k,t.previewMessage=O,t.settingsSaveHelperFunction=x,t.settingsSaveHelperSimpleFunction=U,t.settingsSaveHelperSubscribeFunction=H,t.findEmailAndLinks=B,t.htmlToPlain=G,t.plainToHtml=K,t.folderListOptionsBuilder=V,t.selectElement=z,i.d(t,"detectDropdownVisibility",function(){return ke}),t.triggerAutocompleteInputChange=j,t.getConfigurationFromScriptTag=q,t.disposeOne=W,t.disposeObject=Y,t.delegateRunOnDestroy=$,t.appendStyles=J,t.changeTheme=X,t.computedPagenatorHelper=Z,t.getFileExtension=Q,t.mimeContentType=ee,t.getRealHeight=te,t.resizeAndCrop=ie,t.mailToHelper=ne,t.domReady=oe,i.d(t,"windowResize",function(){return He}),t.windowResizeCallback=ae;var Se=ce.a.trim,we=ce.a.inArray,Te=de.a.isArray,Ce=de.a.isObject,Ee=de.a.isFunction,Ae=de.a.isUndefined,Fe=de.a.isNull,Ne=de.a.has,Re=de.a.bind,Ie=function(){},Le=function(){return!0},_e=function(){return!1};i.d(t,"jassl",function(){return ve.a});var Pe=function(){var e={};return function(t,i,n){e[t]=Ae(e[t])?0:e[t],se.a.clearTimeout(e[t]),e[t]=se.a.setTimeout(i,n)}}(),De=function(){var e={};return function(t,i,n){e[t]||(e[t]=se.a.setTimeout(function(){i(),e[t]=0},n))}}(),Me=de.a.memoize(function(e){return"@custom"===e.substr(-7)&&(e=Se(e.substring(0,e.length-7))),Se(e.replace(/[^a-zA-Z0-9]+/g," ").replace(/([A-Z])/g," $1").replace(/[\s]+/g," "))});se.a.rainloop_Utils_htmlToPlain=G,se.a.rainloop_Utils_plainToHtml=K;var ke=de.a.debounce(function(){i.i(ge.dropdownVisibility)(!!de.a.find(ge.data.aBootstrapDropdowns,function(e){return e.hasClass("open")}))},50),Oe={},xe=0,Ue=null,He=de.a.debounce(function(e){Ae(e)||Fe(e)?ge.$win.resize():se.a.setTimeout(function(){ge.$win.resize()},e)},50),Be=se.a.String.substr;"b"!=="ab".substr(-1)&&(Be=function(e,t,i){return t=0>t?e.length+t:t,e.substr(t,i)},se.a.String.substr=Be)},function(e,t,i){"use strict";var n=i(11),o=i.n(n),a=i(6),r=i.n(a),s=i(12),l=i.n(s),c=i(113),u=i(164),d=i.n(u),p=i(3),h=o.a.ko,f=l()(o.a),m=function(e){h.utils.domNodeDisposal.addDisposeCallback(e,function(){e&&e.__opentip&&e.__opentip.deactivate()})};h.bindingHandlers.updateWidth={init:function(e,t){var i=l()(e),n=t(),a=function(){n(i.width()),o.a.setTimeout(function(){n(i.width())},p.Magics.Time500ms)};f.on("resize",a),a(),h.utils.domNodeDisposal.addDisposeCallback(e,function(){f.off("resize",a)})}},h.bindingHandlers.editor={init:function(e,t){var n=null,o=t(),a=i(75).default,r=function(){o&&o.__editor&&o.__editor.setHtmlOrPlain(o())},s=function(){o&&o.__editor&&o(o.__editor.getDataWithHtmlMark())},l=function(){o.__editor=n,r()};h.isObservable(o)&&a&&(n=new a(e,s,l,s),o.__fetchEditorValue=s,o.subscribe(r))}},h.bindingHandlers.json={init:function(e,t){l()(e).text(o.a.JSON.stringify(h.unwrap(t())))},update:function(e,t){l()(e).text(o.a.JSON.stringify(h.unwrap(t())))}},h.bindingHandlers.scrollerShadows={init:function(e){var t=8,i=l()(e),n=i.find("[data-scroller-shadows-content]")[0]||null,o=r.a.throttle(function(){i.toggleClass("scroller-shadow-top",t<n.scrollTop).toggleClass("scroller-shadow-bottom",n.scrollTop+t<n.scrollHeight-n.clientHeight)},100);n&&(l()(n).on("scroll resize",o),f.on("resize",o),h.utils.domNodeDisposal.addDisposeCallback(n,function(){l()(n).off(),f.off("resize",o)}))}},h.bindingHandlers.pikaday={init:function(e,t,i,n,o){h.bindingHandlers.textInput.init(e,t,i,n,o),d.a&&(e.__pikaday=new d.a({field:e}))}},h.bindingHandlers.visibleAnimated={init:function(e,t){var i=l()(e);i.addClass("rl-animated-inited"),h.unwrap(t())?i.show():i.hide()},update:function(e,t){var i=l()(e);h.unwrap(t())?(i.addClass("rl-animated-hidden").show(),r.a.delay(function(){i.removeClass("rl-animated-hidden")},10)):i.hide().removeClass("rl-animated-hidden")}},h.bindingHandlers.tooltip={init:function(e,t){var n=l()(e),o=t(),a="on"===(n.data("tooltip-mobile")||"off"),s=i(7);if(!s.bMobileDevice||a){var u=!h.isObservable(o)&&r.a.isFunction(o)?o():h.unwrap(o);if(e.__opentip=new c.a(e,{style:"rainloopTip",element:e,tipJoint:n.data("tooltip-join")||"bottom"}),s.dropdownVisibility.subscribe(function(t){t&&e.__opentip.hide()}),""===u?(e.__opentip.hide(),e.__opentip.deactivate(),e.__opentip.setContent("")):e.__opentip.activate(),"on"===(n.data("tooltip-i18n")||"on")){var d=i(8);e.__opentip.setContent(d.i18n(u)),d.trigger.subscribe(function(){e.__opentip.setContent(d.i18n(u))}),s.dropdownVisibility.subscribe(function(){e&&e.__opentip&&e.__opentip.setContent(d.i18n(u))})}else e.__opentip.setContent(u);f.on("rl.tooltips.diactivate",function(){e.__opentip.hide(),e.__opentip.deactivate()}),f.on("rl.tooltips.activate",function(){e.__opentip.activate()})}},update:function(e,t){var n=l()(e),o=t(),a="on"===(n.data("tooltip-mobile")||"off"),s=i(7);if((!s.bMobileDevice||a)&&e.__opentip){var c=!h.isObservable(o)&&r.a.isFunction(o)?o():h.unwrap(o);c?(e.__opentip.setContent("on"===(n.data("tooltip-i18n")||"on")?i(8).i18n(c):c),e.__opentip.activate()):(e.__opentip.hide(),e.__opentip.deactivate(),e.__opentip.setContent(""))}}},h.bindingHandlers.tooltipErrorTip={init:function(e){var t=l()(e);e.__opentip=new c.a(e,{style:"rainloopErrorTip",hideOn:"mouseout click",element:e,tipJoint:t.data("tooltip-join")||"top"}),e.__opentip.deactivate(),l()(o.a.document).on("click",function(){e&&e.__opentip&&e.__opentip.hide()}),m(e)},update:function(e,t){var i=l()(e),n=t(),o=!h.isObservable(n)&&r.a.isFunction(n)?n():h.unwrap(n),a=e.__opentip;a&&(""===o?(a.hide(),a.deactivate(),a.setContent("")):r.a.delay(function(){i.is(":visible")?(a.setContent(o),a.activate(),a.show()):(a.hide(),a.deactivate(),a.setContent(""))},p.Magics.Time100ms))}},h.bindingHandlers.registrateBootstrapDropdown={init:function(e){var t=i(7);t&&t.data.aBootstrapDropdowns&&(t.data.aBootstrapDropdowns.push(l()(e)),l()(e).click(function(){i(1).detectDropdownVisibility()}))}},h.bindingHandlers.openDropdownTrigger={update:function(e,t){if(h.unwrap(t())){var n=l()(e);n.hasClass("open")||n.find(".dropdown-toggle").dropdown("toggle"),n.find(".dropdown-toggle").focus(),i(1).detectDropdownVisibility(),t()(!1)}}},h.bindingHandlers.dropdownCloser={init:function(e){l()(e).closest(".dropdown").on("click",".e-item",function(){l()(e).dropdown("toggle")})}},h.bindingHandlers.popover={init:function(e,t){l()(e).popover(h.unwrap(t())),h.utils.domNodeDisposal.addDisposeCallback(e,function(){l()(e).popover("destroy")})}},h.bindingHandlers.csstext={},h.bindingHandlers.csstext.init=h.bindingHandlers.csstext.update=function(e,t){e&&e.styleSheet&&"undefined"!=typeof e.styleSheet.cssText?e.styleSheet.cssText=h.unwrap(t()):l()(e).text(h.unwrap(t()))},h.bindingHandlers.resizecrop={init:function(e){l()(e).addClass("resizecrop").resizecrop({width:"100",height:"100",wrapperCSS:{"border-radius":"10px"}})},update:function(e,t){t()(),l()(e).resizecrop({width:"100",height:"100"})}},h.bindingHandlers.onKeyDown={init:function(e,t,i,n){l()(e).on("keydown.koOnKeyDown",function(e){return!e||t().call(n,e)}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){l()(e).off("keydown.koOnKeyDown")})}},h.bindingHandlers.onEnter={init:function(e,t,i,n){l()(e).on("keypress.koOnEnter",function(i){i&&13===o.a.parseInt(i.keyCode,10)&&(l()(e).trigger("change"),t().call(n))}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){l()(e).off("keypress.koOnEnter")})}},h.bindingHandlers.onSpace={init:function(e,t,i,n){l()(e).on("keyup.koOnSpace",function(e){e&&32===o.a.parseInt(e.keyCode,10)&&t().call(n,e)}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){l()(e).off("keyup.koOnSpace")})}},h.bindingHandlers.onTab={init:function(e,t,i,n){l()(e).on("keydown.koOnTab",function(e){return!e||9!==o.a.parseInt(e.keyCode,10)||t().call(n,!!e.shiftKey)}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){l()(e).off("keydown.koOnTab")})}},h.bindingHandlers.onEsc={init:function(e,t,i,n){l()(e).on("keyup.koOnEsc",function(i){i&&27===o.a.parseInt(i.keyCode,10)&&(l()(e).trigger("change"),t().call(n))}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){l()(e).off("keyup.koOnEsc")})}},h.bindingHandlers.clickOnTrue={update:function(e,t){h.unwrap(t())&&l()(e).click()}},h.bindingHandlers.modal={init:function(e,t){var n=i(7),o=i(1);l()(e).toggleClass("fade",!n.bMobileDevice).modal({keyboard:!1,show:h.unwrap(t())}).on("shown.koModal",o.windowResizeCallback).find(".close").on("click.koModal",function(){t()(!1)}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){l()(e).off("shown.koModal").find(".close").off("click.koModal")})},update:function(e,t){var n=i(7);l()(e).modal(h.unwrap(t())?"show":"hide"),n.$html.hasClass("rl-anim")&&(n.$html.addClass("rl-modal-animation"),r.a.delay(function(){n.$html.removeClass("rl-modal-animation")},p.Magics.Time500ms))}},h.bindingHandlers.moment={init:function(e,t){i(35).momentToNode(l()(e).addClass("moment").data("moment-time",h.unwrap(t())))},update:function(e,t){i(35).momentToNode(l()(e).data("moment-time",h.unwrap(t())))}},h.bindingHandlers.i18nInit={init:function(e){i(8).i18nToNodes(e)}},h.bindingHandlers.translatorInit={init:function(e){i(8).i18nToNodes(e)}},h.bindingHandlers.i18nUpdate={update:function(e,t){h.unwrap(t()),i(8).i18nToNodes(e)}},h.bindingHandlers.link={update:function(e,t){l()(e).attr("href",h.unwrap(t()))}},h.bindingHandlers.title={update:function(e,t){l()(e).attr("title",h.unwrap(t()))}},h.bindingHandlers.textF={init:function(e,t){l()(e).text(h.unwrap(t()))}},h.bindingHandlers.initDom={init:function(e,t){t()(e)}},h.bindingHandlers.initFixedTrigger={init:function(e,t){var i=h.unwrap(t()),n=l()(e),o=i[1]||0,a=l()(i[0]||null);a=a[0]?a:null,a&&f.resize(function(){var e=a?a.offset():null;e&&e.top&&n.css("top",e.top+o)})}},h.bindingHandlers.initResizeTrigger={init:function(e,t){var i=h.unwrap(t());l()(e).css({height:i[1],"min-height":i[1]})},update:function(e,t){var n=i(1),o=i(7),a=h.unwrap(t()),r=n.pInt(a[1]),s=0,c=l()(e).offset().top;0<c&&(c+=n.pInt(a[2]),s=o.$win.height()-c,r<s&&(r=s),l()(e).css({height:r,"min-height":r}))}},h.bindingHandlers.appendDom={update:function(e,t){l()(e).hide().empty().append(h.unwrap(t())).show()}},h.bindingHandlers.draggable={init:function(e,t,n){var a=i(7),r=i(1);if(!a.bMobileDevice){var s=100,c=3,u=n(),d=u&&u.droppableSelector?u.droppableSelector:"",p={distance:20,handle:".dragHandle",cursorAt:{top:22,left:3},refreshPositions:!0,scroll:!0,drag:null,stop:null,helper:null};d&&(p.drag=function(e){l()(d).each(function(){var t=l()(this),i=t.offset(),n=i.top+t.height();if(o.a.clearInterval(t.data("timerScroll")),t.data("timerScroll",!1),e.pageX>=i.left&&e.pageX<=i.left+t.width()){if(e.pageY>=n-s&&e.pageY<=n){var a=function(){t.scrollTop(t.scrollTop()+c),r.windowResize()};t.data("timerScroll",o.a.setInterval(a,10)),a()}if(e.pageY>=i.top&&e.pageY<=i.top+s){var u=function(){t.scrollTop(t.scrollTop()-c),r.windowResize()};t.data("timerScroll",o.a.setInterval(u,10)),u()}}})},p.stop=function(){l()(d).each(function(){var e=l()(this);o.a.clearInterval(e.data("timerScroll")),e.data("timerScroll",!1)})}),p.helper=function(e){return t()(e&&e.target?h.dataFor(e.target):null)},l()(e).draggable(p).on("mousedown.koDraggable",function(){r.removeInFocus()}),h.utils.domNodeDisposal.addDisposeCallback(e,function(){l()(e).off("mousedown.koDraggable").draggable("destroy")})}}},h.bindingHandlers.droppable={init:function(e,t,n){var o=i(7);if(!o.bMobileDevice){var a=t(),r=n(),s=r&&r.droppableOver?r.droppableOver:null,c=r&&r.droppableOut?r.droppableOut:null,u={tolerance:"pointer",hoverClass:"droppableHover",drop:null,over:null,out:null};a&&(u.drop=function(e,t){a(e,t)},s&&(u.over=function(e,t){s(e,t)}),c&&(u.out=function(e,t){c(e,t)}),l()(e).droppable(u),h.utils.domNodeDisposal.addDisposeCallback(e,function(){l()(e).droppable("destroy")}))}}},h.bindingHandlers.nano={init:function(e){var t=i(7),n=i(10);t.bDisableNanoScroll||n.appSettingsGet("useNativeScrollbars")||l()(e).addClass("nano").nanoScroller({iOSNativeScrolling:!1,preventPageScrolling:!0})}},h.bindingHandlers.saveTrigger={init:function(e){var t=l()(e);t.data("save-trigger-type",t.is("input[type=text],input[type=email],input[type=password],select,textarea")?"input":"custom"),"custom"===t.data("save-trigger-type")?t.append('&nbsp;&nbsp;<i class="icon-spinner animated"></i><i class="icon-remove error"></i><i class="icon-ok success"></i>').addClass("settings-saved-trigger"):t.addClass("settings-saved-trigger-input")},update:function(e,t){var i=h.unwrap(t()),n=l()(e);if("custom"===n.data("save-trigger-type"))switch(i.toString()){case"1":n.find(".animated,.error").hide().removeClass("visible").end().find(".success").show().addClass("visible");break;case"0":n.find(".animated,.success").hide().removeClass("visible").end().find(".error").show().addClass("visible");break;case"-2":n.find(".error,.success").hide().removeClass("visible").end().find(".animated").show().addClass("visible");break;default:n.find(".animated").hide().end().find(".error,.success").removeClass("visible")}else switch(i.toString()){case"1":n.addClass("success").removeClass("error");break;case"0":n.addClass("error").removeClass("success");break;case"-2":break;default:n.removeClass("error success")}}},h.bindingHandlers.emailsTags={init:function(e,t,n){var o=i(1),a=i(38).default,s=l()(e),c=t(),u=n(),d=u.autoCompleteSource||null,p=function(e){c&&c.focused&&c.focused(!!e)};s.inputosaurus({parseOnBlur:!0,allowDragAndDrop:!0,focusCallback:p,inputDelimiters:[",",";","\n"],autoCompleteSource:d,parseHook:function(e){return r.a.map(e,function(e){var t=o.trim(e);if(""!==t){var i=new a;return i.mailsoParse(t),[i.toLine(!1),i]}return[t,null]})},change:function(e){s.data("EmailsTagsValue",e.target.value),c(e.target.value)}}),c&&c.focused&&c.focused.subscribe&&c.focused.subscribe(function(e){s.inputosaurus(e?"focus":"blur")})},update:function(e,t){var i=l()(e),n=t(),o=h.unwrap(n);i.data("EmailsTagsValue")!==o&&(i.val(o),i.data("EmailsTagsValue",o),i.inputosaurus("refresh"))}},h.bindingHandlers.command={init:function(e,t,i,n,o){var a=l()(e),s=t();if(!s||!s.isCommand)throw new Error("Value should be a command");if(s.enabled||(s.enabled=h.observable(!0)),!s.canExecute){var c=s.__realCanExecute;r.a.isFunction(c)?s.canExecute=h.computed(function(){return s.enabled()&&c.call(n,n)}):s.canExecute=h.computed(function(){return s.enabled()&&!!c})}a.addClass("command"),h.bindingHandlers[a.is("form")?"submit":"click"].init(e,t,i,n,o)},update:function(e,t){var i=l()(e),n=t(),o=n.enabled();i.toggleClass("command-not-enabled",!o),o&&(o=n.canExecute(),i.toggleClass("command-can-not-be-execute",!o)),i.toggleClass("command-disabled disable disabled",!o).toggleClass("no-disabled",!!o),(i.is("input")||i.is("button"))&&i.prop("disabled",!o)}},h.extenders.trimmer=function(e){var t=i(1),n=h.computed({read:e,write:function(i){e(t.trim(i.toString()))}});return n(e()),n},h.extenders.posInterer=function(e,t){var n=i(1),o=h.computed({read:e,write:function(i){var o=n.pInt(i.toString(),t);0>=o&&(o=t),o===e()&&""+o!=""+i&&e(o+1),e(o)}});return o(e()),o},h.extenders.limitedList=function(e,t){var n=i(1),o=h.computed({read:e,write:function(i){var o=h.unwrap(e),a=h.unwrap(t);n.isNonEmptyArray(a)?-1<n.inArray(i,a)?e(i):-1<n.inArray(o,a)?(e(o+" "),e(o)):(e(a[0]+" "),e(a[0])):e("")}}).extend({notify:"always"});return o(e()),o.valueHasMutated||(o.valueHasMutated=function(){e.valueHasMutated()}),o},h.extenders.reversible=function(e){var t=e();return e.commit=function(){t=e()},e.reverse=function(){e(t)},e.commitedValue=function(){return t},e},h.extenders.toggleSubscribe=function(e,t){return e.subscribe(t[1],t[0],"beforeChange"),e.subscribe(t[2],t[0]),e},h.extenders.toggleSubscribeProperty=function(e,t){var i=t[1];return i&&(e.subscribe(function(e){e&&e[i]&&e[i](!1)},t[0],"beforeChange"),e.subscribe(function(e){e&&e[i]&&e[i](!0)},t[0])),e},h.extenders.falseTimeout=function(e,t){return e.iFalseTimeoutTimeout=0,e.subscribe(function(n){n&&(o.a.clearTimeout(e.iFalseTimeoutTimeout),e.iFalseTimeoutTimeout=o.a.setTimeout(function(){e(!1),e.iFalseTimeoutTimeout=0},i(1).pInt(t)))}),e},h.extenders.specialThrottle=function(e,t){return e.iSpecialThrottleTimeoutValue=i(1).pInt(t),0<e.iSpecialThrottleTimeoutValue?(e.iSpecialThrottleTimeout=0,e.valueForRead=h.observable(!!e()).extend({
  throttle: 10
}), h.computed({ read: e.valueForRead, write: function (t) { t ? e.valueForRead(t) : e.valueForRead() ? (o.a.clearTimeout(e.iSpecialThrottleTimeout), e.iSpecialThrottleTimeout = o.a.setTimeout(function () { e.valueForRead(!1), e.iSpecialThrottleTimeout = 0 }, e.iSpecialThrottleTimeoutValue)) : e.valueForRead(t) } })) : e
}, h.extenders.idleTrigger = function (e) { return e.trigger = h.observable(p.SaveSettingsStep.Idle), e }, h.observable.fn.idleTrigger = function () { return this.extend({ idleTrigger: !0 }) }, h.observable.fn.validateNone = function () { return this.hasError = h.observable(!1), this }, h.observable.fn.validateEmail = function () { var e = this; return this.hasError = h.observable(!1), this.subscribe(function (t) { e.hasError("" !== t && !/^[^@\s]+@[^@\s]+$/.test(t)) }), this.valueHasMutated(), this }, h.observable.fn.validateSimpleEmail = function () { var e = this; return this.hasError = h.observable(!1), this.subscribe(function (t) { e.hasError("" !== t && !/^.+@.+$/.test(t)) }), this.valueHasMutated(), this }, h.observable.fn.deleteAccessHelper = function () { return this.extend({ falseTimeout: 3e3 }).extend({ toggleSubscribeProperty: [this, "deleteAccess"] }), this }, h.observable.fn.validateFunc = function (e) { var t = this; return this.hasFuncError = h.observable(!1), r.a.isFunction(e) && (this.subscribe(function (i) { t.hasFuncError(!e(i)) }), this.valueHasMutated()), this }, e.exports = h
}, function (e, t, i) { "use strict"; i.d(t, "FileType", function () { return n }), i.d(t, "StorageResultType", function () { return o }), i.d(t, "Focused", function () { return a }), i.d(t, "State", function () { return r }), i.d(t, "StateType", function () { return s }), i.d(t, "Capa", function () { return l }), i.d(t, "KeyState", function () { return c }), i.d(t, "FolderType", function () { return u }), i.d(t, "ServerFolderType", function () { return d }), i.d(t, "LoginSignMeTypeAsString", function () { return p }), i.d(t, "LoginSignMeType", function () { return h }), i.d(t, "ComposeType", function () { return f }), i.d(t, "UploadErrorCode", function () { return m }), i.d(t, "SetSystemFoldersNotification", function () { return g }), i.d(t, "ClientSideKeyName", function () { return b }), i.d(t, "EventKeyCode", function () { return y }), i.d(t, "MessageSetAction", function () { return v }), i.d(t, "MessageSelectAction", function () { return S }), i.d(t, "DesktopNotification", function () { return w }), i.d(t, "MessagePriority", function () { return T }), i.d(t, "EditorDefaultType", function () { return C }), i.d(t, "ServerSecure", function () { return E }), i.d(t, "SearchDateType", function () { return A }), i.d(t, "SaveSettingsStep", function () { return F }), i.d(t, "Layout", function () { return N }), i.d(t, "FilterConditionField", function () { return R }), i.d(t, "FilterConditionType", function () { return I }), i.d(t, "FiltersAction", function () { return L }), i.d(t, "FilterRulesType", function () { return _ }), i.d(t, "SignedVerifyStatus", function () { return P }), i.d(t, "ContactPropertyType", function () { return D }), i.d(t, "Magics", function () { return M }), i.d(t, "Ports", function () { return k }), i.d(t, "Notification", function () { return O }); var n = { Unknown: "unknown", Text: "text", Html: "html", Code: "code", Eml: "eml", WordText: "word-text", Pdf: "pdf", Image: "image", Audio: "audio", Video: "video", Sheet: "sheet", Presentation: "presentation", Certificate: "certificate", CertificateBin: "certificate-bin", Archive: "archive" }, o = { Success: "success", Abort: "abort", Error: "error", Unload: "unload" }, a = { None: "none", MessageList: "message-list", MessageView: "message-view", FolderList: "folder-list" }, r = { Empty: 10, Login: 20, Auth: 30 }, s = { Webmail: 0, Admin: 1 }, l = { TwoFactor: "TWO_FACTOR", TwoFactorForce: "TWO_FACTOR_FORCE", OpenPGP: "OPEN_PGP", Prefetch: "PREFETCH", Gravatar: "GRAVATAR", Folders: "FOLDERS", Composer: "COMPOSER", Contacts: "CONTACTS", Reload: "RELOAD", Search: "SEARCH", SearchAdv: "SEARCH_ADV", MessageActions: "MESSAGE_ACTIONS", MessageListActions: "MESSAGELIST_ACTIONS", AttachmentsActions: "ATTACHMENTS_ACTIONS", DangerousActions: "DANGEROUS_ACTIONS", Settings: "SETTINGS", Help: "HELP", Themes: "THEMES", UserBackground: "USER_BACKGROUND", Sieve: "SIEVE", Filters: "FILTERS", AttachmentThumbnails: "ATTACHMENT_THUMBNAILS", Templates: "TEMPLATES", AutoLogout: "AUTOLOGOUT", AdditionalAccounts: "ADDITIONAL_ACCOUNTS", Identities: "IDENTITIES" }, c = { All: "all", None: "none", ContactList: "contact-list", MessageList: "message-list", FolderList: "folder-list", MessageView: "message-view", Compose: "compose", Settings: "settings", Menu: "menu", PopupComposeOpenPGP: "compose-open-pgp", PopupMessageOpenPGP: "message-open-pgp", PopupViewOpenPGP: "view-open-pgp", PopupKeyboardShortcutsHelp: "popup-keyboard-shortcuts-help", PopupAsk: "popup-ask" }, u = { Inbox: 10, SentItems: 11, Draft: 12, Trash: 13, Spam: 14, Archive: 15, NotSpam: 80, User: 99 }, d = { USER: 0, INBOX: 1, SENT: 2, DRAFTS: 3, JUNK: 4, TRASH: 5, IMPORTANT: 10, FLAGGED: 11, ALL: 12 }, p = { DefaultOff: "defaultoff", DefaultOn: "defaulton", Unused: "unused" }, h = { DefaultOff: 0, DefaultOn: 1, Unused: 2 }, f = { Empty: "empty", Reply: "reply", ReplyAll: "replyall", Forward: "forward", ForwardAsAttachment: "forward-as-attachment", Draft: "draft", EditAsNew: "editasnew" }, m = { Normal: 0, FileIsTooBig: 1, FilePartiallyUploaded: 2, FileNoUploaded: 3, MissingTempFolder: 4, FileOnSaveingError: 5, FileType: 98, Unknown: 99 }, g = { None: 0, Sent: 1, Draft: 2, Spam: 3, Trash: 4, Archive: 5 }, b = { FoldersLashHash: 0, MessagesInboxLastHash: 1, MailBoxListSize: 2, ExpandedFolders: 3, FolderListSize: 4, MessageListSize: 5, LastReplyAction: 6, LastSignMe: 7, ComposeLastIdentityID: 8, MessageHeaderFullInfo: 9 }, y = { Backspace: 8, Tab: 9, Enter: 13, Esc: 27, PageUp: 33, PageDown: 34, Left: 37, Right: 39, Up: 38, Down: 40, End: 35, Home: 36, Space: 32, Insert: 45, Delete: 46, A: 65, S: 83 }, v = { SetSeen: 0, UnsetSeen: 1, SetFlag: 2, UnsetFlag: 3 }, S = { All: 0, None: 1, Invert: 2, Unseen: 3, Seen: 4, Flagged: 5, Unflagged: 6 }, w = { Allowed: 0, NotAllowed: 1, Denied: 2, NotSupported: 9 }, T = { Low: 5, Normal: 3, High: 1 }, C = { Html: "Html", Plain: "Plain", HtmlForced: "HtmlForced", PlainForced: "PlainForced" }, E = { None: 0, SSL: 1, TLS: 2 }, A = { All: -1, Days3: 3, Days7: 7, Month: 30 }, F = { Animate: -2, Idle: -1, TrueResult: 1, FalseResult: 0 }, N = { NoPreview: 0, SidePreview: 1, BottomPreview: 2 }, R = { From: "From", Recipient: "Recipient", Subject: "Subject", Header: "Header", Size: "Size" }, I = { Contains: "Contains", NotContains: "NotContains", EqualTo: "EqualTo", NotEqualTo: "NotEqualTo", Regex: "Regex", Over: "Over", Under: "Under" }, L = { None: "None", MoveTo: "MoveTo", Discard: "Discard", Vacation: "Vacation", Reject: "Reject", Forward: "Forward" }, _ = { All: "All", Any: "Any" }, P = { UnknownPublicKeys: -4, UnknownPrivateKey: -3, Unverified: -2, Error: -1, None: 0, Success: 1 }, D = { Unknown: 0, FullName: 10, FirstName: 15, LastName: 16, MiddleName: 16, Nick: 18, NamePrefix: 20, NameSuffix: 21, Email: 30, Phone: 31, Web: 32, Birthday: 40, Facebook: 90, Skype: 91, GitHub: 92, Note: 110, Custom: 250 }, M = { EventWhichMouseMiddle: 3, ifvisibleIdle10s: 10, BitLength2048: 2048, BitLength1024: 1024, Size350px: 350, Size50px: 50, Size20px: 20, Size1px: 1, Time30mInMin: 30, Time60m: 36e5, Time30m: 18e5, Time20m: 12e5, Time15m: 9e5, Time10m: 6e5, Time5m: 3e5, Time3m: 18e4, Time2m: 12e4, Time1m: 6e4, Time30s: 3e4, Time10s: 1e4, Time7s: 7e3, Time5s: 5e3, Time3s: 3e3, Time1s: 1e3, Time500ms: 500, Time350ms: 350, Time250ms: 250, Time200ms: 200, Time100ms: 100, Time50ms: 50, Time20ms: 20, Time10ms: 10, Time1ms: 1 }, k = { Imap: 143, ImapSsl: 993, Smtp: 25, SmtpSsl: 465, SmtpStartTls: 587 }, O = { InvalidToken: 101, AuthError: 102, AccessError: 103, ConnectionError: 104, CaptchaError: 105, SocialFacebookLoginAccessDisable: 106, SocialTwitterLoginAccessDisable: 107, SocialGoogleLoginAccessDisable: 108, DomainNotAllowed: 109, AccountNotAllowed: 110, AccountTwoFactorAuthRequired: 120, AccountTwoFactorAuthError: 121, CouldNotSaveNewPassword: 130, CurrentPasswordIncorrect: 131, NewPasswordShort: 132, NewPasswordWeak: 133, NewPasswordForbidden: 134, ContactsSyncError: 140, CantGetMessageList: 201, CantGetMessage: 202, CantDeleteMessage: 203, CantMoveMessage: 204, CantCopyMessage: 205, CantSaveMessage: 301, CantSendMessage: 302, InvalidRecipients: 303, CantSaveFilters: 351, CantGetFilters: 352, FiltersAreNotCorrect: 355, CantCreateFolder: 400, CantRenameFolder: 401, CantDeleteFolder: 402, CantSubscribeFolder: 403, CantUnsubscribeFolder: 404, CantDeleteNonEmptyFolder: 405, CantSaveSettings: 501, CantSavePluginSettings: 502, DomainAlreadyExists: 601, CantInstallPackage: 701, CantDeletePackage: 702, InvalidPluginPackage: 703, UnsupportedPluginPackage: 704, LicensingServerIsUnavailable: 710, LicensingExpired: 711, LicensingBanned: 712, DemoSendMessageError: 750, DemoAccountError: 751, AccountAlreadyExists: 801, AccountDoesNotExist: 802, MailServerError: 901, ClientViewError: 902, InvalidInputArgument: 903, AjaxFalse: 950, AjaxAbort: 951, AjaxParse: 952, AjaxTimeout: 953, UnknownNotification: 999, UnknownError: 999 } }, function (e, t, i) { "use strict"; function n (e) { return e && e.__esModule ? e : { default: e } } t.__esModule = !0; var o = i(126), a = n(o), r = i(125), s = n(r), l = i(81), c = n(l); t.default = function (e, t) { if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + ("undefined" == typeof t ? "undefined" : (0, c.default)(t))); e.prototype = (0, s.default)(t && t.prototype, { constructor: { value: e, enumerable: !1, writable: !0, configurable: !0 } }), t && (a.default ? (0, a.default)(e, t) : e.__proto__ = t) } }, function (e, t, i) { "use strict"; function n (e) { return e && e.__esModule ? e : { default: e } } t.__esModule = !0; var o = i(81), a = n(o); t.default = function (e, t) { if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); return !t || "object" !== ("undefined" == typeof t ? "undefined" : (0, a.default)(t)) && "function" != typeof t ? e : t } }, function (e, t) { e.exports = window._ }, function (e, t, i) { "use strict"; var n = i(11), o = i.n(n), a = i(6), r = i.n(a), s = i(12), l = i.n(s), c = i(19), u = i.n(c), d = i(2), p = i.n(d), h = i(3); i.d(t, "$win", function () { return f }), i.d(t, "$doc", function () { return m }), i.d(t, "$html", function () { return g }), i.d(t, "$body", function () { return b }), i.d(t, "$div", function () { return y }), i.d(t, "$hcont", function () { return v }), i.d(t, "startMicrotime", function () { return S }), i.d(t, "community", function () { return w }), i.d(t, "dropdownVisibility", function () { return T }), i.d(t, "useKeyboardShortcuts", function () { return C }), i.d(t, "sUserAgent", function () { return E }), i.d(t, "bIE", function () { return A }), i.d(t, "bChrome", function () { return F }), i.d(t, "bSafari", function () { return N }), i.d(t, "bMobileDevice", function () { return R }), i.d(t, "bDisableNanoScroll", function () { return I }), i.d(t, "bAnimationSupported", function () { return L }), i.d(t, "bXMLHttpRequestSupported", function () { return _ }), i.d(t, "bIsHttps", function () { return P }), i.d(t, "htmlEditorDefaultConfig", function () { return D }), i.d(t, "htmlEditorLangsMap", function () { return M }), i.d(t, "bAllowPdfPreview", function () { return k }), i.d(t, "VIEW_MODELS", function () { return O }), i.d(t, "moveAction", function () { return x }), i.d(t, "leftPanelDisabled", function () { return U }), i.d(t, "leftPanelType", function () { return H }), i.d(t, "leftPanelWidth", function () { return B }), i.d(t, "popupVisibilityNames", function () { return G }), i.d(t, "popupVisibility", function () { return K }), i.d(t, "keyScopeReal", function () { return V }), i.d(t, "keyScopeFake", function () { return z }), i.d(t, "keyScope", function () { return j }), i.d(t, "data", function () { return q }); var f = l()(o.a); f.__sizes = [0, 0]; var m = l()(o.a.document), g = l()("html"), b = l()("body"), y = l()("<div></div>"), v = l()("<div></div>"); v.attr("area", "hidden").css({ position: "absolute", left: -5e3 }).appendTo(b); var S = (new o.a.Date).getTime(), w = !0, T = p.a.observable(!1).extend({ rateLimit: 0 }), C = p.a.observable(!0), E = "navigator" in o.a && "userAgent" in o.a.navigator && o.a.navigator.userAgent.toLowerCase() || "", A = -1 < E.indexOf("msie"), F = -1 < E.indexOf("chrome"), N = !F && -1 < E.indexOf("safari"), R = /android/i.test(E) || /iphone/i.test(E) || /ipod/i.test(E) || /ipad/i.test(E) || /blackberry/i.test(E), I = R, L = !R && g.hasClass("csstransitions") && g.hasClass("cssanimations"), _ = !!o.a.XMLHttpRequest, P = !(!o.a.document || !o.a.document.location) && "https:" === o.a.document.location.protocol, D = { title: !1, stylesSet: !1, customConfig: "", contentsCss: "", toolbarGroups: [{ name: "spec" }, { name: "styles" }, { name: "basicstyles", groups: ["basicstyles", "cleanup", "bidi"] }, { name: "colors" }, R ? {} : { name: "paragraph", groups: ["list", "indent", "blocks", "align"] }, { name: "links" }, { name: "insert" }, { name: "document", groups: ["mode", "document", "doctools"] }, { name: "others" }], removePlugins: "liststyle", removeButtons: "Format,Undo,Redo,Cut,Copy,Paste,Anchor,Strike,Subscript,Superscript,Image,SelectAll,Source", removeDialogTabs: "link:advanced;link:target;image:advanced;images:advanced", extraPlugins: "plain,signature", allowedContent: !0, extraAllowedContent: !0, fillEmptyBlocks: !1, ignoreEmptyParagraph: !0, disableNativeSpellChecker: !1, colorButton_enableAutomatic: !1, colorButton_enableMore: !0, font_defaultLabel: "Arial", fontSize_defaultLabel: "13", fontSize_sizes: "10/10px;12/12px;13/13px;14/14px;16/16px;18/18px;20/20px;24/24px;28/28px;36/36px;48/48px" }, M = { ar_sa: "ar-sa", bg_bg: "bg", cs_CZ: "cs", de_de: "de", el_gr: "el", es_es: "es", et_ee: "et", fr_fr: "fr", hu_hu: "hu", is_is: "is", it_it: "it", ja_jp: "ja", ko_kr: "ko", lt_lt: "lt", lv_lv: "lv", fa_ir: "fa", nb_no: "nb", nl_nl: "nl", pl_pl: "pl", pt_br: "pt-br", pt_pt: "pt", ro_ro: "ro", ru_ru: "ru", sk_sk: "sk", sl_si: "sl", sv_se: "sv", tr_tr: "tr", uk_ua: "uk", zh_cn: "zh-cn", zh_tw: "zh", mn_mon: "mn-mon"},k=!R;k&&o.a.navigator&&o.a.navigator.mimeTypes&&(k=!!r.a.find(o.a.navigator.mimeTypes,function(e){return e&&"application/pdf"===e.type}),k||(k="undefined"!=typeof o.a.navigator.mimeTypes["application/pdf"]));var O={settings:[],"settings-removed":[],"settings-disabled":[]},x=p.a.observable(!1),U=p.a.observable(!1),H=p.a.observable(""),B=p.a.observable(0);U.subscribe(function(e){e&&x()&&x(!1)}),x.subscribe(function(e){e&&U()&&U(!1)});var G=p.a.observableArray([]),K=p.a.computed(function(){return 0<G().length});K.subscribe(function(e){g.toggleClass("rl-modal",e)});var V=p.a.observable(h.KeyState.All),z=p.a.observable(h.KeyState.All),j=p.a.computed({read:function(){return z()},write:function(e){h.KeyState.Menu!==e&&(h.KeyState.Compose===e?u.a.filter=function(){return C()}:u.a.filter=function(e){if(C()){var t=e.target||e.srcElement,i=t?t.tagName.toUpperCase():"";return!("INPUT"===i||"SELECT"===i||"TEXTAREA"===i||t&&"DIV"===i&&("editorHtmlArea"===t.className||"true"==""+t.contentEditable))}return!1},z(e),T()&&(e=h.KeyState.Menu)),V(e)}});V.subscribe(function(e){u.a.setScope(e)}),T.subscribe(function(e){e?j(h.KeyState.Menu):h.KeyState.Menu===u.a.getScope()&&j(z())});var q={__APP__:null,iAjaxErrorCount:0,iTokenErrorCount:0,aBootstrapDropdowns:[],iMessageBodyCacheCount:0,bUnload:!1}},function(e,t,i){"use strict";function n(e,t,n){var o="",a=F[e];if(i.i(S.isUnd)(a)&&(a=i.i(S.isUnd)(n)?e:n),!i.i(S.isUnd)(t)&&!i.i(S.isNull)(t))for(o in t)i.i(S.has)(t,o)&&(a=a.replace("%"+o+"%",t[o]));return a}function o(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];f.a.defer(function(){g()("[data-i18n]",e).each(function(e,t){L(t)}),t&&w.bAnimationSupported&&g()(".i18n-animation[data-i18n]",e).letterfx({fx:"fall fade",backwards:!1,timing:50,fx_duration:"50ms",letter_end:"restore",element_end:"restore"})})}function a(){R.forEach(function(e){N[e[0]]=n(e[1])})}function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e&&e(),t?I.subscribe(function(){e&&e(),t&&t()}):e&&I.subscribe(e)}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return e=p.a.parseInt(e,10)||0,v.Notification.ClientViewError===e&&t?t:(n=n?p.a.parseInt(n,10)||0:0,i.i(S.isUnd)(N[e])?n&&i.i(S.isUnd)(N[n])?N[n]:"":N[e])}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v.Notification.UnknownNotification;return e&&e.ErrorCode?s(i.i(S.pInt)(e.ErrorCode),e.ErrorMessage||""):s(t)}function c(e){var t="";switch(p.a.parseInt(e,10)||0){case v.UploadErrorCode.FileIsTooBig:t=n("UPLOAD/ERROR_FILE_IS_TOO_BIG");break;case v.UploadErrorCode.FilePartiallyUploaded:t=n("UPLOAD/ERROR_FILE_PARTIALLY_UPLOADED");break;case v.UploadErrorCode.FileNoUploaded:t=n("UPLOAD/ERROR_NO_FILE_UPLOADED");break;case v.UploadErrorCode.MissingTempFolder:t=n("UPLOAD/ERROR_MISSING_TEMP_FOLDER");break;case v.UploadErrorCode.FileOnSaveingError:t=n("UPLOAD/ERROR_ON_SAVING_FILE");break;case v.UploadErrorCode.FileType:t=n("UPLOAD/ERROR_FILE_TYPE");break;default:t=n("UPLOAD/ERROR_UNKNOWN")}return t}function u(e,t){var n=i.i(S.microtime)();return w.$html.addClass("rl-changing-language"),new A.a(function(o,a){g.a.ajax({url:i.i(C.a)(t,e),dataType:"script",cache:!0}).then(function(){f.a.delay(function(){_();var e=-1<i.i(S.inArray)((t||"").toLowerCase(),["ar","ar_sa","he","he_he","ur","ur_ir"]);w.$html.removeClass("rl-changing-language").removeClass("rl-rtl rl-ltr").addClass(e?"rl-rtl":"rl-ltr"),o()},500<i.i(S.microtime)()-n?1:500)},function(){w.$html.removeClass("rl-changing-language"),p.a.rainloopI18N=null,a()})})}var d=i(11),p=i.n(d),h=i(6),f=i.n(h),m=i(12),g=i.n(m),b=i(2),y=i.n(b),v=i(3),S=i(1),w=i(7),T=i(35),C=i(14),E=i(47),A=i.n(E);i.d(t,"trigger",function(){return I}),t.i18n=n,t.i18nToNodes=o,t.initNotificationLanguage=a,t.initOnStartOrLangChange=r,t.getNotification=s,t.getNotificationFromResponse=l,t.getUploadErrorDescByCode=c,t.reload=u;var F=p.a.rainloopI18N||{},N={},R=[[v.Notification.InvalidToken,"NOTIFICATIONS/INVALID_TOKEN"],[v.Notification.InvalidToken,"NOTIFICATIONS/INVALID_TOKEN"],[v.Notification.AuthError,"NOTIFICATIONS/AUTH_ERROR"],[v.Notification.AccessError,"NOTIFICATIONS/ACCESS_ERROR"],[v.Notification.ConnectionError,"NOTIFICATIONS/CONNECTION_ERROR"],[v.Notification.CaptchaError,"NOTIFICATIONS/CAPTCHA_ERROR"],[v.Notification.SocialFacebookLoginAccessDisable,"NOTIFICATIONS/SOCIAL_FACEBOOK_LOGIN_ACCESS_DISABLE"],[v.Notification.SocialTwitterLoginAccessDisable,"NOTIFICATIONS/SOCIAL_TWITTER_LOGIN_ACCESS_DISABLE"],[v.Notification.SocialGoogleLoginAccessDisable,"NOTIFICATIONS/SOCIAL_GOOGLE_LOGIN_ACCESS_DISABLE"],[v.Notification.DomainNotAllowed,"NOTIFICATIONS/DOMAIN_NOT_ALLOWED"],[v.Notification.AccountNotAllowed,"NOTIFICATIONS/ACCOUNT_NOT_ALLOWED"],[v.Notification.AccountTwoFactorAuthRequired,"NOTIFICATIONS/ACCOUNT_TWO_FACTOR_AUTH_REQUIRED"],[v.Notification.AccountTwoFactorAuthError,"NOTIFICATIONS/ACCOUNT_TWO_FACTOR_AUTH_ERROR"],[v.Notification.CouldNotSaveNewPassword,"NOTIFICATIONS/COULD_NOT_SAVE_NEW_PASSWORD"],[v.Notification.CurrentPasswordIncorrect,"NOTIFICATIONS/CURRENT_PASSWORD_INCORRECT"],[v.Notification.NewPasswordShort,"NOTIFICATIONS/NEW_PASSWORD_SHORT"],[v.Notification.NewPasswordWeak,"NOTIFICATIONS/NEW_PASSWORD_WEAK"],[v.Notification.NewPasswordForbidden,"NOTIFICATIONS/NEW_PASSWORD_FORBIDDENT"],[v.Notification.ContactsSyncError,"NOTIFICATIONS/CONTACTS_SYNC_ERROR"],[v.Notification.CantGetMessageList,"NOTIFICATIONS/CANT_GET_MESSAGE_LIST"],[v.Notification.CantGetMessage,"NOTIFICATIONS/CANT_GET_MESSAGE"],[v.Notification.CantDeleteMessage,"NOTIFICATIONS/CANT_DELETE_MESSAGE"],[v.Notification.CantMoveMessage,"NOTIFICATIONS/CANT_MOVE_MESSAGE"],[v.Notification.CantCopyMessage,"NOTIFICATIONS/CANT_MOVE_MESSAGE"],[v.Notification.CantSaveMessage,"NOTIFICATIONS/CANT_SAVE_MESSAGE"],[v.Notification.CantSendMessage,"NOTIFICATIONS/CANT_SEND_MESSAGE"],[v.Notification.InvalidRecipients,"NOTIFICATIONS/INVALID_RECIPIENTS"],[v.Notification.CantSaveFilters,"NOTIFICATIONS/CANT_SAVE_FILTERS"],[v.Notification.CantGetFilters,"NOTIFICATIONS/CANT_GET_FILTERS"],[v.Notification.FiltersAreNotCorrect,"NOTIFICATIONS/FILTERS_ARE_NOT_CORRECT"],[v.Notification.CantCreateFolder,"NOTIFICATIONS/CANT_CREATE_FOLDER"],[v.Notification.CantRenameFolder,"NOTIFICATIONS/CANT_RENAME_FOLDER"],[v.Notification.CantDeleteFolder,"NOTIFICATIONS/CANT_DELETE_FOLDER"],[v.Notification.CantDeleteNonEmptyFolder,"NOTIFICATIONS/CANT_DELETE_NON_EMPTY_FOLDER"],[v.Notification.CantSubscribeFolder,"NOTIFICATIONS/CANT_SUBSCRIBE_FOLDER"],[v.Notification.CantUnsubscribeFolder,"NOTIFICATIONS/CANT_UNSUBSCRIBE_FOLDER"],[v.Notification.CantSaveSettings,"NOTIFICATIONS/CANT_SAVE_SETTINGS"],[v.Notification.CantSavePluginSettings,"NOTIFICATIONS/CANT_SAVE_PLUGIN_SETTINGS"],[v.Notification.DomainAlreadyExists,"NOTIFICATIONS/DOMAIN_ALREADY_EXISTS"],[v.Notification.CantInstallPackage,"NOTIFICATIONS/CANT_INSTALL_PACKAGE"],[v.Notification.CantDeletePackage,"NOTIFICATIONS/CANT_DELETE_PACKAGE"],[v.Notification.InvalidPluginPackage,"NOTIFICATIONS/INVALID_PLUGIN_PACKAGE"],[v.Notification.UnsupportedPluginPackage,"NOTIFICATIONS/UNSUPPORTED_PLUGIN_PACKAGE"],[v.Notification.LicensingServerIsUnavailable,"NOTIFICATIONS/LICENSING_SERVER_IS_UNAVAILABLE"],[v.Notification.LicensingExpired,"NOTIFICATIONS/LICENSING_EXPIRED"],[v.Notification.LicensingBanned,"NOTIFICATIONS/LICENSING_BANNED"],[v.Notification.DemoSendMessageError,"NOTIFICATIONS/DEMO_SEND_MESSAGE_ERROR"],[v.Notification.DemoAccountError,"NOTIFICATIONS/DEMO_ACCOUNT_ERROR"],[v.Notification.AccountAlreadyExists,"NOTIFICATIONS/ACCOUNT_ALREADY_EXISTS"],[v.Notification.AccountDoesNotExist,"NOTIFICATIONS/ACCOUNT_DOES_NOT_EXIST"],[v.Notification.MailServerError,"NOTIFICATIONS/MAIL_SERVER_ERROR"],[v.Notification.InvalidInputArgument,"NOTIFICATIONS/INVALID_INPUT_ARGUMENT"],[v.Notification.UnknownNotification,"NOTIFICATIONS/UNKNOWN_ERROR"],[v.Notification.UnknownError,"NOTIFICATIONS/UNKNOWN_ERROR"]],I=y.a.observable(!1),L=function(e){var t=g()(e),i=t.data("i18n");if(i)if("["===i.substr(0,1))switch(i.substr(0,6)){case"[html]":t.html(n(i.substr(6)));break;case"[place":t.attr("placeholder",n(i.substr(13)));break;case"[title":t.attr("title",n(i.substr(7)))}else t.text(n(i))},_=function(){p.a.rainloopI18N&&(F=p.a.rainloopI18N||{},o(p.a.document,!0),i.i(T.reload)(),I(!I())),p.a.rainloopI18N=null};w.$html.addClass("rl-"+(w.$html.attr("dir")||"ltr"))},function(e,t,i){"use strict";function n(){N()("#rl-content").addClass("rl-content-show"),N()("#rl-loading").hide().remove()}function o(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return i.i(O.createCommandLegacy)(null,e,t)}function a(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e.__rlSettingsData={Label:i,Template:t,Route:n,IsDefault:!!o},k.VIEW_MODELS.settings.push(e)}function r(e){k.VIEW_MODELS["settings-removed"].push(e)}function s(e){k.VIEW_MODELS["settings-disabled"].push(e)}function l(){_.a.changed.active=!1}function c(){_.a.changed.active=!0}function u(e){return""===e||i.i(O.isUnd)(H[e])?null:H[e]}function d(e){var t=null;return e&&(t=e,e.default&&(t=e.default)),t}function p(e){var t=d(e);t&&t.__vm&&t.__dom&&t.__vm.modalVisibility(!1)}function h(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;A.a.each(t.__names,function(o){i.i(M.a)(e,[o,t.__vm,n])})}function f(e,t){if(e&&!e.__builded){var n=null,a=new e(t),r=e.__type||"",s=r?N()("#rl-content #rl-"+r.toLowerCase()):null;e.__builded=!0,e.__vm=a,a.onShowTrigger=I.a.observable(!1),a.onHideTrigger=I.a.observable(!1),a.viewModelName=e.__name,a.viewModelNames=e.__names,a.viewModelTemplateID=e.__templateID,a.viewModelPosition=e.__type,s&&1===s.length?(n=N()("<div></div>").addClass("rl-view-model").addClass("RL-"+a.viewModelTemplateID).hide(),n.appendTo(s),a.viewModelDom=n,e.__dom=n,B.Popup===r&&(a.cancelCommand=a.closeCommand=o(function(){p(e)}),a.modalVisibility.subscribe(function(t){t?(a.viewModelDom.show(),a.storeAndSetKeyScope(),k.popupVisibilityNames.push(a.viewModelName),a.viewModelDom.css("z-index",3e3+i.i(k.popupVisibilityNames)().length+10),a.onShowTrigger&&a.onShowTrigger(!a.onShowTrigger()),i.i(O.delegateRun)(a,"onShowWithDelay",[],500)):(i.i(O.delegateRun)(a,"onHide"),i.i(O.delegateRun)(a,"onHideWithDelay",[],500),a.onHideTrigger&&a.onHideTrigger(!a.onHideTrigger()),a.restoreKeyScope(),h("view-model-on-hide",e),k.popupVisibilityNames.remove(a.viewModelName),a.viewModelDom.css("z-index",2e3),A.a.delay(function(){return a.viewModelDom.hide()},300))})),h("view-model-pre-build",e,n),I.a.applyBindingAccessorsToNode(n[0],{translatorInit:!0,template:function(){return{name:a.viewModelTemplateID}}},a),i.i(O.delegateRun)(a,"onBuild",[n]),a&&B.Popup===r&&a.registerPopupKeyDown(),h("view-model-post-build",e,n)):i.i(O.log)("Cannot find view model position: "+r)}return e?e.__vm:null}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=d(e);n&&(f(n),n.__vm&&n.__dom&&(i.i(O.delegateRun)(n.__vm,"onBeforeShow",t||[]),n.__vm.modalVisibility(!0),i.i(O.delegateRun)(n.__vm,"onShow",t||[]),h("view-model-on-show",n,t||[])))}function g(e){var t=d(e);t&&(f(t),t.__vm&&t.__dom&&i.i(O.delegateRun)(t.__vm,"onWarmUp"))}function b(e){var t=d(e);return!(!t||!t.__vm)&&t.__vm.modalVisibility()}function y(e,t){var n=null,o=!1,a=null;""===i.i(O.pString)(e)&&(e=U),""!==e&&(n=u(e),n||(n=u(U),n&&(t=e+"/"+t,e=U)),n&&n.__started&&(o=x&&n===x,n.__builded||(n.__builded=!0,i.i(O.isNonEmptyArray)(n.viewModels())&&A.a.each(n.viewModels(),function(e){f(e,n)}),i.i(O.delegateRun)(n,"onBuild")),A.a.defer(function(){x&&!o&&(i.i(O.delegateRun)(x,"onHide"),i.i(O.delegateRun)(x,"onHideWithDelay",[],500),x.onHideTrigger&&x.onHideTrigger(!x.onHideTrigger()),i.i(O.isNonEmptyArray)(x.viewModels())&&A.a.each(x.viewModels(),function(e){e.__vm&&e.__dom&&B.Popup!==e.__vm.viewModelPosition&&(e.__dom.hide(),e.__vm.viewModelVisibility(!1),i.i(O.delegateRun)(e.__vm,"onHide"),i.i(O.delegateRun)(e.__vm,"onHideWithDelay",[],500),e.__vm.onHideTrigger&&e.__vm.onHideTrigger(!e.__vm.onHideTrigger()))})),x=n,x&&!o&&(i.i(O.delegateRun)(x,"onShow"),x.onShowTrigger&&x.onShowTrigger(!x.onShowTrigger()),i.i(M.a)("screen-on-show",[x.screenName(),x]),i.i(O.isNonEmptyArray)(x.viewModels())&&A.a.each(x.viewModels(),function(e){e.__vm&&e.__dom&&B.Popup!==e.__vm.viewModelPosition&&(i.i(O.delegateRun)(e.__vm,"onBeforeShow"),e.__dom.show(),e.__vm.viewModelVisibility(!0),i.i(O.delegateRun)(e.__vm,"onShow"),e.__vm.onShowTrigger&&e.__vm.onShowTrigger(!e.__vm.onShowTrigger()),i.i(O.delegateRun)(e.__vm,"onShowWithDelay",[],200),h("view-model-on-show",e))})),a=n&&n.__cross?n.__cross():null,a&&a.parse(t)})))}function v(e){A.a.each(e,function(e){if(e){var t=new e,i=t?t.screenName():"";t&&""!==i&&(""===U&&(U=i),H[i]=t)}}),A.a.each(H,function(e){e&&!e.__started&&e.__start&&(e.__started=!0,e.__start(),i.i(M.a)("screen-pre-start",[e.screenName(),e]),i.i(O.delegateRun)(e,"onStart"),i.i(M.a)("screen-post-start",[e.screenName(),e]))});var t=D.a.create();t.addRoute(/^([a-zA-Z0-9\-]*)\/?(.*)$/,y),_.a.initialized.add(t.parse,t),_.a.changed.add(t.parse,t),_.a.init(),A.a.delay(function(){return k.$html.removeClass("rl-started-trigger").addClass("rl-started")},100),A.a.delay(function(){return k.$html.addClass("rl-started-delay")},200)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e="#"===e.substr(0,1)?e.substr(1):e,e="/"===e.substr(0,1)?e.substr(1):e;var n=i?"replaceHash":"setHash";t?(_.a.changed.active=!1,_.a[n](e),_.a.changed.active=!0):(_.a.changed.active=!0,_.a[n](e),_.a.setHash(e))}function w(e){var t=e.name,n=e.type,o=e.templateID;return function(e){e&&(t&&(i.i(O.isArray)(t)?e.__names=t:e.__names=[t],e.__name=e.__names[0]),n&&(e.__type=n),o&&(e.__templateID=o))}}function T(e){var t=e.name,i=e.templateID;return w({name:t,type:B.Popup,templateID:i})}function C(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t,n,o){if(!n||!n.match(/Command$/))throw new Error('name "'+n+'" should end with Command suffix');var a=o.value||o.initializer(),r=i.i(O.isFunc)(e)?e:function(){return!!e};return o.value=function(){if(r.call(this,this)){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];a.apply(this,t)}return!1},o.value.__realCanExecute=r,o.value.isCommand=!0,o}}var E=i(6),A=i.n(E),F=i(12),N=i.n(F),R=i(2),I=i.n(R),L=i(174),_=i.n(L),P=i(91),D=i.n(P),M=i(27),k=i(7),O=i(1);i.d(t,"ViewType",function(){return B}),t.hideLoading=n,t.createCommand=o,t.addSettingsViewModel=a,t.removeSettingsViewModel=r,t.disableSettingsViewModel=s,t.routeOff=l,t.routeOn=c,t.screen=u,t.getScreenPopup=d,t.hideScreenPopup=p,t.vmRunHook=h,t.buildViewModel=f,t.showScreenPopup=m,t.warmUpScreenPopup=g,t.isPopupVisible=b,t.screenOnRoute=y,t.startScreens=v,t.setHash=S,i.d(t,"commandDecorator",function(){return C}),i.d(t,"popup",function(){return T}),i.d(t,"viewDecorator",function(){return w}),i.d(t,"view",function(){return w}),i.d(t,"viewModel",function(){return w}),i.d(t,"popupDecorator",function(){return T}),i.d(t,"command",function(){return C});var x=null,U="",H={},B={Popup:"Popups",Left:"Left",Right:"Right",Center:"Center"}},function(e,t,i){"use strict";function n(e){return i.i(c.isUnd)(u[e])?null:u[e]}function o(e,t){u[e]=t}function a(e){return i.i(c.isUnd)(d[e])?null:d[e]}function r(e){var t=n("Capa");return i.i(c.isArray)(t)&&i.i(c.isNormal)(e)&&-1<i.i(c.inArray)(e,t)}var s=i(11),l=i.n(s),c=i(1);t.settingsGet=n,t.settingsSet=o,t.appSettingsGet=a,t.capa=r;var u=l.a.__rlah_data()||null;u=i.i(c.isNormal)(u)?u:{};var d=u.System||null;d=i.i(c.isNormal)(d)?d:{}},function(e,t){e.exports=window},function(e,t){e.exports=window.jQuery},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(1),l=i(3),c=i(7);i.d(t,"a",function(){return u});var u=function(){function e(){o()(this,e),this.bDisabeCloseOnEsc=!1,this.sDefaultKeyScope=l.KeyState.None,this.sCurrentKeyScope=l.KeyState.None,this.viewModelVisibility=r.a.observable(!1),this.modalVisibility=r.a.observable(!1).extend({rateLimit:0}),this.viewModelName="",this.viewModelNames=[],this.viewModelDom=null}return e.prototype.storeAndSetKeyScope=function(){this.sCurrentKeyScope=i.i(c.keyScope)(),i.i(c.keyScope)(this.sDefaultKeyScope)},e.prototype.restoreKeyScope=function(){i.i(c.keyScope)(this.sCurrentKeyScope)},e.prototype.registerPopupKeyDown=function(){var e=this;c.$win.on("keydown",function(t){if(t&&e.modalVisibility&&e.modalVisibility()){if(!e.bDisabeCloseOnEsc&&l.EventKeyCode.Esc===t.keyCode)return i.i(s.delegateRun)(e,"cancelCommand"),!1;if(l.EventKeyCode.Backspace===t.keyCode&&!i.i(s.inFocus)())return!1}return!0})},e.prototype.cancelCommand=function(){},e.prototype.closeCommand=function(){},e}()},function(e,t,i){"use strict";function n(){ne=j.settingsGet("AuthAccountHash")||"0"}function o(){return $}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return W+i.i(z.pString)(e)}function r(){return te?q:Y+ie}function s(){return X?Y+"/Mobile/":q}function l(e,t,n){return n=i.i(z.isUnd)(n)?ne:n,Y+"/Raw/"+$+"/"+n+"/"+e+"/"+$+"/"+t}function c(e,t){return l("Download",e,t)}function u(e,t){return l("View",e,t)}function d(e,t){return l("ViewThumbnail",e,t)}function p(e,t){return l("ViewAsPlain",e,t)}function h(e,t){return l("FramedView",e,t)}function f(e){return Y+"/"+e+"/"+$+"/"+ne+"/"}function m(){return f("Upload")}function g(){return f("UploadContacts")}function b(){return f("UploadBackground")}function y(){return f("Append")}function v(e){return f("Change"+(X?"Mobile":""))+i.i(z.encodeURIComponent)(e)+"/"}function S(e){return f("Ajax")+e}function w(e){return Y+"/Raw/"+$+"/"+ne+"/ViewAsPlain/"+$+"/"+e}function T(e){return Y+"/Raw/"+$+"/"+ne+"/Download/"+$+"/"+e}function C(e){return Y+"/Raw/0/Avatar/"+i.i(z.encodeURIComponent)(e)+"/"}function E(e){return Y+"/Raw/"+$+"/"+ne+"/UserBackground/"+$+"/"+e}function A(){return Y+"/Info"}function F(e,t){return Y+"/Lang/0/"+(t?"Admin":"App")+"/"+V.a.encodeURI(e)+"/"+J+"/"}function N(){return Y+"/Raw/"+$+"/"+ne+"/ContactsVcf/"}function R(){return Y+"/Raw/"+$+"/"+ne+"/ContactsCsv/"}function I(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Y+"SocialGoogle"+(""!==ne?"/"+$+"/"+ne+"/":"")+(e?"&xauth=1":"")}function L(){return Y+"SocialTwitter"+(""!==ne?"/"+$+"/"+ne+"/":"")}function _(){return Y+"SocialFacebook"+(""!==ne?"/"+$+"/"+ne+"/":"")}function P(e){return ee+e}function D(){return P("css/images/empty-contact.png")}function M(e){return P("sounds/"+e)}function k(){return P("css/images/icom-message-notification.png")}function O(){return P("js/min/openpgp.min.js")}function x(){return P("js/min/openpgp.worker.min.js")}function U(e){var t=Q;return"@custom"===e.substr(-7)&&(e=i.i(z.trim)(e.substring(0,e.length-7)),t=Z),t+"themes/"+V.a.encodeURI(e)+"/images/preview.png"}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"INBOX";return W+"mailbox/"+e}function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return W+"settings"+(e?"/"+e:"")}function G(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";t=i.i(z.isNormal)(t)?i.i(z.pInt)(t):1,n=i.i(z.pString)(n);var a=W+"mailbox/";if(""!==e){var r=i.i(z.pInt)(o);a+=V.a.encodeURI(e)+(0<r?"~"+r:"")}return 1<t&&(a=a.replace(/[\/]+$/,""),
a+="/p"+t),""!==n&&(a=a.replace(/[\/]+$/,""),a+="/"+V.a.encodeURI(n)),a}var K=i(11),V=i.n(K),z=i(1),j=i(10);t.F=n,t.l=o,t.z=a,t.E=r,t.G=s,t.d=c,t.e=u,t.f=d,t.h=p,t.g=h,t.x=m,t.w=g,t.C=b,t.y=y,t.m=v,t.k=S,t.i=w,t.j=T,t.b=C,t.A=E,t.J=A,t.a=F,t.u=N,t.v=R,t.o=I,t.p=L,t.n=_,t.t=D,t.c=M,t.s=k,t.I=O,t.H=x,t.B=U,t.D=H,t.q=B,t.r=G;var q="./",W="#/",Y="./?",$="&q[]=",J=j.appSettingsGet("version"),X=j.appSettingsGet("mobile"),Z=j.appSettingsGet("webPath")||"",Q=j.appSettingsGet("webVersionPath")||"rainloop/v/"+J+"/",ee=Q+"static/",te=!!j.appSettingsGet("adminHostUse"),ie=j.appSettingsGet("adminPath")||"admin",ne=j.settingsGet("AuthAccountHash")||"0"},function(e,t,i){e.exports={default:i(130),__esModule:!0}},function(e,t,i){"use strict";function n(){return i(177).default}t.a=n},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(12),r=i.n(a),s=i(2),l=i.n(s),c=i(1),u=i(8);i.d(t,"a",function(){return d}),i.d(t,"b",function(){return p});var d=function(){function e(){o()(this,e),this.disposable=[]}return e.prototype.dispose=function(){this.disposable.forEach(function(e){e&&e.dispose&&e.dispose()})},e}(),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{template:t?{element:t}:"<b></b>",viewModel:{createViewModel:function(t,n){return t=t||{},t.element=null,n&&n.element&&(t.component=n,t.element=r()(n.element),i.i(u.i18nToNodes)(t.element),!i.i(c.isUnd)(t.inline)&&l.a.unwrap(t.inline)&&t.element.css("display","inline-block")),new e(t)}}}}},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(1),p=i(20),h=i(23),f=i(14),m=i(199),g=i(10),b=i(28),y=i(40),v=i(16),S=i(115),w=function(e){function t(){o()(this,t);var i=r()(this,e.call(this));return i.oRequests={},i}return l()(t,e),t.prototype.folders=function(e){this.defaultRequest(e,"Folders",{SentFolder:g.settingsGet("SentFolder"),DraftFolder:g.settingsGet("DraftFolder"),SpamFolder:g.settingsGet("SpamFolder"),TrashFolder:g.settingsGet("TrashFolder"),ArchiveFolder:g.settingsGet("ArchiveFolder")},null,"",["Folders"])},t.prototype.login=function(e,t,i,n,o,a,r,s){this.defaultRequest(e,"Login",{Email:t,Login:i,Password:n,Language:a||"",AdditionalCode:r||"",AdditionalCodeSignMe:s?"1":"0",SignMe:o?"1":"0"})},t.prototype.getTwoFactor=function(e){this.defaultRequest(e,"GetTwoFactorInfo")},t.prototype.createTwoFactor=function(e){this.defaultRequest(e,"CreateTwoFactorSecret")},t.prototype.clearTwoFactor=function(e){this.defaultRequest(e,"ClearTwoFactorInfo")},t.prototype.showTwoFactorSecret=function(e){this.defaultRequest(e,"ShowTwoFactorSecret")},t.prototype.testTwoFactor=function(e,t){this.defaultRequest(e,"TestTwoFactorInfo",{Code:t})},t.prototype.enableTwoFactor=function(e,t){this.defaultRequest(e,"EnableTwoFactor",{Enable:t?"1":"0"})},t.prototype.clearTwoFactorInfo=function(e){this.defaultRequest(e,"ClearTwoFactorInfo")},t.prototype.contactsSync=function(e){this.defaultRequest(e,"ContactsSync",null,p.h)},t.prototype.saveContactsSyncData=function(e,t,i,n,o){this.defaultRequest(e,"SaveContactsSyncData",{Enable:t?"1":"0",Url:i,User:n,Password:o})},t.prototype.accountSetup=function(e,t,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this.defaultRequest(e,"AccountSetup",{Email:t,Password:i,New:n?"1":"0"})},t.prototype.accountDelete=function(e,t){this.defaultRequest(e,"AccountDelete",{EmailToDelete:t})},t.prototype.accountsAndIdentitiesSortOrder=function(e,t,i){this.defaultRequest(e,"AccountsAndIdentitiesSortOrder",{Accounts:t,Identities:i})},t.prototype.identityUpdate=function(e,t,i,n,o,a,r,s){this.defaultRequest(e,"IdentityUpdate",{Id:t,Email:i,Name:n,ReplyTo:o,Bcc:a,Signature:r,SignatureInsertBefore:s?"1":"0"})},t.prototype.identityDelete=function(e,t){this.defaultRequest(e,"IdentityDelete",{IdToDelete:t})},t.prototype.accountsAndIdentities=function(e){this.defaultRequest(e,"AccountsAndIdentities")},t.prototype.accountsCounts=function(e){this.defaultRequest(e,"AccountsCounts")},t.prototype.filtersSave=function(e,t,n,o){this.defaultRequest(e,"FiltersSave",{Raw:n,RawIsActive:i.i(d.boolToAjax)(o),Filters:u.a.map(t,function(e){return e.toJson()})})},t.prototype.filtersGet=function(e){this.defaultRequest(e,"Filters",{})},t.prototype.templates=function(e){this.defaultRequest(e,"Templates",{})},t.prototype.templateGetById=function(e,t){this.defaultRequest(e,"TemplateGetByID",{ID:t})},t.prototype.templateDelete=function(e,t){this.defaultRequest(e,"TemplateDelete",{IdToDelete:t})},t.prototype.templateSetup=function(e,t,i,n){this.defaultRequest(e,"TemplateSetup",{ID:t,Name:i,Body:n})},t.prototype.messageList=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",s=arguments.length>6&&void 0!==arguments[6]&&arguments[6];t=i.i(d.pString)(t);var l=i.i(h.c)(t),c=b.a.threadsAllowed()&&y.a.useThreads(),u=i.i(h.a)()===t?i.i(h.d)(t):"";return""===l||""!==a&&-1!==a.indexOf("is:")?this.defaultRequest(e,"MessageList",{Folder:t,Offset:n,Limit:o,Search:a,UidNext:u,UseThreads:c?"1":"0",ThreadUid:c?r:""},""===a?p.g:p.i,"",s?[]:["MessageList"]):this.defaultRequest(e,"MessageList",{},""===a?p.g:p.i,"MessageList/"+i.i(f.l)()+"/"+m.a([t,n,o,a,b.a.projectHash(),l,u,c?"1":"0",c?r:""].join(String.fromCharCode(0))),s?[]:["MessageList"])},t.prototype.messageUploadAttachments=function(e,t){this.defaultRequest(e,"MessageUploadAttachments",{Attachments:t},999e3)},t.prototype.message=function(e,t,n){return t=i.i(d.pString)(t),n=i.i(d.pInt)(n),!!(i.i(h.b)(t)&&0<n)&&(this.defaultRequest(e,"Message",{},null,"Message/"+i.i(f.l)()+"/"+m.a([t,n,b.a.projectHash(),b.a.threadsAllowed()&&y.a.useThreads()?"1":"0"].join(String.fromCharCode(0))),["Message"]),!0)},t.prototype.composeUploadExternals=function(e,t){this.defaultRequest(e,"ComposeUploadExternals",{Externals:t},999e3)},t.prototype.composeUploadDrive=function(e,t,i){this.defaultRequest(e,"ComposeUploadDrive",{AccessToken:i,Url:t},999e3)},t.prototype.folderInformation=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=!0,a=[];i.i(d.isArray)(n)&&0<n.length&&(o=!1,u.a.each(n,function(e){i.i(h.e)(e.folderFullNameRaw,e.uid)||a.push(e.uid),0<e.threads().length&&u.a.each(e.threads(),function(t){i.i(h.e)(e.folderFullNameRaw,t)||a.push(t)})}),0<a.length&&(o=!0)),o?this.defaultRequest(e,"FolderInformation",{Folder:t,FlagsUids:i.i(d.isArray)(a)?a.join(","):"",UidNext:i.i(h.a)()===t?i.i(h.d)(t):""}):y.a.useThreads()&&i.i(v.a)().reloadFlagsCurrentMessageListAndMessageFromCache()},t.prototype.folderInformationMultiply=function(e,t){this.defaultRequest(e,"FolderInformationMultiply",{Folders:t})},t.prototype.logout=function(e){this.defaultRequest(e,"Logout")},t.prototype.messageSetFlagged=function(e,t,i,n){this.defaultRequest(e,"MessageSetFlagged",{Folder:t,Uids:i.join(","),SetAction:n?"1":"0"})},t.prototype.messageSetSeen=function(e,t,i,n){this.defaultRequest(e,"MessageSetSeen",{Folder:t,Uids:i.join(","),SetAction:n?"1":"0"})},t.prototype.messageSetSeenToAll=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.defaultRequest(e,"MessageSetSeenToAll",{Folder:t,SetAction:i?"1":"0",ThreadUids:n?n.join(","):""})},t.prototype.saveMessage=function(e,t,i,n,o,a,r,s,l,c,u,d,h,f,m,g,b){this.defaultRequest(e,"SaveMessage",{IdentityID:t,MessageFolder:i,MessageUid:n,DraftFolder:o,To:a,Cc:r,Bcc:s,ReplyTo:l,Subject:c,TextIsHtml:u?"1":"0",Text:d,DraftInfo:f,InReplyTo:m,References:g,MarkAsImportant:b?"1":"0",Attachments:h},p.j)},t.prototype.sendReadReceiptMessage=function(e,t,i,n,o,a){this.defaultRequest(e,"SendReadReceiptMessage",{MessageFolder:t,MessageUid:i,ReadReceipt:n,Subject:o,Text:a})},t.prototype.sendMessage=function(e,t,i,n,o,a,r,s,l,c,u,d,h,f,m,g,b,y,v){this.defaultRequest(e,"SendMessage",{IdentityID:t,MessageFolder:i,MessageUid:n,SentFolder:o,To:a,Cc:r,Bcc:s,ReplyTo:l,Subject:c,TextIsHtml:u?"1":"0",Text:d,DraftInfo:f,InReplyTo:m,References:g,Dsn:b?"1":"0",ReadReceiptRequest:y?"1":"0",MarkAsImportant:v?"1":"0",Attachments:h},p.k)},t.prototype.saveSystemFolders=function(e,t){this.defaultRequest(e,"SystemFoldersUpdate",t)},t.prototype.saveSettings=function(e,t){this.defaultRequest(e,"SettingsUpdate",t)},t.prototype.saveSettingsHelper=function(e,t,i){var n=this;return function(o){var a;n.saveSettings(i||null,(a={},a[e]=t?t(o):o,a))}},t.prototype.changePassword=function(e,t,i){this.defaultRequest(e,"ChangePassword",{PrevPassword:t,NewPassword:i})},t.prototype.folderClear=function(e,t){this.defaultRequest(e,"FolderClear",{Folder:t})},t.prototype.folderSetSubscribe=function(e,t,i){this.defaultRequest(e,"FolderSubscribe",{Folder:t,Subscribe:i?"1":"0"})},t.prototype.folderSetCheckable=function(e,t,i){this.defaultRequest(e,"FolderCheckable",{Folder:t,Checkable:i?"1":"0"})},t.prototype.messagesMove=function(e,t,i,n,o,a){this.defaultRequest(e,"MessageMove",{FromFolder:t,ToFolder:i,Uids:n.join(","),MarkAsRead:a?"1":"0",Learning:o||""},null,"",["MessageList"])},t.prototype.messagesCopy=function(e,t,i,n){this.defaultRequest(e,"MessageCopy",{FromFolder:t,ToFolder:i,Uids:n.join(",")})},t.prototype.messagesDelete=function(e,t,i){this.defaultRequest(e,"MessageDelete",{Folder:t,Uids:i.join(",")},null,"",["MessageList"])},t.prototype.appDelayStart=function(e){this.defaultRequest(e,"AppDelayStart")},t.prototype.quota=function(e){this.defaultRequest(e,"Quota")},t.prototype.contacts=function(e,t,i,n){this.defaultRequest(e,"Contacts",{Offset:t,Limit:i,Search:n},null,"",["Contacts"])},t.prototype.contactSave=function(e,t,n,o){this.defaultRequest(e,"ContactSave",{RequestUid:t,Uid:i.i(d.trim)(n),Properties:o})},t.prototype.contactsDelete=function(e,t){this.defaultRequest(e,"ContactsDelete",{Uids:t.join(",")})},t.prototype.suggestions=function(e,t,i){this.defaultRequest(e,"Suggestions",{Query:t,Page:i},null,"",["Suggestions"])},t.prototype.clearUserBackground=function(e){this.defaultRequest(e,"ClearUserBackground")},t.prototype.facebookUser=function(e){this.defaultRequest(e,"SocialFacebookUserInformation")},t.prototype.facebookDisconnect=function(e){this.defaultRequest(e,"SocialFacebookDisconnect")},t.prototype.twitterUser=function(e){this.defaultRequest(e,"SocialTwitterUserInformation")},t.prototype.twitterDisconnect=function(e){this.defaultRequest(e,"SocialTwitterDisconnect")},t.prototype.googleUser=function(e){this.defaultRequest(e,"SocialGoogleUserInformation")},t.prototype.googleDisconnect=function(e){this.defaultRequest(e,"SocialGoogleDisconnect")},t.prototype.socialUsers=function(e){this.defaultRequest(e,"SocialUsers")},t}(S.a);t.a=new w},function(e,t){e.exports=window.key},function(e,t,i){"use strict";i.d(t,"a",function(){return n}),i.d(t,"b",function(){return o}),i.d(t,"m",function(){return a}),i.d(t,"g",function(){return r}),i.d(t,"i",function(){return s}),i.d(t,"k",function(){return l}),i.d(t,"j",function(){return c}),i.d(t,"h",function(){return u}),i.d(t,"c",function(){return d}),i.d(t,"d",function(){return p}),i.d(t,"o",function(){return h}),i.d(t,"q",function(){return f}),i.d(t,"p",function(){return m}),i.d(t,"l",function(){return g}),i.d(t,"f",function(){return b}),i.d(t,"e",function(){return y}),i.d(t,"n",function(){return v});var n=20,o=[10,20,30,50,100],a=50,r=3e4,s=3e5,l=3e5,c=2e5,u=2e5,d="__UNUSE__",p="rlcsc",h=143,f=25,m=4190,g=15,b=7,y=10,v="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAHHklEQVRoQ7VZW08bVxCeXRuwIbTGXIwNtBBaqjwgVUiR8lDlbza9qe1DpVZ9aNQ/0KpPeaJK07SpcuEeCEmUAObm21bfrL9lONjexSYrWfbunj37zXdmvpkz9oIgCKTD0Wg0xPd94TDP83Q0zvWa50vzklSrdanVanqf4/D84GBGr+F+Op3S8fqoJxLOdnZgTvsO/nYhenHA+UC7CWF1uXwkb9++ldPTUwVerVbVqFQqpR8YPjQ0JCMjI5LNDijoRgP3PQVu5+5Eor2XGLg7IV4GkIdHJ/LmzRs5ODiIwNbrdR0O0GCcq4Xz4eFhmZyclP7+tDQaIik/BG5XKQn4SwG3zJTLZXn9+rUclI8UHD5YVoDDN8bSzXhONwL48fFxGR4eilzFZT1uFRIB5yT8BqCdnR3Z3d0VP9Un6XRawYJpggVrZBv38ME4XKtUKnLt2jUplUoy1PR/l3U7T6sVSAQcgMAkj8PDQ9ne3pajoyMRL7zeKsYZWHgWYDGmv78/mmdwcFA+mJlSgziHDWrERrsjEXDXegTi1tZW+DLxI2bxIrqFNYTXyDyCFweMAHCwb8e4RnTNuOsqe3t7sra21pTD0Kct666E8XlcZyzw9/RUUXK5nK5oUinUQI6TQ3cynO/v78vq6qrKXCNwlTiJJpyNGc3nZHp6uqV2dwrQWOCtZBDAV1ZWwsQk7f0wiQn5kffbAu/0/KWBYzIC1+XukfGx0RGZmppKlC2tIV0Bh4aDcZW7HhkfH8urLLZL7T2pihvlkMNnz56FiadHxicL41IsFpN41bkxsYxbRdFo9jwB8KdPn14J8KnSpBQKhQs63nPmbCVRcBUAR2Lq1VVmpksyMTFxAXjcEsQybiegESionjx5osCZOeNe1O4+EhCAX7bQSgQcxRHTMgAgcz5+/Dis/hL4uHU3/B4YGNASGHIKxuEql0k+l05AeIAF1vPnz5VxFFmdDlaJrMtZITJeSsXCOTlMunKxjLtMYOKNjQ158eJFuAuKkUOb5sEwgff19SkJUBVkThZUbnXZrtCKBQ6gbnWIkjZpyne3ejAWoGnA7Icz6irvBLgbOMicCM6TkxPx/LAkbXfgWcsazuE2kFRsKD5Z+CiqDumKncpZvieWcS6dDVD8xiYCNflpJdwcdwJOf9airLmVQ7DPzMxIYWLsXGXoVqLt5k0M3K3JUVPDZdbWNzsCp48TPFdvdnZWUz32nDha7bJ63kgAJPzSdRks9/Kf9xMJAQ1gq2NpaUmy2Yz4zar4nQC3xb99AQwCcGzLAAwuhG8YiWvcOKts+r4GOe5nMhm5efOm9lUA3E3vSZJRrKvE0fnPv//Jy5cvo5cTHIPQbSjhOoqq69evS19f6lxDKK4+sVhigZPtKJqbrQeqxd5+WR4+fKgqgT0k2XX3nhiPgETWXFhYkFzuPZ2yVq1GTSOXpE47/VjgNnD4m4GG7/LhsTx69EiwD4Vr2MwIIxgbAH18fKx1yfz8vEogNvGtWnCuhLZa9UTAreVWFsHy/b/+Vrbdl7E5REMQD2jDoUbByty+/ZnU64GkU2HzyJLhktU1cLv8nARgkYS2d3ajAgwG8qU2oLmDZ92CMaOjo7K4uCiZgbDWaRWgnZhPxLhrMUCvr69riwKZk1LHF7XqrWAO9hJxH6ozNzcnCx/PqztZg9mf6SQMscCtm2C5ke4BGMlHWTUp36036AJajDVrFMzBrhhWslQsSrFYiOqVpMriNYIgqFRq2j3FAb/zffT6zuxFXxsNzs3NTXn16lW4gYiW96w1FyedF+83xG/2FNGCRpU4NjamMsn+OZ9xE5RXqdaDdPpib6RWCzuwKF9RxqI2AVNQBwQYJoK0wdBejnqtEikP3pfP51XjUTESl12FqJEKxsEorARYDD44ONTeID7YpsEnrRvQfWAI2e8WfDaTUSIwJ0iBCmFOtOUAHvVMPp/TPwvYFVYFIuP8l+DBgwdaa2Miqwa0GgYwfeMltovbDfh6c1vIgMYcliSsKv4IWFr6VDHxvldvBAH+1sA+cnl5WYOPmmr9ir+1l9I0Cgz0yjhXjfJJ0JROnmezWbl165ayr/5fqwcBNr7IfhjMqKcvESSM4eRcCasQ3bDNObmKPLdGUGpZsN24cUNLBm9zazu4d++e6qpNBFaTuUS26U5dpuR1CxyA7J9ddrMRqlz4pwLLYawymPd++/2PADt2ugcGwq9gCCdhQ96C6xWwa6j1ceuq+I0EhW0i8MAIVJfeL3d/DVD8EKi12P6/2S2jV/EccVB54O/ejz/9HGCpoBBMta5rXMXLu53D1XAwjhXwvvv+h4BAXVe4bOu3O3ChxF08LiZFG3fel199G9CH3fLyqv24NcB44MRhpdK788U3CpyKwsCw590xmfSpzsBt0Fqc3ud3vtZigxWcVZCklVpSiN0w3q5E/h9TGMIUuA3+EQAAAABJRU5ErkJggg=="},function(e,t){var i=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=i)},function(e,t,i){var n=i(139),o=i(58);e.exports=function(e){return n(o(e))}},function(e,t,i){"use strict";function n(e,t){e=i.i(L.trim)(e),t(G&&""!==e?_.b(e):"",e)}function o(e,t){return e+"#"+t}function a(e,t){B[o(e,t)]=!0}function r(e,t){return!0===B[o(e,t)]}function s(e,t){U[o(e,t)]=!0}function l(e,t){return!!U[o(e,t)]&&(U[o(e,t)]=null,!0)}function c(){U={}}function u(){return""===H?"INBOX":H}function d(e){return""!==e&&M[e]?M[e]:""}function p(e,t){M[e]=t,"INBOX"!==t&&""!==H||(H=t)}function h(e){return""!==e&&k[e]?k[e]:""}function f(e,t){""!==e&&(k[e]=t)}function m(e){return""!==e&&O[e]?O[e]:""}function g(e,t){O[e]=t}function b(e){return""!==e&&D[e]?D[e]:null}function y(e,t){D[e]=t}function v(e){y(e,null)}function S(e,t){return x[e]&&x[e][t]?x[e][t]:null}function w(e,t,i){x[e]||(x[e]={}),x[e][t]=i}function T(e){x[e]={}}function C(e){if(e){var t=e.uid,n=S(e.folderFullNameRaw,t);if(n&&0<n.length&&(e.flagged(!!n[1]),e.isSimpleMessage||(e.unseen(!!n[0]),e.answered(!!n[2]),e.forwarded(!!n[3]),e.isReadReceipt(!!n[4]),e.deletedMark(!!n[5]))),0<e.threads().length){var o=R.a.find(e.threads(),function(i){if(t!==i){var n=S(e.folderFullNameRaw,i);return n&&0<n.length&&!!n[0]}return!1}),a=R.a.find(e.threads(),function(i){if(t!==i){var n=S(e.folderFullNameRaw,i);return n&&0<n.length&&!!n[1]}return!1});e.hasUnseenSubMessage(o&&0<i.i(L.pInt)(o)),e.hasFlaggedSubMessage(a&&0<i.i(L.pInt)(a))}}}function E(e){e&&w(e.folderFullNameRaw,e.uid,[e.unseen(),e.flagged(),e.answered(),e.forwarded(),e.isReadReceipt(),e.deletedMark()])}function A(e,t,n){i.i(L.isArray)(n)&&0<n.length&&w(e,t,n)}function F(e,t,n){var o=0,a=S(e,t);if(i.i(L.isArray)(a)&&0<a.length){switch(a[0]&&(o=1),n){case I.MessageSetAction.SetSeen:a[0]=!1;break;case I.MessageSetAction.UnsetSeen:a[0]=!0;break;case I.MessageSetAction.SetFlag:a[1]=!0;break;case I.MessageSetAction.UnsetFlag:a[1]=!1}w(e,t,a)}return o}var N=i(6),R=i.n(N),I=i(3),L=i(1),_=i(14),P=i(10);t.s=n,t.l=a,t.r=r,t.i=s,t.n=l,t.p=c,t.a=u,t.t=d,t.g=p,t.c=h,t.h=f,t.d=m,t.j=g,t.b=b,t.f=y,t.u=v,t.e=S,t.q=w,t.m=T,t.k=C,t.o=E,t.v=A,t.w=F;var D={},M={},k={},O={},x={},U={},H="",B={},G=P.capa(I.Capa.Gravatar)},,function(e,t){var i=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=i)},function(e,t){var i={}.hasOwnProperty;e.exports=function(e,t){return i.call(e,t)}},function(e,t,i){"use strict";function n(e,t){i.i(h.isFunc)(t)&&(i.i(h.isArray)(g[e])||(g[e]=[]),g[e].push(t))}function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];i.i(h.isArray)(g[e])&&p.a.each(g[e],function(e){e.apply(void 0,t)})}function a(e){return m.settingsGet(e)}function r(e,t,i,n){f.data.__APP__&&f.data.__APP__.remote().defaultRequest(e,"Plugin"+t,i,n)}function s(e,t,i,n){b.push([e,t,i,n])}function l(e,t,i,n){y.push([e,t,i,n])}function c(e){var t=i(9);p.a.each(e?y:b,function(e){t.addSettingsViewModel(e[0],e[1],e[2],e[3])})}function u(e,t){var n=m.settingsGet("Plugins");return n=n&&!i.i(h.isUnd)(n[e])?n[e]:null,n?i.i(h.isUnd)(n[t])?null:n[t]:null}var d=i(6),p=i.n(d),h=i(1),f=i(7),m=i(10);t.d=n,t.a=o,t.e=a,t.g=r,t.b=s,t.c=l,t.h=c,t.f=u;var g={},b=[],y=[]},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(3),p=i(7),h=i(1),f=i(10),m=i(117),g=function(e){function t(){o()(this,t);var n=r()(this,e.call(this));n.currentAudio=u.a.observable(""),n.focusedState=u.a.observable(d.Focused.None);var a=f.appSettingsGet("mobile");return n.focusedState.subscribe(function(e){switch(e){case d.Focused.MessageList:i.i(p.keyScope)(d.KeyState.MessageList),a&&i.i(p.leftPanelDisabled)(!0);break;case d.Focused.MessageView:i.i(p.keyScope)(d.KeyState.MessageView),a&&i.i(p.leftPanelDisabled)(!0);break;case d.Focused.FolderList:i.i(p.keyScope)(d.KeyState.FolderList),a&&i.i(p.leftPanelDisabled)(!1)}}),n.projectHash=u.a.observable(""),n.threadsAllowed=u.a.observable(!1),n.composeInEdit=u.a.observable(!1),n.contactsAutosave=u.a.observable(!1),n.useLocalProxyForExternalImages=u.a.observable(!1),n.contactsIsAllowed=u.a.observable(!1),n.attachmentsActions=u.a.observableArray([]),n.devEmail="",n.devPassword="",n}return l()(t,e),t.prototype.populate=function(){e.prototype.populate.call(this),this.projectHash(f.settingsGet("ProjectHash")),this.contactsAutosave(!!f.settingsGet("ContactsAutosave")),this.useLocalProxyForExternalImages(!!f.settingsGet("UseLocalProxyForExternalImages")),this.contactsIsAllowed(!!f.settingsGet("ContactsIsAllowed"));var t=f.appSettingsGet("attachmentsActions");this.attachmentsActions(i.i(h.isNonEmptyArray)(t)?t:[]),this.devEmail=f.settingsGet("DevEmail"),this.devPassword=f.settingsGet("DevPassword")},t}(m.a);t.a=new g},function(e,t,i){"use strict";function n(e,t,o){i.i(s.isObject)(e)?(o=t||null,t=null,r.a.each(e,function(e,t){n(t,e,o)})):(i.i(s.isUnd)(c[e])&&(c[e]=[]),c[e].push([t,o]))}function o(e,t){l.a("rl-pub",[e,t]),i.i(s.isUnd)(c[e])||r.a.each(c[e],function(e){e[0]&&e[0].apply(e[1]||null,t||[])})}var a=i(6),r=i.n(a),s=i(1),l=i(27);t.b=n,t.a=o;var c={}},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(6),l=i.n(s),c=i(3),u=i(20),d=i(1),p=i(23),h=i(35),f=function(){function e(){o()(this,e),this.displaySpecSetting=r.a.observable(!0),this.sentFolder=r.a.observable(""),this.draftFolder=r.a.observable(""),this.spamFolder=r.a.observable(""),this.trashFolder=r.a.observable(""),this.archiveFolder=r.a.observable(""),this.namespace="",this.folderList=r.a.observableArray([]),this.folderList.optimized=r.a.observable(!1),this.folderList.error=r.a.observable(""),this.foldersLoading=r.a.observable(!1),this.foldersCreating=r.a.observable(!1),this.foldersDeleting=r.a.observable(!1),this.foldersRenaming=r.a.observable(!1),this.foldersInboxUnreadCount=r.a.observable(0),this.currentFolder=r.a.observable(null).extend({toggleSubscribeProperty:[this,"selected"]}),this.computers(),this.subscribers()}return e.prototype.computers=function(){var e=this;this.draftFolderNotEnabled=r.a.computed(function(){return""===e.draftFolder()||u.c===e.draftFolder()}),this.foldersListWithSingleInboxRootFolder=r.a.computed(function(){return!l.a.find(e.folderList(),function(e){return e&&!e.isSystemFolder()&&e.visible()})}),this.currentFolderFullNameRaw=r.a.computed(function(){return e.currentFolder()?e.currentFolder().fullNameRaw:""}),this.currentFolderFullName=r.a.computed(function(){return e.currentFolder()?e.currentFolder().fullName:""}),this.currentFolderFullNameHash=r.a.computed(function(){return e.currentFolder()?e.currentFolder().fullNameHash:""}),this.foldersChanging=r.a.computed(function(){var t=e.foldersLoading(),i=e.foldersCreating(),n=e.foldersDeleting(),o=e.foldersRenaming();return t||i||n||o}),this.folderListSystemNames=r.a.computed(function(){var t=[i.i(p.a)()],n=e.folderList(),o=e.sentFolder(),a=e.draftFolder(),r=e.spamFolder(),s=e.trashFolder(),l=e.archiveFolder();return i.i(d.isArray)(n)&&0<n.length&&(""!==o&&u.c!==o&&t.push(o),""!==a&&u.c!==a&&t.push(a),""!==r&&u.c!==r&&t.push(r),""!==s&&u.c!==s&&t.push(s),""!==l&&u.c!==l&&t.push(l)),t}),this.folderListSystem=r.a.computed(function(){return l.a.compact(l.a.map(e.folderListSystemNames(),function(e){return i.i(p.b)(e)}))}),this.folderMenuForMove=r.a.computed(function(){return i.i(d.folderListOptionsBuilder)(e.folderListSystem(),e.folderList(),[e.currentFolderFullNameRaw()],null,null,null,null,function(e){return e?e.localName():""})}),this.folderMenuForFilters=r.a.computed(function(){return i.i(d.folderListOptionsBuilder)(e.folderListSystem(),e.folderList(),["INBOX"],[["",""]],null,null,null,function(e){return e?e.localName():""})})},e.prototype.subscribers=function(){var e=function(e){return function(){var t=i.i(p.b)(e());t&&t.type(c.FolderType.User)}},t=function(e){return function(t){var n=i.i(p.b)(t);n&&n.type(e)}};this.sentFolder.subscribe(e(this.sentFolder),this,"beforeChange"),this.draftFolder.subscribe(e(this.draftFolder),this,"beforeChange"),this.spamFolder.subscribe(e(this.spamFolder),this,"beforeChange"),this.trashFolder.subscribe(e(this.trashFolder),this,"beforeChange"),this.archiveFolder.subscribe(e(this.archiveFolder),this,"beforeChange"),this.sentFolder.subscribe(t(c.FolderType.SentItems),this),this.draftFolder.subscribe(t(c.FolderType.Draft),this),this.spamFolder.subscribe(t(c.FolderType.Spam),this),this.trashFolder.subscribe(t(c.FolderType.Trash),this),this.archiveFolder.subscribe(t(c.FolderType.Archive),this)},e.prototype.getNextFolderNames=function(){var e=[],t=5,n=i.i(h.momentNowUnix)(),o=n-300,a=[],r=i.i(p.a)(),s=function e(t){l.a.each(t,function(t){t&&r!==t.fullNameRaw&&t.selectable&&t.existen&&o>t.interval&&(t.isSystemFolder()||t.subScribed()&&t.checkable())&&a.push([t.interval,t.fullNameRaw]),t&&0<t.subFolders().length&&e(t.subFolders())})};return s(this.folderList()),a.sort(function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),l.a.find(a,function(o){var a=i.i(p.b)(o[1]);return a&&(a.interval=n,e.push(o[1])),t<=e.length}),l.a.uniq(e)},e}();t.a=new f},function(e,t,i){e.exports=!i(43)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,i){var n=i(33),o=i(51);e.exports=i(31)?function(e,t,i){return n.f(e,t,o(1,i))}:function(e,t,i){return e[t]=i,e}},function(e,t,i){var n=i(41),o=i(85),a=i(69),r=Object.defineProperty;t.f=i(31)?Object.defineProperty:function(e,t,i){if(n(e),t=a(t,!0),n(i),o)try{return r(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},function(e,t,i){var n=i(67)("wks"),o=i(52),a=i(21).Symbol,r="function"==typeof a,s=e.exports=function(e){return n[e]||(n[e]=r&&a[e]||(r?a:o)("Symbol."+e))};s.store=n},function(e,t,i){"use strict";function n(){return w(),v||b()()}function o(){return T(),S||0}function a(e){return n().clone().subtract(e,"days").format("YYYY.MM.DD")}function r(e){var t=n();if(e&&t)switch(!0){case 4>=t.diff(e,"hours"):return e.fromNow();case t.format("L")===e.format("L"):return i.i(y.i18n)("MESSAGE_LIST/TODAY_AT",{TIME:e.format("LT")});case t.clone().subtract(1,"days").format("L")===e.format("L"):return i.i(y.i18n)("MESSAGE_LIST/YESTERDAY_AT",{TIME:e.format("LT")});case t.year()===e.year():return e.format("D MMM.")}return e?e.format("LL"):""}function s(e,t){var i=null,n="",a=o();if(e=0<e?e:0===e?a:0,e=a<e?a:e,i=0<e?b.a.unix(e):null,i&&1970===i.year()&&(i=null),i)switch(t){case"FROMNOW":n=i.fromNow();break;case"SHORT":n=r(i);break;case"FULL":n=i.format("LLL");break;default:n=i.format(t)}return n}function l(e){var t="",i=0,n=m()(e);i=n.data("moment-time"),i&&(t=n.data("moment-format"),t&&n.text(s(i,t)),t=n.data("moment-format-title"),t&&n.attr("title",s(i,t)))}function c(){h.a.defer(function(){m()(".moment",d.a.document).each(function(e,t){l(t)})})}var u=i(11),d=i.n(u),p=i(6),h=i.n(p),f=i(12),m=i.n(f),g=i(74),b=i.n(g),y=i(8);t.momentNow=n,t.momentNowUnix=o,t.searchSubtractFormatDateHelper=a,t.format=s,t.momentToNode=l,t.reload=c;var v=null,S=0,w=h.a.debounce(function(){v=b()()},500,!0),T=h.a.debounce(function(){S=b()().unix()},500,!0)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(1);i.d(t,"a",function(){return r});var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";o()(this,e),this.sModelName="",this.disposables=[],this.sModelName=t||""}return e.prototype.regDisposables=function(e){var t=this;i.i(a.isArray)(e)?e.forEach(function(e){t.disposables.push(e)}):e&&this.disposables.push(e)},e.prototype.onDestroy=function(){i.i(a.disposeObject)(this)},e}()},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(11),h=i.n(p),f=i(6),m=i.n(f),g=i(12),b=i.n(g),y=i(2),v=i.n(y),S=i(19),w=i.n(S),T=i(99),C=i.n(T),E=i(3),A=i(1),F=i(20),N=i(7),R=i(14),I=i(8),L=i(35),_=i(23),P=i(75),D=i(28),M=i(40),k=i(97),O=i(46),x=i(30),U=i(49),H=i(39),B=i(54),G=i(18),K=i(10),V=i(29),z=i(203),j=i(16),q=i(9),W=i(13);i.d(t,"ComposePopupView",function(){return oe}),i.d(t,"default",function(){return oe});var Y,$,J,X,Z,Q,ee,te,ie,ne,oe=(Y=i.i(q.popup)({name:"View/Popup/Compose",templateID:"PopupsCompose"}),$=i.i(q.command)(function(e){return e.canBeSentOrSaved()}),J=i.i(q.command)(function(e){return e.canBeSentOrSaved()}),X=i.i(q.command)(function(e){return e.isDraftFolderMessage()}),Z=i.i(q.command)(function(e){return e.canBeSentOrSaved()}),Q=i.i(q.command)(function(e){return e.allowContacts}),ee=i.i(q.command)(function(e){return e.dropboxEnabled()}),te=i.i(q.command)(function(e){return e.driveEnabled()}),Y((ne=function(e){function t(){s()(this,t);var n=c()(this,e.call(this)),o=function(e,t,n,o){if(t&&e&&t[n]()&&(!!o||e[n]())){var a=t[n](),r=i.i(A.trim)(e[n]()).split(/[,]/);r=m.a.filter(r,function(e){return e=i.i(A.trim)(e),e&&i.i(A.trim)(a)!==e}),o&&r.push(a),e[n](r.join(","))}};return n.oLastMessage=null,n.oEditor=null,n.aDraftInfo=null,n.sInReplyTo="",n.bFromDraft=!1,n.sReferences="",n.sLastFocusedField="to",n.resizerTrigger=m.a.bind(n.resizerTrigger,n),n.allowContacts=!!D.a.contactsIsAllowed(),n.allowFolders=!!K.capa(E.Capa.Folders),n.bSkipNextHide=!1,n.composeInEdit=D.a.composeInEdit,n.editorDefaultType=M.a.editorDefaultType,n.capaOpenPGP=U.a.capaOpenPGP,n.identitiesDropdownTrigger=v.a.observable(!1),n.to=v.a.observable(""),n.to.focused=v.a.observable(!1),n.cc=v.a.observable(""),n.cc.focused=v.a.observable(!1),n.bcc=v.a.observable(""),n.bcc.focused=v.a.observable(!1),n.replyTo=v.a.observable(""),n.replyTo.focused=v.a.observable(!1),v.a.computed(function(){switch(!0){case n.to.focused():n.sLastFocusedField="to";break;case n.cc.focused():n.sLastFocusedField="cc";break;case n.bcc.focused():n.sLastFocusedField="bcc"}}).extend({notify:"always"}),n.subject=v.a.observable(""),n.subject.focused=v.a.observable(!1),n.isHtml=v.a.observable(!1),n.requestDsn=v.a.observable(!1),n.requestReadReceipt=v.a.observable(!1),n.markAsImportant=v.a.observable(!1),n.sendError=v.a.observable(!1),n.sendSuccessButSaveError=v.a.observable(!1),n.savedError=v.a.observable(!1),n.sendButtonSuccess=v.a.computed(function(){return!n.sendError()&&!n.sendSuccessButSaveError()}),n.sendErrorDesc=v.a.observable(""),n.savedErrorDesc=v.a.observable(""),n.sendError.subscribe(function(e){e||n.sendErrorDesc("")}),n.savedError.subscribe(function(e){e||n.savedErrorDesc("")}),n.sendSuccessButSaveError.subscribe(function(e){e||n.savedErrorDesc("")}),n.savedTime=v.a.observable(0),n.savedTimeText=v.a.computed(function(){return 0<n.savedTime()?i.i(I.i18n)("COMPOSE/SAVED_TIME",{TIME:i.i(L.format)(n.savedTime()-1,"LT")}):""}),n.emptyToError=v.a.observable(!1),n.emptyToErrorTooltip=v.a.computed(function(){return n.emptyToError()?i.i(I.i18n)("COMPOSE/EMPTY_TO_ERROR_DESC"):""}),n.attachmentsInProcessError=v.a.observable(!1),n.attachmentsInErrorError=v.a.observable(!1),n.attachmentsErrorTooltip=v.a.computed(function(){var e="";switch(!0){case n.attachmentsInProcessError():e=i.i(I.i18n)("COMPOSE/ATTACHMENTS_UPLOAD_ERROR_DESC");break;case n.attachmentsInErrorError():e=i.i(I.i18n)("COMPOSE/ATTACHMENTS_ERROR_DESC")}return e}),n.showCc=v.a.observable(!1),n.showBcc=v.a.observable(!1),n.showReplyTo=v.a.observable(!1),n.cc.subscribe(function(e){!1===n.showCc()&&0<e.length&&n.showCc(!0)}),n.bcc.subscribe(function(e){!1===n.showBcc()&&0<e.length&&n.showBcc(!0)}),n.replyTo.subscribe(function(e){!1===n.showReplyTo()&&0<e.length&&n.showReplyTo(!0)}),n.draftFolder=v.a.observable(""),n.draftUid=v.a.observable(""),n.sending=v.a.observable(!1),n.saving=v.a.observable(!1),n.attachments=v.a.observableArray([]),n.attachmentsInProcess=n.attachments.filter(function(e){return e&&!e.complete()}),n.attachmentsInReady=n.attachments.filter(function(e){return e&&e.complete()}),n.attachmentsInError=n.attachments.filter(function(e){return e&&""!==e.error()}),n.attachmentsCount=v.a.computed(function(){return n.attachments().length}),n.attachmentsInErrorCount=v.a.computed(function(){return n.attachmentsInError().length}),n.attachmentsInProcessCount=v.a.computed(function(){return n.attachmentsInProcess().length}),n.isDraftFolderMessage=v.a.computed(function(){return""!==n.draftFolder()&&""!==n.draftUid()}),n.attachmentsPlace=v.a.observable(!1),n.attachments.subscribe(n.resizerTrigger),n.attachmentsPlace.subscribe(n.resizerTrigger),n.attachmentsInErrorCount.subscribe(function(e){0===e&&n.attachmentsInErrorError(!1)}),n.composeUploaderButton=v.a.observable(null),n.composeUploaderDropPlace=v.a.observable(null),n.dragAndDropEnabled=v.a.observable(!1),n.dragAndDropOver=v.a.observable(!1).extend({throttle:1}),n.dragAndDropVisible=v.a.observable(!1).extend({throttle:1}),n.attacheMultipleAllowed=v.a.observable(!1),n.addAttachmentEnabled=v.a.observable(!1),n.composeEditorArea=v.a.observable(null),n.identities=k.a.identities,n.identitiesOptions=v.a.computed(function(){return m.a.map(k.a.identities(),function(e){return{item:e,optValue:e.id(),optText:e.formattedName()}})}),n.currentIdentity=v.a.observable(n.identities()[0]?n.identities()[0]:null),n.currentIdentity.extend({toggleSubscribe:[n,function(e){o(n,e,"bcc"),o(n,e,"replyTo")},function(e){o(n,e,"bcc",!0),o(n,e,"replyTo",!0)}]}),n.currentIdentityView=v.a.computed(function(){var e=n.currentIdentity();return e?e.formattedName():"unknown"}),n.to.subscribe(function(e){n.emptyToError()&&0<e.length&&n.emptyToError(!1)}),n.attachmentsInProcess.subscribe(function(e){n.attachmentsInProcessError()&&i.i(A.isArray)(e)&&0===e.length&&n.attachmentsInProcessError(!1)}),n.resizer=v.a.observable(!1).extend({throttle:50}),n.resizer.subscribe(function(){n.oEditor&&n.oEditor.resize()}),
n.canBeSentOrSaved=v.a.computed(function(){return!n.sending()&&!n.saving()}),n.sendMessageResponse=m.a.bind(n.sendMessageResponse,n),n.saveMessageResponse=m.a.bind(n.saveMessageResponse,n),V.b("interval.2m",function(){!n.modalVisibility()||x.a.draftFolderNotEnabled()||n.isEmptyForm(!1)||n.saving()||n.sending()||n.savedError()||n.saveCommand()}),n.showCc.subscribe(n.resizerTrigger),n.showBcc.subscribe(n.resizerTrigger),n.showReplyTo.subscribe(n.resizerTrigger),n.dropboxEnabled=B.a.dropbox.enabled,n.dropboxApiKey=B.a.dropbox.apiKey,n.driveEnabled=v.a.observable(N.bXMLHttpRequestSupported&&!!K.settingsGet("AllowGoogleSocial")&&!!K.settingsGet("AllowGoogleSocialDrive")&&!!K.settingsGet("GoogleClientID")&&!!K.settingsGet("GoogleApiKey")),n.driveVisible=v.a.observable(!1),n.driveCallback=m.a.bind(n.driveCallback,n),n.onMessageUploadAttachments=m.a.bind(n.onMessageUploadAttachments,n),n.bDisabeCloseOnEsc=!0,n.sDefaultKeyScope=E.KeyState.Compose,n.tryToClosePopup=m.a.debounce(m.a.bind(n.tryToClosePopup,n),E.Magics.Time200ms),n.emailsSource=m.a.bind(n.emailsSource,n),n.autosaveFunction=m.a.bind(n.autosaveFunction,n),n.iTimer=0,n}return d()(t,e),t.prototype.sendCommand=function(){var e=i.i(A.trim)(this.to()),t=i.i(A.trim)(this.cc()),n=i.i(A.trim)(this.bcc()),o=x.a.sentFolder();if(this.attachmentsInProcessError(!1),this.attachmentsInErrorError(!1),this.emptyToError(!1),0<this.attachmentsInProcess().length?(this.attachmentsInProcessError(!0),this.attachmentsPlace(!0)):0<this.attachmentsInError().length&&(this.attachmentsInErrorError(!0),this.attachmentsPlace(!0)),""===e&&""===t&&""===n&&this.emptyToError(!0),!this.emptyToError()&&!this.attachmentsInErrorError()&&!this.attachmentsInProcessError())if(M.a.replySameFolder()&&i.i(A.isArray)(this.aDraftInfo)&&3===this.aDraftInfo.length&&i.i(A.isNormal)(this.aDraftInfo[2])&&0<this.aDraftInfo[2].length&&(o=this.aDraftInfo[2]),this.allowFolders||(o=F.c),""===o)i.i(q.showScreenPopup)(i(98),[E.SetSystemFoldersNotification.Sent]);else{if(this.sendError(!1),this.sending(!0),i.i(A.isArray)(this.aDraftInfo)&&3===this.aDraftInfo.length){var a=i.i(_.e)(this.aDraftInfo[2],this.aDraftInfo[1]);a&&("forward"===this.aDraftInfo[0]?a[3]=!0:a[2]=!0,i.i(_.q)(this.aDraftInfo[2],this.aDraftInfo[1],a),i.i(j.a)().reloadFlagsCurrentMessageListAndMessageFromCache(),i.i(_.h)(this.aDraftInfo[2],""))}o=F.c===o?"":o,i.i(_.h)(this.draftFolder(),""),i.i(_.h)(o,""),G.a.sendMessage(this.sendMessageResponse,this.currentIdentity()?this.currentIdentity().id():"",this.draftFolder(),this.draftUid(),o,e,this.cc(),this.bcc(),this.replyTo(),this.subject(),!!this.oEditor&&this.oEditor.isHtml(),this.oEditor?this.oEditor.getData(!0):"",this.prepearAttachmentsForSendOrSave(),this.aDraftInfo,this.sInReplyTo,this.sReferences,this.requestDsn(),this.requestReadReceipt(),this.markAsImportant())}},t.prototype.saveCommand=function(){return!!this.allowFolders&&(x.a.draftFolderNotEnabled()?i.i(q.showScreenPopup)(i(98),[E.SetSystemFoldersNotification.Draft]):(this.savedError(!1),this.saving(!0),this.autosaveStart(),i.i(_.h)(x.a.draftFolder(),""),G.a.saveMessage(this.saveMessageResponse,this.currentIdentity()?this.currentIdentity().id():"",this.draftFolder(),this.draftUid(),x.a.draftFolder(),this.to(),this.cc(),this.bcc(),this.replyTo(),this.subject(),!!this.oEditor&&this.oEditor.isHtml(),this.oEditor?this.oEditor.getData(!0):"",this.prepearAttachmentsForSendOrSave(),this.aDraftInfo,this.sInReplyTo,this.sReferences,this.markAsImportant())),!0)},t.prototype.deleteCommand=function(){var e=this,n=i(73);!i.i(q.isPopupVisible)(n)&&this.modalVisibility()&&i.i(q.showScreenPopup)(n,[i.i(I.i18n)("POPUPS_ASK/DESC_WANT_DELETE_MESSAGES"),function(){e.modalVisibility()&&(i.i(j.a)().deleteMessagesFromFolderWithoutCheck(e.draftFolder(),[e.draftUid()]),i.i(q.hideScreenPopup)(t))}])},t.prototype.skipCommand=function(){this.bSkipNextHide=!0,!this.modalVisibility()||this.saving()||this.sending()||x.a.draftFolderNotEnabled()||this.saveCommand(),this.tryToClosePopup()},t.prototype.contactsCommand=function(){var e=this;this.allowContacts&&(this.skipCommand(),m.a.delay(function(){i.i(q.showScreenPopup)(i(123),[!0,e.sLastFocusedField])},E.Magics.Time200ms))},t.prototype.dropboxCommand=function(){var e=this;return h.a.Dropbox&&h.a.Dropbox.choose({success:function(t){t&&t[0]&&t[0].link&&e.addDropboxAttachment(t[0])},linkType:"direct",multiselect:!1}),!0},t.prototype.driveCommand=function(){return this.driveOpenPopup(),!0},t.prototype.autosaveFunction=function(){!this.modalVisibility()||x.a.draftFolderNotEnabled()||this.isEmptyForm(!1)||this.saving()||this.sending()||this.savedError()||this.saveCommand(),this.autosaveStart()},t.prototype.autosaveStart=function(){h.a.clearTimeout(this.iTimer),this.iTimer=h.a.setTimeout(this.autosaveFunction,E.Magics.Time1m)},t.prototype.autosaveStop=function(){h.a.clearTimeout(this.iTimer)},t.prototype.emailsSource=function(e,t){i.i(j.a)().getAutocomplete(e.term,function(e){t(m.a.map(e,function(e){return e.toLine(!1)}))})},t.prototype.openOpenPgpPopup=function(){var e=this;U.a.capaOpenPGP()&&this.oEditor&&!this.oEditor.isHtml()&&i.i(q.showScreenPopup)(i(247),[function(t){e.editor(function(e){e.setPlain(t)})},this.oEditor.getData(!1),this.currentIdentity(),this.to(),this.cc(),this.bcc()])},t.prototype.reloadDraftFolder=function(){var e=x.a.draftFolder();""!==e&&F.c!==e&&(i.i(_.h)(e,""),x.a.currentFolderFullNameRaw()===e?i.i(j.a)().reloadMessageList(!0):i.i(j.a)().folderInformation(e))},t.prototype.findIdentityByMessage=function(e,t){var i=1e3,n=null,o=k.a.identities(),a={},r=function(e){e&&e.email&&a[e.email]&&(!n||i>a[e.email][1])&&(n=a[e.email][0],i=a[e.email][1])};if(m.a.each(o,function(e,t){a[e.email()]=[e,t]}),t)switch(e){case E.ComposeType.Empty:break;case E.ComposeType.Reply:case E.ComposeType.ReplyAll:case E.ComposeType.Forward:case E.ComposeType.ForwardAsAttachment:m.a.each(m.a.union(t.to,t.cc,t.bcc),r),n||m.a.each(t.deliveredTo,r);break;case E.ComposeType.Draft:m.a.each(m.a.union(t.from,t.replyTo),r)}return n||o[0]||null},t.prototype.selectIdentity=function(e){e&&e.item&&(this.currentIdentity(e.item),this.setSignatureFromIdentity(e.item))},t.prototype.sendMessageResponse=function(e,t){var n=!1,o="";this.sending(!1),E.StorageResultType.Success===e&&t&&t.Result&&(n=!0,this.modalVisibility()&&i.i(A.delegateRun)(this,"closeCommand")),this.modalVisibility()&&!n&&(t&&E.Notification.CantSaveMessage===t.ErrorCode?(this.sendSuccessButSaveError(!0),this.savedErrorDesc(i.i(A.trim)(i.i(I.i18n)("COMPOSE/SAVED_ERROR_ON_SEND")))):(o=i.i(I.getNotification)(t&&t.ErrorCode?t.ErrorCode:E.Notification.CantSendMessage,t&&t.ErrorMessage?t.ErrorMessage:""),this.sendError(!0),this.sendErrorDesc(o||i.i(I.getNotification)(E.Notification.CantSendMessage)))),this.reloadDraftFolder()},t.prototype.saveMessageResponse=function(e,t){var n=!1;if(this.saving(!1),E.StorageResultType.Success===e&&t&&t.Result&&t.Result.NewFolder&&t.Result.NewUid){if(n=!0,this.bFromDraft){var o=H.a.message();o&&this.draftFolder()===o.folderFullNameRaw&&this.draftUid()===o.uid&&H.a.message(null)}this.draftFolder(t.Result.NewFolder),this.draftUid(t.Result.NewUid),this.savedTime(h.a.Math.round((new h.a.Date).getTime()/1e3)),this.bFromDraft&&i.i(_.h)(this.draftFolder(),"")}n||(this.savedError(!0),this.savedErrorDesc(i.i(I.getNotification)(E.Notification.CantSaveMessage))),this.reloadDraftFolder()},t.prototype.onHide=function(){this.autosaveStop(),this.bSkipNextHide||(D.a.composeInEdit(!1),this.reset()),this.bSkipNextHide=!1,this.to.focused(!1),i.i(q.routeOn)()},t.prototype.editor=function(e){var t=this;e&&(!this.oEditor&&this.composeEditorArea()?this.oEditor=new P.HtmlEditor(this.composeEditorArea(),null,function(){e(t.oEditor),t.resizerTrigger()},function(e){t.isHtml(!!e)}):this.oEditor&&(e(this.oEditor),this.resizerTrigger()))},t.prototype.converSignature=function(e){var t=10,n="",o=[],a=/{{MOMENT:([^}]+)}}/g;if(e=e.replace(/[\r]/g,""),n=this.oLastMessage?this.emailArrayToStringLineHelper(this.oLastMessage.from,!0):"",""!==n&&(e=e.replace(/{{FROM-FULL}}/g,n),-1===n.indexOf(" ")&&0<n.indexOf("@")&&(n=n.replace(/@[\S]+/,"")),e=e.replace(/{{FROM}}/g,n)),e=e.replace(/[\s]{1,2}{{FROM}}/g,"{{FROM}}"),e=e.replace(/[\s]{1,2}{{FROM-FULL}}/g,"{{FROM-FULL}}"),e=e.replace(/{{FROM}}/g,""),e=e.replace(/{{FROM-FULL}}/g,""),-1<e.indexOf("{{DATE}}")&&(e=e.replace(/{{DATE}}/g,i.i(L.format)(0,"llll"))),-1<e.indexOf("{{TIME}}")&&(e=e.replace(/{{TIME}}/g,i.i(L.format)(0,"LT"))),-1<e.indexOf("{{MOMENT:"))try{for(var r=null;null!==(r=a.exec(e))&&(r&&r[0]&&r[1]&&o.push([r[0],r[1]]),t-=1,0!==t););o&&0<o.length&&m.a.each(o,function(t){e=e.replace(t[0],i.i(L.format)(0,t[1]))}),e=e.replace(/{{MOMENT:[^}]+}}/g,"")}catch(e){}return e},t.prototype.setSignatureFromIdentity=function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e&&this.editor(function(n){var o=!1,a=e.signature();""!==a&&":HTML:"===a.substr(0,6)&&(o=!0,a=a.substr(6)),n.setSignature(t.converSignature(a),o,!!e.signatureInsertBefore(),i)})},t.prototype.onShow=function(e,t,n,o,a,r,s){var l=this;i.i(q.routeOff)(),this.autosaveStart(),D.a.composeInEdit()?(e=e||E.ComposeType.Empty,E.ComposeType.Empty!==e?i.i(q.showScreenPopup)(i(73),[i.i(I.i18n)("COMPOSE/DISCARD_UNSAVED_DATA"),function(){l.initOnShow(e,t,n,o,a,r,s)},null,null,null,!1]):(this.addEmailsTo(this.to,n),this.addEmailsTo(this.cc,o),this.addEmailsTo(this.bcc,a),i.i(A.isNormal)(r)&&""!==r&&""===this.subject()&&this.subject(r))):this.initOnShow(e,t,n,o,a,r,s)},t.prototype.onWarmUp=function(){this.modalVisibility&&!this.modalVisibility()&&this.editor(function(e){return e.modeToggle(!1)})},t.prototype.addEmailsTo=function(e,t){if(i.i(A.isNonEmptyArray)(t)){var n=i.i(A.trim)(e()),o=m.a.uniq(m.a.compact(m.a.map(t,function(e){return e?e.toLine(!1):null})));e(n+(""===n?"":", ")+i.i(A.trim)(o.join(", ")))}},t.prototype.emailArrayToStringLineHelper=function(e,t){return t=!!t,m.a.map(e,function(e){return e.toLine(t)}).join(", ")},t.prototype.initOnShow=function(e,t,n,o,a,r,s){var l=this;D.a.composeInEdit(!0);var c="",u="",d="",p="",h="",f="",g="",y=null,v=null,S=null,w={},T=O.a.email(),C=e||E.ComposeType.Empty;if(t=t||null,t&&i.i(A.isNormal)(t)&&(S=i.i(A.isArray)(t)&&1===t.length?t[0]:i.i(A.isArray)(t)?null:t),this.oLastMessage=S,null!==T&&(w[T]=!0),this.reset(),y=this.findIdentityByMessage(C,S),y&&(w[y.email()]=!0),i.i(A.isNonEmptyArray)(n)&&this.to(this.emailArrayToStringLineHelper(n)),i.i(A.isNonEmptyArray)(o)&&this.cc(this.emailArrayToStringLineHelper(o)),i.i(A.isNonEmptyArray)(a)&&this.bcc(this.emailArrayToStringLineHelper(a)),""!==C&&S){p=i.i(L.format)(S.dateTimeStampInUTC(),"FULL"),h=S.subject(),v=S.aDraftInfo;var F=b()(S.body).clone();F&&(i.i(A.clearBqSwitcher)(F),f=F.html());var N=null;switch(C){case E.ComposeType.Empty:break;case E.ComposeType.Reply:this.to(this.emailArrayToStringLineHelper(S.replyEmails(w))),this.subject(i.i(A.replySubjectAdd)("Re",h)),this.prepearMessageAttachments(S,C),this.aDraftInfo=["reply",S.uid,S.folderFullNameRaw],this.sInReplyTo=S.sMessageId,this.sReferences=i.i(A.trim)(this.sInReplyTo+" "+S.sReferences);break;case E.ComposeType.ReplyAll:N=S.replyAllEmails(w),this.to(this.emailArrayToStringLineHelper(N[0])),this.cc(this.emailArrayToStringLineHelper(N[1])),this.subject(i.i(A.replySubjectAdd)("Re",h)),this.prepearMessageAttachments(S,C),this.aDraftInfo=["reply",S.uid,S.folderFullNameRaw],this.sInReplyTo=S.sMessageId,this.sReferences=i.i(A.trim)(this.sInReplyTo+" "+S.references());break;case E.ComposeType.Forward:this.subject(i.i(A.replySubjectAdd)("Fwd",h)),this.prepearMessageAttachments(S,C),this.aDraftInfo=["forward",S.uid,S.folderFullNameRaw],this.sInReplyTo=S.sMessageId,this.sReferences=i.i(A.trim)(this.sInReplyTo+" "+S.sReferences);break;case E.ComposeType.ForwardAsAttachment:this.subject(i.i(A.replySubjectAdd)("Fwd",h)),this.prepearMessageAttachments(S,C),this.aDraftInfo=["forward",S.uid,S.folderFullNameRaw],this.sInReplyTo=S.sMessageId,this.sReferences=i.i(A.trim)(this.sInReplyTo+" "+S.sReferences);break;case E.ComposeType.Draft:this.to(this.emailArrayToStringLineHelper(S.to)),this.cc(this.emailArrayToStringLineHelper(S.cc)),this.bcc(this.emailArrayToStringLineHelper(S.bcc)),this.replyTo(this.emailArrayToStringLineHelper(S.replyTo)),this.bFromDraft=!0,this.draftFolder(S.folderFullNameRaw),this.draftUid(S.uid),this.subject(h),this.prepearMessageAttachments(S,C),this.aDraftInfo=i.i(A.isNonEmptyArray)(v)&&3===v.length?v:null,this.sInReplyTo=S.sInReplyTo,this.sReferences=S.sReferences;break;case E.ComposeType.EditAsNew:this.to(this.emailArrayToStringLineHelper(S.to)),this.cc(this.emailArrayToStringLineHelper(S.cc)),this.bcc(this.emailArrayToStringLineHelper(S.bcc)),this.replyTo(this.emailArrayToStringLineHelper(S.replyTo)),this.subject(h),this.prepearMessageAttachments(S,C),this.aDraftInfo=i.i(A.isNonEmptyArray)(v)&&3===v.length?v:null,this.sInReplyTo=S.sInReplyTo,this.sReferences=S.sReferences}switch(C){case E.ComposeType.Reply:case E.ComposeType.ReplyAll:c=S.fromToLine(!1,!0),g=i.i(I.i18n)("COMPOSE/REPLY_MESSAGE_TITLE",{DATETIME:p,EMAIL:c}),f="<br /><br />"+g+":<br /><br /><blockquote>"+i.i(A.trim)(f)+"</blockquote>";break;case E.ComposeType.Forward:c=S.fromToLine(!1,!0),u=S.toToLine(!1,!0),d=S.ccToLine(!1,!0),f="<br /><br />"+i.i(I.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_TITLE")+"<br />"+i.i(I.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_FROM")+": "+c+"<br />"+i.i(I.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_TO")+": "+u+(0<d.length?"<br />"+i.i(I.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_CC")+": "+d:"")+"<br />"+i.i(I.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_SENT")+": "+i.i(A.encodeHtml)(p)+"<br />"+i.i(I.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_SUBJECT")+": "+i.i(A.encodeHtml)(h)+"<br /><br />"+i.i(A.trim)(f)+"<br /><br />";break;case E.ComposeType.ForwardAsAttachment:f=""}this.editor(function(e){e.setHtml(f,!1),(E.EditorDefaultType.PlainForced===l.editorDefaultType()||!S.isHtml()&&E.EditorDefaultType.HtmlForced!==l.editorDefaultType())&&e.modeToggle(!1),y&&E.ComposeType.Draft!==C&&E.ComposeType.EditAsNew!==C&&l.setSignatureFromIdentity(y,!0),l.setFocusInPopup()})}else E.ComposeType.Empty===C?(this.subject(i.i(A.isNormal)(r)?""+r:""),f=i.i(A.isNormal)(s)?""+s:"",this.editor(function(e){e.setHtml(f,!1),E.EditorDefaultType.Html!==l.editorDefaultType()&&E.EditorDefaultType.HtmlForced!==l.editorDefaultType()&&e.modeToggle(!1),y&&l.setSignatureFromIdentity(y,!0),l.setFocusInPopup()})):i.i(A.isNonEmptyArray)(t)?(m.a.each(t,function(e){l.addMessageAsAttachment(e)}),this.editor(function(e){e.setHtml("",!1),E.EditorDefaultType.Html!==l.editorDefaultType()&&E.EditorDefaultType.HtmlForced!==l.editorDefaultType()&&e.modeToggle(!1),y&&E.ComposeType.Draft!==C&&E.ComposeType.EditAsNew!==C&&l.setSignatureFromIdentity(y,!0),l.setFocusInPopup()})):this.setFocusInPopup();var R=this.getAttachmentsDownloadsForUpload();i.i(A.isNonEmptyArray)(R)&&G.a.messageUploadAttachments(this.onMessageUploadAttachments,R),y&&this.currentIdentity(y),this.resizerTrigger()},t.prototype.onMessageUploadAttachments=function(e,t){var i=this;E.StorageResultType.Success===e&&t&&t.Result?this.viewModelVisibility()||m.a.each(t.Result,function(e,t){var n=i.getAttachmentById(e);n&&(n.tempName(t),n.waiting(!1).uploading(!1).complete(!0))}):this.setMessageAttachmentFailedDownloadText()},t.prototype.setFocusInPopup=function(){var e=this;N.bMobileDevice||m.a.delay(function(){""===e.to()?e.to.focused(!0):e.oEditor&&(e.to.focused()||e.oEditor.focus())},E.Magics.Time100ms)},t.prototype.onShowWithDelay=function(){this.resizerTrigger()},t.prototype.tryToClosePopup=function(){var e=this,t=i(73);!i.i(q.isPopupVisible)(t)&&this.modalVisibility()&&(this.bSkipNextHide||this.isEmptyForm()&&!this.draftUid()?i.i(A.delegateRun)(this,"closeCommand"):i.i(q.showScreenPopup)(t,[i.i(I.i18n)("POPUPS_ASK/DESC_WANT_CLOSE_THIS_WINDOW"),function(){e.modalVisibility()&&i.i(A.delegateRun)(e,"closeCommand")}]))},t.prototype.onBuild=function(){var e=this;this.initUploader(),w()("ctrl+q, command+q, ctrl+w, command+w",E.KeyState.Compose,A.noopFalse),w()("`",E.KeyState.Compose,function(){return!(e.oEditor&&!e.oEditor.hasFocus()&&!i.i(A.inFocus)())||(e.identitiesDropdownTrigger(!0),!1)}),w()("ctrl+`",E.KeyState.Compose,function(){return e.identitiesDropdownTrigger(!0),!1}),w()("esc, ctrl+down, command+down",E.KeyState.Compose,function(){return e.skipCommand(),!1}),this.allowFolders&&w()("ctrl+s, command+s",E.KeyState.Compose,function(){return e.saveCommand(),!1}),K.appSettingsGet("allowCtrlEnterOnCompose")&&w()("ctrl+enter, command+enter",E.KeyState.Compose,function(){return e.sendCommand(),!1}),w()("shift+esc",E.KeyState.Compose,function(){return e.modalVisibility()&&e.tryToClosePopup(),!1}),V.b("window.resize.real",this.resizerTrigger),V.b("window.resize.real",m.a.debounce(this.resizerTrigger,E.Magics.Time50ms)),B.a.appendDropbox(),this.driveEnabled()&&b.a.getScript("https://apis.google.com/js/api.js",function(){h.a.gapi&&e.driveVisible(!0)}),h.a.setInterval(function(){e.modalVisibility()&&e.oEditor&&e.oEditor.resize()},E.Magics.Time5s)},t.prototype.driveCallback=function(e,t){var i=this;if(t&&h.a.XMLHttpRequest&&h.a.google&&t[h.a.google.picker.Response.ACTION]===h.a.google.picker.Action.PICKED&&t[h.a.google.picker.Response.DOCUMENTS]&&t[h.a.google.picker.Response.DOCUMENTS][0]&&t[h.a.google.picker.Response.DOCUMENTS][0].id){var n=new h.a.XMLHttpRequest;n.open("GET","https://www.googleapis.com/drive/v2/files/"+t[h.a.google.picker.Response.DOCUMENTS][0].id),n.setRequestHeader("Authorization","Bearer "+e),n.addEventListener("load",function(){if(n&&n.responseText){var t=h.a.JSON.parse(n.responseText),o=function(e,i,n){e&&e.exportLinks&&(e.exportLinks[i]?(t.downloadUrl=e.exportLinks[i],t.title=e.title+"."+n,t.mimeType=i):e.exportLinks["application/pdf"]&&(t.downloadUrl=e.exportLinks["application/pdf"],t.title=e.title+".pdf",t.mimeType="application/pdf"))};if(t&&!t.downloadUrl&&t.mimeType&&t.exportLinks)switch(t.mimeType.toString().toLowerCase()){case"application/vnd.google-apps.document":o(t,"application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx");break;case"application/vnd.google-apps.spreadsheet":o(t,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx");break;case"application/vnd.google-apps.drawing":o(t,"image/png","png");break;case"application/vnd.google-apps.presentation":o(t,"application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx");break;default:o(t,"application/pdf","pdf")}t&&t.downloadUrl&&i.addDriveAttachment(t,e)}}),n.send()}},t.prototype.driveCreatePiker=function(e){var t=this;h.a.gapi&&e&&e.access_token&&h.a.gapi.load("picker",{callback:function(){if(h.a.google&&h.a.google.picker){var i=(new h.a.google.picker.PickerBuilder).addView(h.a.google.picker.ViewId.DOCS).setAppId(K.settingsGet("GoogleClientID")).setOAuthToken(e.access_token).setCallback(m.a.bind(t.driveCallback,t,e.access_token)).enableFeature(h.a.google.picker.Feature.NAV_HIDDEN).build();i.setVisible(!0)}}})},t.prototype.driveOpenPopup=function(){var e=this;h.a.gapi&&h.a.gapi.load("auth",{callback:function(){var t=h.a.gapi.auth.getToken(),i=function(t){if(t&&!t.error){var i=h.a.gapi.auth.getToken();return i&&e.driveCreatePiker(i),!0}return!1};t?e.driveCreatePiker(t):h.a.gapi.auth.authorize({client_id:K.settingsGet("GoogleClientID"),scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!0},function(e){i(e)||h.a.gapi.auth.authorize({client_id:K.settingsGet("GoogleClientID"),scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!1},i)})}})},t.prototype.getAttachmentById=function(e){return m.a.find(this.attachments(),function(t){return t&&e===t.id})},t.prototype.cancelAttachmentHelper=function(e,t){var n=this;return function(){var o=m.a.find(n.attachments(),function(t){return t&&t.id===e});o&&(n.attachments.remove(o),i.i(A.delegateRunOnDestroy)(o),t&&t.cancel(e))}},t.prototype.initUploader=function(){var e=this;if(this.composeUploaderButton()){var t={},n=i.i(A.pInt)(K.settingsGet("AttachmentLimit")),o=new C.a({action:i.i(R.x)(),name:"uploader",queueSize:2,multipleSizeLimit:50,clickElement:this.composeUploaderButton(),dragAndDropElement:this.composeUploaderDropPlace()});o?(o.on("onDragEnter",function(){e.dragAndDropOver(!0)}).on("onDragLeave",function(){e.dragAndDropOver(!1)}).on("onBodyDragEnter",function(){e.attachmentsPlace(!0),e.dragAndDropVisible(!0)}).on("onBodyDragLeave",function(){e.dragAndDropVisible(!1)}).on("onProgress",function(i,n,o){var a=t[i];a||(a=e.getAttachmentById(i),a&&(t[i]=a)),a&&a.progress(h.a.Math.floor(n/o*100))}).on("onSelect",function(t,a){e.dragAndDropOver(!1);var r=i.i(A.isUnd)(a.FileName)?"":a.FileName.toString(),s=i.i(A.isNormal)(a.Size)?i.i(A.pInt)(a.Size):null,l=new z.a(t,r,s);return l.cancel=e.cancelAttachmentHelper(t,o),e.attachments.push(l),e.attachmentsPlace(!0),!(0<s&&0<n&&n<s)||(l.waiting(!1).uploading(!0).complete(!0).error(i.i(I.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1)}).on("onStart",function(i){var n=t[i];n||(n=e.getAttachmentById(i),n&&(t[i]=n)),n&&n.waiting(!1).uploading(!0).complete(!1)}).on("onComplete",function(n,o,a){var r=e.getAttachmentById(n),s=a&&a.Result&&a.Result.ErrorCode?a.Result.ErrorCode:null,l=o&&a&&a.Result&&a.Result.Attachment?a.Result.Attachment:null,c="";null!==s?c=i.i(I.getUploadErrorDescByCode)(s):l||(c=i.i(I.i18n)("UPLOAD/ERROR_UNKNOWN")),r&&(""!==c&&0<c.length?r.waiting(!1).uploading(!1).complete(!0).error(c):l&&(r.waiting(!1).uploading(!1).complete(!0),r.initByUploadJson(l)),i.i(A.isUnd)(t[n])&&delete t[n])}),this.addAttachmentEnabled(!0).dragAndDropEnabled(o.isDragAndDropSupported())):this.addAttachmentEnabled(!1).dragAndDropEnabled(!1)}},t.prototype.prepearAttachmentsForSendOrSave=function(){var e={};return m.a.each(this.attachmentsInReady(),function(t){t&&""!==t.tempName()&&t.enabled()&&(e[t.tempName()]=[t.fileName(),t.isInline?"1":"0",t.CID,t.contentLocation])}),e},t.prototype.addMessageAsAttachment=function(e){if(e){var t=e.subject();t=".eml"===t.substr(-4).toLowerCase()?t:t+".eml";var i=new z.a(e.requestHash,t,e.size());i.fromMessage=!0,i.cancel=this.cancelAttachmentHelper(e.requestHash),i.waiting(!1).uploading(!0).complete(!0),this.attachments.push(i)}},t.prototype.addAttachmentHelper=function(e,t,i){var n=new z.a(e,t,i);return n.fromMessage=!1,n.cancel=this.cancelAttachmentHelper(e),n.waiting(!1).uploading(!0).complete(!1),this.attachments.push(n),this.attachmentsPlace(!0),n},t.prototype.addDropboxAttachment=function(e){var t=i.i(A.pInt)(K.settingsGet("AttachmentLimit")),n=e.bytes,o=this.addAttachmentHelper(e.link,e.name,n);return 0<n&&0<t&&t<n?(o.uploading(!1).complete(!0),o.error(i.i(I.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1):(G.a.composeUploadExternals(function(e,t){var n=!1;o.uploading(!1).complete(!0),E.StorageResultType.Success===e&&t&&t.Result&&t.Result[o.id]&&(n=!0,o.tempName(t.Result[o.id])),n||o.error(i.i(I.getUploadErrorDescByCode)(E.UploadErrorCode.FileNoUploaded))},[e.link]),!0)},t.prototype.addDriveAttachment=function(e,t){var n=i.i(A.pInt)(K.settingsGet("AttachmentLimit")),o=e.fileSize?i.i(A.pInt)(e.fileSize):0,a=this.addAttachmentHelper(e.downloadUrl,e.title,o);return 0<o&&0<n&&n<o?(a.uploading(!1).complete(!0),a.error(i.i(I.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1):(G.a.composeUploadDrive(function(e,t){var n=!1;a.uploading(!1).complete(!0),E.StorageResultType.Success===e&&t&&t.Result&&t.Result[a.id]&&(n=!0,a.tempName(t.Result[a.id][0]),a.size(i.i(A.pInt)(t.Result[a.id][1]))),n||a.error(i.i(I.getUploadErrorDescByCode)(E.UploadErrorCode.FileNoUploaded))},e.downloadUrl,t),!0)},t.prototype.prepearMessageAttachments=function(e,t){var n=this;if(e)if(E.ComposeType.ForwardAsAttachment===t)this.addMessageAsAttachment(e);else{var o=e.attachments();m.a.each(i.i(A.isNonEmptyArray)(o)?o:[],function(e){var i=!1;switch(t){case E.ComposeType.Reply:case E.ComposeType.ReplyAll:i=e.isLinked;break;case E.ComposeType.Forward:case E.ComposeType.Draft:case E.ComposeType.EditAsNew:i=!0}if(i){var o=new z.a(e.download,e.fileName,e.estimatedSize,e.isInline,e.isLinked,e.cid,e.contentLocation);o.fromMessage=!0,o.cancel=n.cancelAttachmentHelper(e.download),o.waiting(!1).uploading(!0).complete(!1),n.attachments.push(o)}})}},t.prototype.removeLinkedAttachments=function(){var e=m.a.find(this.attachments(),function(e){return e&&e.isLinked});e&&(this.attachments.remove(e),i.i(A.delegateRunOnDestroy)(e))},t.prototype.setMessageAttachmentFailedDownloadText=function(){m.a.each(this.attachments(),function(e){e&&e.fromMessage&&e.waiting(!1).uploading(!1).complete(!0).error(i.i(I.getUploadErrorDescByCode)(E.UploadErrorCode.FileNoUploaded))})},t.prototype.isEmptyForm=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=e?0===this.attachments().length:0===this.attachmentsInReady().length;return 0===this.to().length&&0===this.cc().length&&0===this.bcc().length&&0===this.replyTo().length&&0===this.subject().length&&t&&(!this.oEditor||""===this.oEditor.getData())},t.prototype.reset=function(){this.to(""),this.cc(""),this.bcc(""),this.replyTo(""),this.subject(""),this.requestDsn(!1),this.requestReadReceipt(!1),this.markAsImportant(!1),this.attachmentsPlace(!1),this.aDraftInfo=null,this.sInReplyTo="",this.bFromDraft=!1,this.sReferences="",this.sendError(!1),this.sendSuccessButSaveError(!1),this.savedError(!1),this.savedTime(0),this.emptyToError(!1),this.attachmentsInProcessError(!1),this.showCc(!1),this.showBcc(!1),this.showReplyTo(!1),i.i(A.delegateRunOnDestroy)(this.attachments()),this.attachments([]),this.dragAndDropOver(!1),this.dragAndDropVisible(!1),this.draftFolder(""),this.draftUid(""),this.sending(!1),this.saving(!1),this.oEditor&&this.oEditor.clear(!1)},t.prototype.getAttachmentsDownloadsForUpload=function(){return m.a.map(m.a.filter(this.attachments(),function(e){return e&&""===e.tempName()}),function(e){return e.id})},t.prototype.resizerTrigger=function(){this.resizer(!this.resizer())},t}(W.a),n(ne.prototype,"sendCommand",[$],a()(ne.prototype,"sendCommand"),ne.prototype),n(ne.prototype,"saveCommand",[J],a()(ne.prototype,"saveCommand"),ne.prototype),n(ne.prototype,"deleteCommand",[X],a()(ne.prototype,"deleteCommand"),ne.prototype),n(ne.prototype,"skipCommand",[Z],a()(ne.prototype,"skipCommand"),ne.prototype),n(ne.prototype,"contactsCommand",[Q],a()(ne.prototype,"contactsCommand"),ne.prototype),n(ne.prototype,"dropboxCommand",[ee],a()(ne.prototype,"dropboxCommand"),ne.prototype),n(ne.prototype,"driveCommand",[te],a()(ne.prototype,"driveCommand"),ne.prototype),ie=ne))||ie)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(1);i.d(t,"EmailModel",function(){return r}),i.d(t,"default",function(){return r});var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"none",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";o()(this,e),this.email="",this.name="",this.dkimStatus="",this.dkimValue="",this.email=t,this.name=i,this.dkimStatus=n,this.dkimValue=a,this.clearDuplicateName()}return e.newInstanceFromJson=function(t){var i=new e;return i.initByJson(t)?i:null},e.splitHelper=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:";";e=e.replace(/[\r\n]+/g,"; ").replace(/[\s]+/g," ");var i=0,n=0,o=!1,a="",r="";for(n=e.length;i<n;i++){switch(a=e.charAt(i)){case"@":o=!0;break;case" ":o&&(o=!1,r+=t)}r+=a}return r.split(t)},e.prototype.clear=function(){this.email="",this.name="",this.dkimStatus="none",this.dkimValue=""},e.prototype.validate=function(){return""!==this.name||""!==this.email},e.prototype.hash=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return"#"+(e?"":this.name)+"#"+this.email+"#"},e.prototype.clearDuplicateName=function(){this.name===this.email&&(this.name="")},e.prototype.search=function(e){return-1<(this.name+" "+this.email).toLowerCase().indexOf(e.toLowerCase())},e.prototype.parse=function(e){this.clear(),e=i.i(a.trim)(e);var t=/(?:"([^"]+)")? ?[<]?(.*?@[^>,]+)>?,? ?/g,n=t.exec(e);n?(this.name=n[1]||"",this.email=n[2]||"",this.clearDuplicateName()):/^[^@]+@[^@]+$/.test(e)&&(this.name="",this.email=e)},e.prototype.initByJson=function(e){var t=!1;return e&&"Object/Email"===e["@Object"]&&(this.name=i.i(a.trim)(e.Name),this.email=i.i(a.trim)(e.Email),this.dkimStatus=i.i(a.trim)(e.DkimStatus||""),this.dkimValue=i.i(a.trim)(e.DkimValue||""),t=""!==this.email,this.clearDuplicateName()),t},e.prototype.toLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o="";return""!==this.email&&(e&&""!==this.name?o=t?'<a href="mailto:'+i.i(a.encodeHtml)('"'+this.name+'" <'+this.email+">")+'" target="_blank" tabindex="-1">'+i.i(a.encodeHtml)(this.name)+"</a>":n?i.i(a.encodeHtml)(this.name):this.name:(o=this.email,""!==this.name?t?o=i.i(a.encodeHtml)('"'+this.name+'" <')+'<a href="mailto:'+i.i(a.encodeHtml)('"'+this.name+'" <'+this.email+">")+'" target="_blank" tabindex="-1">'+i.i(a.encodeHtml)(o)+"</a>"+i.i(a.encodeHtml)(">"):(o='"'+this.name+'" <'+o+">",n&&(o=i.i(a.encodeHtml)(o))):t&&(o='<a href="mailto:'+i.i(a.encodeHtml)(this.email)+'" target="_blank" tabindex="-1">'+i.i(a.encodeHtml)(this.email)+"</a>"))),o},e.prototype.mailsoParse=function(e){if(e=i.i(a.trim)(e),""===e)return!1;for(var t=function(e,t,n){e=i.i(a.pString)(e);var o=e.length;return 0>t&&(t+=o),o="undefined"==typeof n?o:0>n?n+o:n+t,!(t>=e.length||0>t||t>o)&&e.slice(t,o)},n=function(e,t,n,o){return e=i.i(a.pString)(e),0>n&&(n+=e.length),o="undefined"!=typeof o?o:e.length,0>o&&(o=o+e.length-n),e.slice(0,n)+t.substr(0,o)+t.slice(o)+e.slice(n+o)},o="",r="",s="",l=!1,c=!1,u=!1,d=null,p=0,h=0,f=0;f<e.length;){switch(e.substr(f,1)){case'"':l||c||u?c||u||(h=f,o=t(e,p+1,h-p-1),e=n(e,"",p,h-p+1),h=0,f=0,p=0,l=!1):(l=!0,p=f);break;case"<":l||c||u||(0<f&&0===o.length&&(o=t(e,0,f)),c=!0,p=f);break;case">":c&&(h=f,r=t(e,p+1,h-p-1),e=n(e,"",p,h-p+1),h=0,f=0,p=0,c=!1);break;case"(":l||c||u||(u=!0,p=f);break;case")":u&&(h=f,s=t(e,p+1,h-p-1),e=n(e,"",p,h-p+1),h=0,f=0,p=0,u=!1);break;case"\\":f+=1}f+=1}return 0===r.length&&(d=e.match(/[^@\s]+@\S+/i),d&&d[0]?r=d[0]:o=e),0<r.length&&0===o.length&&0===s.length&&(o=e.replace(r,"")),r=i.i(a.trim)(r).replace(/^[<]+/,"").replace(/[>]+$/,""),o=i.i(a.trim)(o).replace(/^["']+/,"").replace(/["']+$/,""),s=i.i(a.trim)(s).replace(/^[(]+/,"").replace(/[)]+$/,""),o=o.replace(/\\\\(.)/g,"$1"),s=s.replace(/\\\\(.)/g,"$1"),this.name=o,this.email=r,this.clearDuplicateName(),!0},e}()},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(6),l=i.n(s),c=i(2),u=i.n(c),d=i(12),p=i.n(d),h=i(3),f=i(1),m=i(23),g=i(20),b=i(7),y=i(14),v=i(8),S=i(35),w=i(179),T=i(210),C=i(9),E=i(28),A=i(46),F=i(30),N=i(49),R=i(40),I=i(121),L=i(16),_=i(18),P=function(){function e(){o()(this,e),this.staticMessage=new T.a,this.messageList=u.a.observableArray([]).extend({rateLimit:0}),this.messageListCount=u.a.observable(0),this.messageListSearch=u.a.observable(""),this.messageListThreadUid=u.a.observable(""),this.messageListPage=u.a.observable(1),this.messageListPageBeforeThread=u.a.observable(1),this.messageListError=u.a.observable(""),this.messageListEndFolder=u.a.observable(""),this.messageListEndSearch=u.a.observable(""),this.messageListEndThreadUid=u.a.observable(""),this.messageListEndPage=u.a.observable(1),this.messageListLoading=u.a.observable(!1),this.messageListIsNotCompleted=u.a.observable(!1),this.messageListCompleteLoadingThrottle=u.a.observable(!1).extend({throttle:200}),this.messageListCompleteLoadingThrottleForAnimation=u.a.observable(!1).extend({specialThrottle:700}),this.messageListDisableAutoSelect=u.a.observable(!1).extend({falseTimeout:500}),this.selectorMessageSelected=u.a.observable(null),this.selectorMessageFocused=u.a.observable(null),this.message=u.a.observable(null),this.message.viewTrigger=u.a.observable(!1),this.messageError=u.a.observable(""),this.messageCurrentLoading=u.a.observable(!1),this.messageLoadingThrottle=u.a.observable(!1).extend({
throttle:h.Magics.Time50ms}),this.messageFullScreenMode=u.a.observable(!1),this.messagesBodiesDom=u.a.observable(null),this.messageActiveDom=u.a.observable(null),this.computers(),this.subscribers(),this.onMessageResponse=l.a.bind(this.onMessageResponse,this),this.purgeMessageBodyCacheThrottle=l.a.throttle(this.purgeMessageBodyCache,h.Magics.Time30s)}return e.prototype.computers=function(){var e=this;this.messageLoading=u.a.computed(function(){return e.messageCurrentLoading()}),this.messageListEndHash=u.a.computed(function(){return e.messageListEndFolder()+"|"+e.messageListEndSearch()+"|"+e.messageListEndThreadUid()+"|"+e.messageListEndPage()}),this.messageListPageCount=u.a.computed(function(){var t=r.a.Math.ceil(e.messageListCount()/R.a.messagesPerPage());return 0>=t?1:t}),this.mainMessageListSearch=u.a.computed({read:this.messageListSearch,write:function(t){i.i(C.setHash)(i.i(y.r)(F.a.currentFolderFullNameHash(),1,i.i(f.trim)(t.toString()),e.messageListThreadUid()))}}),this.messageListCompleteLoading=u.a.computed(function(){var t=e.messageListLoading(),i=e.messageListIsNotCompleted();return t||i}),this.isMessageSelected=u.a.computed(function(){return null!==e.message()}),this.messageListChecked=u.a.computed(function(){return l.a.filter(e.messageList(),function(e){return e.checked()})}).extend({rateLimit:0}),this.hasCheckedMessages=u.a.computed(function(){return 0<e.messageListChecked().length}).extend({rateLimit:0}),this.messageListCheckedOrSelected=u.a.computed(function(){var t=e.messageListChecked(),i=e.selectorMessageSelected(),n=e.selectorMessageFocused();return l.a.union(t,i?[i]:[],n?[n]:[])}),this.messageListCheckedOrSelectedUidsWithSubMails=u.a.computed(function(){var t=[];return l.a.each(e.messageListCheckedOrSelected(),function(e){e&&(t.push(e.uid),1<e.threadsLen()&&(t=l.a.union(t,e.threads())))}),t})},e.prototype.subscribers=function(){var e=this;this.messageListCompleteLoading.subscribe(function(t){t=!!t,e.messageListCompleteLoadingThrottle(t),e.messageListCompleteLoadingThrottleForAnimation(t)}),this.messageList.subscribe(l.a.debounce(function(e){l.a.each(e,function(e){e&&e.newForAnimation()&&e.newForAnimation(!1)})},h.Magics.Time500ms)),this.message.subscribe(function(t){t?h.Layout.NoPreview===R.a.layout()&&E.a.focusedState(h.Focused.MessageView):(E.a.focusedState(h.Focused.MessageList),e.messageFullScreenMode(!1),e.hideMessageBodies())}),this.messageLoading.subscribe(function(t){e.messageLoadingThrottle(t)}),this.messagesBodiesDom.subscribe(function(t){!t||t instanceof p.a||e.messagesBodiesDom(p()(t))}),this.messageListEndFolder.subscribe(function(t){var i=e.message();i&&t&&t!==i.folderFullNameRaw&&e.message(null)})},e.prototype.purgeMessageBodyCache=function(){var e=0,t=b.data.iMessageBodyCacheCount-g.l;if(0<t){var i=this.messagesBodiesDom();i&&(i.find(".rl-cache-class").each(function(){var i=p()(this);t>i.data("rl-cache-count")&&(i.addClass("rl-cache-purge"),e+=1)}),0<e&&l.a.delay(function(){return i.find(".rl-cache-purge").remove()},h.Magics.Time350ms))}},e.prototype.initUidNextAndNewMessages=function(e,t,n){if(i.i(m.a)()===e&&i.i(f.isNormal)(t)&&""!==t){if(i.i(f.isArray)(n)&&0<n.length){l.a.each(n,function(t){i.i(m.i)(e,t.Uid)}),I.a.playSoundNotification();var o=n.length;3<o?I.a.displayDesktopNotification(i.i(y.s)(),A.a.email(),i.i(v.i18n)("MESSAGE_LIST/NEW_MESSAGE_NOTIFICATION",{COUNT:o}),{Folder:"",Uid:""}):l.a.each(n,function(e){I.a.displayDesktopNotification(i.i(y.s)(),w.b(w.a(e.From),!1),e.Subject,{Folder:e.Folder,Uid:e.Uid})})}i.i(m.j)(e,t)}},e.prototype.hideMessageBodies=function(){var e=this.messagesBodiesDom();e&&e.find(".b-text-part").hide()},e.prototype.removeMessagesFromList=function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];t=l.a.map(t,function(e){return i.i(f.pInt)(e)});var r=0,s=this.messageList(),c=this.message(),u=F.a.trashFolder(),d=F.a.spamFolder(),p=i.i(m.b)(e),g=""===o?null:i.i(m.b)(o||""),b=F.a.currentFolderFullNameRaw(),v=b===e?l.a.filter(s,function(e){return e&&-1<i.i(f.inArray)(i.i(f.pInt)(e.uid),t)}):[];if(l.a.each(v,function(e){e&&e.unseen()&&(r+=1)}),p&&!a&&(p.messageCountAll(0<=p.messageCountAll()-t.length?p.messageCountAll()-t.length:0),0<r&&p.messageCountUnread(0<=p.messageCountUnread()-r?p.messageCountUnread()-r:0)),g&&(u!==g.fullNameRaw&&d!==g.fullNameRaw||(r=0),g.messageCountAll(g.messageCountAll()+t.length),0<r&&g.messageCountUnread(g.messageCountUnread()+r),g.actionBlink(!0)),0<v.length&&(a?l.a.each(v,function(e){e.checked(!1)}):(this.messageListIsNotCompleted(!0),l.a.each(v,function(e){c&&c.hash===e.hash&&(c=null,n.message(null)),e.deleted(!0)}),l.a.delay(function(){l.a.each(v,function(e){n.messageList.remove(e)})},h.Magics.Time350ms))),""!==e&&i.i(m.h)(e,""),""!==o&&i.i(m.h)(o,""),""!==this.messageListThreadUid()&&(s=this.messageList(),s&&0<s.length&&l.a.find(s,function(e){return!(!e||!e.deleted()||e.uid!==n.messageListThreadUid())}))){var S=l.a.find(s,function(e){return e&&!e.deleted()});S&&this.messageListThreadUid()!==i.i(f.pString)(S.uid)?(this.messageListThreadUid(i.i(f.pString)(S.uid)),i.i(C.setHash)(i.i(y.r)(F.a.currentFolderFullNameHash(),this.messageListPage(),this.messageListSearch(),this.messageListThreadUid()),!0,!0)):S||(1<this.messageListPage()?(this.messageListPage(this.messageListPage()-1),i.i(C.setHash)(i.i(y.r)(F.a.currentFolderFullNameHash(),this.messageListPage(),this.messageListSearch(),this.messageListThreadUid()),!0,!0)):(this.messageListThreadUid(""),i.i(C.setHash)(i.i(y.r)(F.a.currentFolderFullNameHash(),this.messageListPageBeforeThread(),this.messageListSearch()),!0,!0)))}},e.prototype.initBlockquoteSwitcher=function(e){if(e){var t=p()("blockquote:not(.rl-bq-switcher)",e).filter(function(){return 0===p()(this).parent().closest("blockquote",e).length});t&&0<t.length&&t.each(function(){var e=p()(this),t=e.height();0===t&&(t=i.i(f.getRealHeight)(e)),""!==i.i(f.trim)(e.text())&&(0===t||100<t)&&(e.addClass("rl-bq-switcher hidden-bq"),p()('<span class="rlBlockquoteSwitcher"><i class="icon-ellipsis" /></span>').insertBefore(e).on("click.rlBlockquoteSwitcher",function(){e.toggleClass("hidden-bq"),i.i(f.windowResize)()}).after("<br />").before("<br />"))})}},e.prototype.initOpenPgpControls=function(e,t){e&&e.find&&e.find(".b-plain-openpgp:not(.inited)").each(function(){N.a.initMessageBodyControls(p()(this),t)})},e.prototype.setMessage=function(e,t){var n=!1,o=null,a="",r="",s="",c=!1,u=this.messagesBodiesDom(),d=this.selectorMessageSelected(),g=this.message();if(e&&g&&e.Result&&"Object/Message"===e.Result["@Object"]&&g.folderFullNameRaw===e.Result.Folder){var y=g.threads();if(g.uid!==e.Result.Uid&&1<y.length&&-1<i.i(f.inArray)(e.Result.Uid,y)&&(g=T.a.newInstanceFromJson(e.Result),g&&(g.threads(y),i.i(m.k)(g),this.message(this.staticMessage.populateByMessageListItem(g)),g=this.message(),n=!0)),g&&g.uid===e.Result.Uid){if(this.messageError(""),g.initUpdateByMessageJson(e.Result),i.i(m.l)(g.folderFullNameRaw,g.uid),t||g.initFlagsByJson(e.Result),u=u&&u[0]?u:null){a="rl-mgs-"+g.hash.replace(/[^a-zA-Z0-9]/g,"");var v=u.find("#"+a);if(v&&v[0])g.body=v,g.body&&(b.data.iMessageBodyCacheCount+=1,g.body.data("rl-cache-count",b.data.iMessageBodyCacheCount),g.fetchDataFromDom());else{var S=!1;if(i.i(f.isNormal)(e.Result.Html)&&""!==e.Result.Html)S=!0,s=e.Result.Html.toString();else if(i.i(f.isNormal)(e.Result.Plain)&&""!==e.Result.Plain)if(S=!1,s=i.i(f.plainToHtml)(e.Result.Plain.toString(),!1),(g.isPgpSigned()||g.isPgpEncrypted())&&N.a.capaOpenPGP()){r=i.i(f.pString)(e.Result.Plain);var w=/---BEGIN PGP MESSAGE---/.test(r);w||(c=/-----BEGIN PGP SIGNED MESSAGE-----/.test(r)&&/-----BEGIN PGP SIGNATURE-----/.test(r)),b.$div.empty(),s=c&&g.isPgpSigned()?b.$div.append(p()('<pre class="b-plain-openpgp signed"></pre>').text(r)).html():w&&g.isPgpEncrypted()?b.$div.append(p()('<pre class="b-plain-openpgp encrypted"></pre>').text(r)).html():"<pre>"+s+"</pre>",b.$div.empty(),g.isPgpSigned(c),g.isPgpEncrypted(w)}else s="<pre>"+s+"</pre>";else S=!1,s="<pre>"+s+"</pre>";b.data.iMessageBodyCacheCount+=1,o=p()('<div id="'+a+'" ></div>').hide().addClass("rl-cache-class"),o.data("rl-cache-count",b.data.iMessageBodyCacheCount),o.html(i.i(f.findEmailAndLinks)(s)).addClass("b-text-part "+(S?"html":"plain")),g.isHtml(!!S),g.hasImages(!!e.Result.HasExternals),g.body=o,g.body&&u.append(g.body),g.storeDataInDom(),e.Result.HasInternals&&g.showInternalImages(!0),g.hasImages()&&R.a.showImages()&&g.showExternalImages(!0),this.purgeMessageBodyCacheThrottle()}this.messageActiveDom(g.body),this.hideMessageBodies(),o&&(this.initOpenPgpControls(o,g),this.initBlockquoteSwitcher(o)),g.body.show()}i.i(m.k)(g),(g.unseen()||g.hasUnseenSubMessage())&&i.i(L.a)().messageListAction(g.folderFullNameRaw,h.MessageSetAction.SetSeen,[g]),n&&(g=this.message(),d&&g&&(g.folderFullNameRaw!==d.folderFullNameRaw||g.uid!==d.uid)?(this.selectorMessageSelected(null),1===this.messageList().length&&this.selectorMessageFocused(null)):!d&&g&&(d=l.a.find(this.messageList(),function(e){return e&&e.folderFullNameRaw===g.folderFullNameRaw&&e.uid===g.uid}),d&&(this.selectorMessageSelected(d),this.selectorMessageFocused(d)))),i.i(f.windowResize)()}}},e.prototype.selectMessage=function(e){e?(this.message(this.staticMessage.populateByMessageListItem(e)),this.populateMessageBody(this.message())):this.message(null)},e.prototype.selectMessageByFolderAndUid=function(e,t){e&&t?(this.message(this.staticMessage.populateByMessageListItem(null)),this.message().folderFullNameRaw=e,this.message().uid=t,this.populateMessageBody(this.message())):this.message(null)},e.prototype.populateMessageBody=function(e){e&&_.a.message(this.onMessageResponse,e.folderFullNameRaw,e.uid)&&this.messageCurrentLoading(!0)},e.prototype.onMessageResponse=function(e,t,n){this.hideMessageBodies(),this.messageCurrentLoading(!1),h.StorageResultType.Success===e&&t&&t.Result?this.setMessage(t,n):h.StorageResultType.Unload===e?(this.message(null),this.messageError("")):h.StorageResultType.Abort!==e&&(this.message(null),this.messageError(t&&t.ErrorCode?i.i(v.getNotification)(t.ErrorCode):i.i(v.getNotification)(h.Notification.UnknownError)))},e.prototype.calculateMessageListHash=function(e){return l.a.map(e,function(e){return""+e.hash+"_"+e.threadsLen()+"_"+e.flagHash()}).join("|")},e.prototype.setMessageList=function(e,t){if(e&&e.Result&&"Collection/MessageCollection"===e.Result["@Object"]&&e.Result["@Collection"]&&i.i(f.isArray)(e.Result["@Collection"])){var n=0,o=!1,a=[],s=i.i(S.momentNowUnix)(),c=i.i(f.pInt)(e.Result.MessageResultCount),u=i.i(f.pInt)(e.Result.Offset),d=i.i(m.b)(i.i(f.isNormal)(e.Result.Folder)?e.Result.Folder:"");d&&!t&&(d.interval=s,i.i(m.h)(e.Result.Folder,e.Result.FolderHash),i.i(f.isNormal)(e.Result.MessageCount)&&d.messageCountAll(e.Result.MessageCount),i.i(f.isNormal)(e.Result.MessageUnseenCount)&&(i.i(f.pInt)(d.messageCountUnread())!==i.i(f.pInt)(e.Result.MessageUnseenCount)&&(o=!0),d.messageCountUnread(e.Result.MessageUnseenCount)),this.initUidNextAndNewMessages(d.fullNameRaw,e.Result.UidNext,e.Result.NewMessages)),o&&d&&i.i(m.m)(d.fullNameRaw),l.a.each(e.Result["@Collection"],function(e){if(e&&"Object/Message"===e["@Object"]){var o=T.a.newInstanceFromJson(e);o&&(i.i(m.n)(o.folderFullNameRaw,o.uid)&&5>=n&&(n+=1,o.newForAnimation(!0)),o.deleted(!1),t?i.i(m.k)(o):i.i(m.o)(o),a.push(o))}}),this.messageListCount(c),this.messageListSearch(i.i(f.isNormal)(e.Result.Search)?e.Result.Search:""),this.messageListPage(r.a.Math.ceil(u/R.a.messagesPerPage()+1)),this.messageListThreadUid(i.i(f.isNormal)(e.Result.ThreadUid)?i.i(f.pString)(e.Result.ThreadUid):""),this.messageListEndFolder(i.i(f.isNormal)(e.Result.Folder)?e.Result.Folder:""),this.messageListEndSearch(this.messageListSearch()),this.messageListEndThreadUid(this.messageListThreadUid()),this.messageListEndPage(this.messageListPage()),this.messageListDisableAutoSelect(!0),this.messageList(a),this.messageListIsNotCompleted(!1),i.i(m.p)(),d&&(t||o||R.a.useThreads())&&i.i(L.a)().folderInformation(d.fullNameRaw,a)}else this.messageListCount(0),this.messageList([]),this.messageListError(i.i(v.getNotification)(e&&e.ErrorCode?e.ErrorCode:h.Notification.CantGetMessageList))},e}();t.a=new P},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(2),l=i.n(s),c=i(20),u=i(3),d=i(7),p=i(1),h=i(29),f=i(10),m=function(){function e(){o()(this,e),this.iAutoLogoutTimer=0,this.layout=l.a.observable(u.Layout.SidePreview).extend({limitedList:[u.Layout.SidePreview,u.Layout.BottomPreview,u.Layout.NoPreview]}),this.editorDefaultType=l.a.observable(u.EditorDefaultType.Html).extend({limitedList:[u.EditorDefaultType.Html,u.EditorDefaultType.Plain,u.EditorDefaultType.HtmlForced,u.EditorDefaultType.PlainForced]}),this.messagesPerPage=l.a.observable(c.a).extend({limitedList:c.b}),this.showImages=l.a.observable(!1),this.useCheckboxesInList=l.a.observable(!0),this.useThreads=l.a.observable(!1),this.replySameFolder=l.a.observable(!1),this.autoLogout=l.a.observable(u.Magics.Time30mInMin),this.computers(),this.subscribers()}return e.prototype.computers=function(){var e=this;this.usePreviewPane=l.a.computed(function(){return u.Layout.NoPreview!==e.layout()})},e.prototype.subscribers=function(){this.layout.subscribe(function(e){d.$html.toggleClass("rl-no-preview-pane",u.Layout.NoPreview===e),d.$html.toggleClass("rl-side-preview-pane",u.Layout.SidePreview===e),d.$html.toggleClass("rl-bottom-preview-pane",u.Layout.BottomPreview===e),h.a("layout",[e])})},e.prototype.populate=function(){var e=this;this.layout(i.i(p.pInt)(f.settingsGet("Layout"))),this.editorDefaultType(f.settingsGet("EditorDefaultType")),this.autoLogout(i.i(p.pInt)(f.settingsGet("AutoLogout"))),this.messagesPerPage(f.settingsGet("MPP")),this.showImages(!!f.settingsGet("ShowImages")),this.useCheckboxesInList(!!f.settingsGet("UseCheckboxesInList")),this.useThreads(!!f.settingsGet("UseThreads")),this.replySameFolder(!!f.settingsGet("ReplySameFolder")),h.b("rl.auto-logout-refresh",function(){r.a.clearTimeout(e.iAutoLogoutTimer),0<e.autoLogout()&&!f.settingsGet("AccountSignMe")&&(e.iAutoLogoutTimer=r.a.setTimeout(function(){h.a("rl.auto-logout")},e.autoLogout()*u.Magics.Time1m))}),h.a("rl.auto-logout-refresh")},e}();t.a=new m},function(e,t,i){var n=i(44);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t,i){var n=i(21),o=i(25),a=i(83),r=i(32),s="prototype",l=function(e,t,i){var c,u,d,p=e&l.F,h=e&l.G,f=e&l.S,m=e&l.P,g=e&l.B,b=e&l.W,y=h?o:o[t]||(o[t]={}),v=y[s],S=h?n:f?n[t]:(n[t]||{})[s];h&&(i=t);for(c in i)u=!p&&S&&void 0!==S[c],u&&c in y||(d=u?S[c]:i[c],y[c]=h&&"function"!=typeof S[c]?i[c]:g&&u?a(d,n):b&&S[c]==d?function(e){var t=function(t,i,n){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,i)}return new e(t,i,n)}return e.apply(this,arguments)};return t[s]=e[s],t}(d):m&&"function"==typeof d?a(Function.call,d):d,m&&((y.virtual||(y.virtual={}))[c]=d,e&l.R&&v&&!v[c]&&r(v,c,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},,function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(6),l=i.n(s),c=i(3),u=i(10),d=function(){function e(){o()(this,e),this.email=r.a.observable(""),this.parentEmail=r.a.observable(""),this.signature=r.a.observable(""),this.accounts=r.a.observableArray([]),this.accounts.loading=r.a.observable(!1).extend({throttle:c.Magics.Time100ms}),this.computers()}return e.prototype.computers=function(){var e=this;this.accountsEmails=r.a.computed(function(){return l.a.compact(l.a.map(e.accounts(),function(e){return e?e.email:null}))}),this.accountsUnreadCount=r.a.computed(function(){return 0})},e.prototype.populate=function(){this.email(u.settingsGet("Email")),this.parentEmail(u.settingsGet("ParentEmail"))},e.prototype.isRootAccount=function(){return""===this.parentEmail()},e}();t.a=new d},function(e,t){e.exports=window.Promise},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(1),p=i(3),h=i(17);i.d(t,"a",function(){return f});var f=function(e){function t(n){o()(this,t);var a=r()(this,e.call(this));return a.value=n.value||"",a.size=n.size||0,a.label=n.label||"",a.preLabel=n.preLabel||"",a.enable=!!i.i(d.isUnd)(n.enable)||n.enable,a.trigger=n.trigger&&n.trigger.subscribe?n.trigger:null,a.placeholder=n.placeholder||"",a.labeled=!i.i(d.isUnd)(n.label),a.preLabeled=!i.i(d.isUnd)(n.preLabel),a.triggered=!i.i(d.isUnd)(n.trigger)&&!!a.trigger,a.classForTrigger=u.a.observable(""),a.className=u.a.computed(function(){var e=u.a.unwrap(a.size),t=a.trigger?" "+i.i(d.trim)("settings-saved-trigger-input "+a.classForTrigger()):"";return(0<e?"span"+e:"")+t}),!i.i(d.isUnd)(n.width)&&n.element&&n.element.find("input,select,textarea").css("width",n.width),a.disposable.push(a.className),a.trigger&&(a.setTriggerState(a.trigger()),a.disposable.push(a.trigger.subscribe(a.setTriggerState,a))),a}return l()(t,e),t.prototype.setTriggerState=function(e){switch(i.i(d.pInt)(e)){case p.SaveSettingsStep.TrueResult:this.classForTrigger("success");break;case p.SaveSettingsStep.FalseResult:this.classForTrigger("error");break;default:this.classForTrigger("")}},t}(h.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(6),l=i.n(s),c=i(12),u=i.n(c),d=i(8),p=i(1),h=i(46),f=i(9),m=function(){function e(){o()(this,e),this.capaOpenPGP=r.a.observable(!1),this.openpgp=null,this.openpgpkeys=r.a.observableArray([]),this.openpgpKeyring=null,this.openpgpkeysPublic=this.openpgpkeys.filter(function(e){return!(!e||e.isPrivate)}),this.openpgpkeysPrivate=this.openpgpkeys.filter(function(e){return!(!e||!e.isPrivate)})}return e.prototype.isSupported=function(){return!!this.openpgp},e.prototype.findKeyByHex=function(e,t){return l.a.find(e,function(e){return t&&e&&(t===e.id||-1<e.ids.indexOf(t))})},e.prototype.findPublicKeyByHex=function(e){return this.findKeyByHex(this.openpgpkeysPublic(),e)},e.prototype.findPrivateKeyByHex=function(e){return this.findKeyByHex(this.openpgpkeysPrivate(),e)},e.prototype.findPublicKeysByEmail=function(e){return l.a.compact(l.a.flatten(l.a.map(this.openpgpkeysPublic(),function(t){var i=t&&-1<t.emails.indexOf(e)?t:null;return i?i.getNativeKeys():[null]}),!0))},e.prototype.findPublicKeysBySigningKeyIds=function(e){var t=this;return l.a.compact(l.a.flatten(l.a.map(e,function(e){var i=e&&e.toHex?t.findPublicKeyByHex(e.toHex()):null;return i?i.getNativeKeys():[null]}),!0))},e.prototype.findPrivateKeysByEncryptionKeyIds=function(e,t,n){var o=this,a=i.i(p.isArray)(e)?l.a.compact(l.a.flatten(l.a.map(e,function(e){var t=e&&e.toHex?o.findPrivateKeyByHex(e.toHex()):null;return t?n?[t]:t.getNativeKeys():[null]}),!0)):[];return 0===a.length&&i.i(p.isNonEmptyArray)(t)&&(a=l.a.uniq(l.a.compact(l.a.flatten(l.a.map(t,function(e){var t=e?o.findAllPrivateKeysByEmailNotNative(e):null;return t?n?t:l.a.flatten(l.a.map(t,function(e){return e.getNativeKeys()}),!0):[null]}),!0)),function(e){return e.id})),a},e.prototype.findPublicKeyByEmailNotNative=function(e){return l.a.find(this.openpgpkeysPublic(),function(t){return t&&-1<t.emails.indexOf(e)})||null},e.prototype.findPrivateKeyByEmailNotNative=function(e){return l.a.find(this.openpgpkeysPrivate(),function(t){return t&&-1<t.emails.indexOf(e)})||null},e.prototype.findAllPublicKeysByEmailNotNative=function(e){return l.a.filter(this.openpgpkeysPublic(),function(t){return t&&-1<t.emails.indexOf(e)})||null},e.prototype.findAllPrivateKeysByEmailNotNative=function(e){return l.a.filter(this.openpgpkeysPrivate(),function(t){return t&&-1<t.emails.indexOf(e)})||null},e.prototype.findPrivateKeyByEmail=function(e,t){var n=null,o=l.a.find(this.openpgpkeysPrivate(),function(t){return t&&-1<t.emails.indexOf(e)});if(o)try{n=o.getNativeKeys()[0]||null,n&&n.decrypt(i.i(p.pString)(t))}catch(e){n=null}return n},e.prototype.findSelfPrivateKey=function(e){return this.findPrivateKeyByEmail(h.a.email(),e)},e.prototype.decryptMessage=function(e,t,n){var o=this;if(e&&e.getEncryptionKeyIds){var a=this.findPrivateKeysByEncryptionKeyIds(e.getEncryptionKeyIds(),t,!0);if(a&&0<a.length)return i.i(f.showScreenPopup)(i(250),[function(t){t?e.decrypt(t).then(function(e){var i=null;e?(i=o.findPrivateKeyByHex(t.primaryKey.keyid.toHex()),i?o.verifyMessage(e,function(t,o){n(i,e,t||null,o||null)}):n(i,e)):n(i,e)},function(){n(null,null)}):n(null,null)},a]),!1}return n(null,null),!1},e.prototype.verifyMessage=function(e,t){if(e&&e.getSigningKeyIds){var n=e.getSigningKeyIds();if(n&&0<n.length){var o=this.findPublicKeysBySigningKeyIds(n);if(o&&0<o.length)try{var a=e.verify(o),r=l.a.find(l.a.isArray(a)?a:[],function(e){return e&&e.valid&&e.keyid});if(r&&r.keyid&&r.keyid&&r.keyid.toHex)return t(this.findPublicKeyByHex(r.keyid.toHex())),!0}catch(e){i.i(p.log)(e)}return t(null,n),!1}}return t(null),!1},e.prototype.controlsHelper=function(e,t,n,o,a){n?(e.removeClass("error").addClass("success").attr("title",o),t.removeClass("error").addClass("success").attr("title",o)):(e.removeClass("success").addClass("error").attr("title",o),t.removeClass("success").addClass("error").attr("title",o)),i.i(p.isUnd)(a)||e.text(i.i(p.trim)(a))},e.domControlEncryptedClickHelper=function(e,t,n,o){return function(){var a=null,r=u()(this);if(r.hasClass("success"))return!1;try{a=e.openpgp.message.readArmored(n)}catch(e){i.i(p.log)(e)}return a&&a.getText&&a.verify&&a.decrypt?(e.decryptMessage(a,o,function(n,o,a,s){if(o)if(a)e.controlsHelper(t,r,!0,i.i(d.i18n)("PGP_NOTIFICATIONS/GOOD_SIGNATURE",{USER:a.user+" ("+a.id+")"}),o.getText());else if(n){var c=i.i(p.isNonEmptyArray)(s)?s:null,u=c?l.a.compact(l.a.map(c,function(e){return e&&e.toHex?e.toHex():null})).join(", "):"";e.controlsHelper(t,r,!1,i.i(d.i18n)("PGP_NOTIFICATIONS/UNVERIFIRED_SIGNATURE")+(u?" ("+u+")":""),o.getText())}else e.controlsHelper(t,r,!1,i.i(d.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR"));else e.controlsHelper(t,r,!1,i.i(d.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR"))}),!1):(e.controlsHelper(t,r,!1,i.i(d.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR")),!1)}},e.domControlSignedClickHelper=function(e,t,n){return function(){var o=null,a=u()(this);if(a.hasClass("success")||a.hasClass("error"))return!1;try{o=e.openpgp.cleartext.readArmored(n)}catch(e){i.i(p.log)(e)}return o&&o.getText&&o.verify?(e.verifyMessage(o,function(n,r){if(n)e.controlsHelper(t,a,!0,i.i(d.i18n)("PGP_NOTIFICATIONS/GOOD_SIGNATURE",{USER:n.user+" ("+n.id+")"}),o.getText());else{var s=i.i(p.isNonEmptyArray)(r)?r:null,c=s?l.a.compact(l.a.map(s,function(e){return e&&e.toHex?e.toHex():null})).join(", "):"";e.controlsHelper(t,a,!1,i.i(d.i18n)("PGP_NOTIFICATIONS/UNVERIFIRED_SIGNATURE")+(c?" ("+c+")":""))}}),!1):(e.controlsHelper(t,a,!1,i.i(d.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR")),!1)}},e.prototype.initMessageBodyControls=function(t,n){if(t&&!t.hasClass("inited")){t.addClass("inited");var o=t.hasClass("encrypted"),a=t.hasClass("signed"),r=n?n.getEmails(["from","to","cc"]):[],s=null;if(o||a){var l=t.text();t.data("openpgp-original",l),o?s=u()('<div class="b-openpgp-control"><i class="icon-lock"></i></div>').attr("title",i.i(d.i18n)("MESSAGE/PGP_ENCRYPTED_MESSAGE_DESC")).on("click",e.domControlEncryptedClickHelper(this,t,l,r)):a&&(s=u()('<div class="b-openpgp-control"><i class="icon-lock"></i></div>').attr("title",i.i(d.i18n)("MESSAGE/PGP_SIGNED_MESSAGE_DESC")).on("click",e.domControlSignedClickHelper(this,t,l))),s&&t.before(s).before("<div></div>")}}},e}();t.a=new m},function(e,t,i){var n=i(89),o=i(59);e.exports=Object.keys||function(e){return n(e,o)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){var i=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++i+n).toString(36))}},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(1),l=i(10),c=function(){function e(){o()(this,e),this.languages=r.a.observableArray([]),this.languagesAdmin=r.a.observableArray([]),this.language=r.a.observable("").extend({limitedList:this.languages}).extend({reversible:!0}),this.languageAdmin=r.a.observable("").extend({limitedList:this.languagesAdmin}).extend({reversible:!0}),this.userLanguage=r.a.observable(""),this.userLanguageAdmin=r.a.observable("")}return e.prototype.populate=function(){var e=l.appSettingsGet("languages"),t=l.appSettingsGet("languagesAdmin");this.languages(i.i(s.isArray)(e)?e:[]),this.languagesAdmin(i.i(s.isArray)(t)?t:[]),this.language(l.settingsGet("Language")),this.languageAdmin(l.settingsGet("LanguageAdmin")),this.userLanguage(l.settingsGet("UserLanguage")),this.userLanguageAdmin(l.settingsGet("UserLanguageAdmin"))},e}();t.a=new c},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(2),l=i.n(s),c=i(12),u=i.n(c),d=i(10),p=function(){function e(){var t=this;o()(this,e),this.google={},this.twitter={},this.facebook={},this.dropbox={},this.google.enabled=l.a.observable(!1),this.google.clientID=l.a.observable(""),this.google.clientSecret=l.a.observable(""),this.google.apiKey=l.a.observable(""),this.google.loading=l.a.observable(!1),this.google.userName=l.a.observable(""),this.google.loggined=l.a.computed(function(){return""!==t.google.userName()}),this.google.capa={},this.google.capa.auth=l.a.observable(!1),this.google.capa.authFast=l.a.observable(!1),this.google.capa.drive=l.a.observable(!1),this.google.capa.preview=l.a.observable(!1),this.google.require={},this.google.require.clientSettings=l.a.computed(function(){return t.google.enabled()&&(t.google.capa.auth()||t.google.capa.drive())}),this.google.require.apiKeySettings=l.a.computed(function(){return t.google.enabled()&&t.google.capa.drive()}),this.facebook.enabled=l.a.observable(!1),this.facebook.appID=l.a.observable(""),this.facebook.appSecret=l.a.observable(""),this.facebook.loading=l.a.observable(!1),this.facebook.userName=l.a.observable(""),this.facebook.supported=l.a.observable(!1),this.facebook.loggined=l.a.computed(function(){return""!==t.facebook.userName()}),this.twitter.enabled=l.a.observable(!1),this.twitter.consumerKey=l.a.observable(""),this.twitter.consumerSecret=l.a.observable(""),this.twitter.loading=l.a.observable(!1),this.twitter.userName=l.a.observable(""),this.twitter.loggined=l.a.computed(function(){return""!==t.twitter.userName()}),this.dropbox.enabled=l.a.observable(!1),this.dropbox.apiKey=l.a.observable("")}return e.prototype.populate=function(){this.google.enabled(!!d.settingsGet("AllowGoogleSocial")),this.google.clientID(d.settingsGet("GoogleClientID")),this.google.clientSecret(d.settingsGet("GoogleClientSecret")),this.google.apiKey(d.settingsGet("GoogleApiKey")),this.google.capa.auth(!!d.settingsGet("AllowGoogleSocialAuth")),this.google.capa.authFast(!!d.settingsGet("AllowGoogleSocialAuthFast")),this.google.capa.drive(!!d.settingsGet("AllowGoogleSocialDrive")),this.google.capa.preview(!!d.settingsGet("AllowGoogleSocialPreview")),this.facebook.enabled(!!d.settingsGet("AllowFacebookSocial")),this.facebook.appID(d.settingsGet("FacebookAppID")),this.facebook.appSecret(d.settingsGet("FacebookAppSecret")),this.facebook.supported(!!d.settingsGet("SupportedFacebookSocial")),this.twitter.enabled=l.a.observable(!!d.settingsGet("AllowTwitterSocial")),this.twitter.consumerKey=l.a.observable(d.settingsGet("TwitterConsumerKey")),this.twitter.consumerSecret=l.a.observable(d.settingsGet("TwitterConsumerSecret")),this.dropbox.enabled(!!d.settingsGet("AllowDropboxSocial")),this.dropbox.apiKey(d.settingsGet("DropboxApiKey"))},e.prototype.appendDropbox=function(){if(!r.a.Dropbox&&this.dropbox.enabled()&&this.dropbox.apiKey()&&!r.a.document.getElementById("dropboxjs")){var e=r.a.document.createElement("script");e.type="text/javascript",e.src="https://www.dropbox.com/static/api/2/dropins.js",u()(e).attr("id","dropboxjs").attr("data-app-key",this.dropbox.apiKey()),r.a.document.body.appendChild(e)}},e}();t.a=new p},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(17),u=i(77),d=function(e){function t(){return o()(this,t),r()(this,e.apply(this,arguments))}return l()(t,e),t}(u.a);e.exports=i.i(c.b)(d,"CheckboxComponent")},,function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(1),l=i(10),c=function(){function e(){o()(this,e),this.themes=r.a.observableArray([]),this.themeBackgroundName=r.a.observable(""),this.themeBackgroundHash=r.a.observable(""),this.theme=r.a.observable("").extend({limitedList:this.themes})}return e.prototype.populate=function(){var e=l.appSettingsGet("themes");this.themes(i.i(s.isArray)(e)?e:[]),this.theme(l.settingsGet("Theme")),this.themeBackgroundName(l.settingsGet("UserBackgroundName")),this.themeBackgroundHash(l.settingsGet("UserBackgroundHash"))},e}();t.a=new c},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports={}},function(e,t){e.exports=!0},function(e,t,i){var n=i(41),o=i(145),a=i(59),r=i(66)("IE_PROTO"),s=function(){},l="prototype",c=function(){var e,t=i(84)("iframe"),n=a.length,o="<",r=">";for(t.style.display="none",i(138).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(o+"script"+r+"document.F=Object"+o+"/script"+r),e.close(),c=e.F;n--;)delete c[l][a[n]];return c()};e.exports=Object.create||function(e,t){var i;return null!==e?(s[l]=n(e),i=new s,s[l]=null,i[r]=e):i=c(),void 0===t?i:o(i,t)}},function(e,t,i){var n=i(64),o=i(51),a=i(22),r=i(69),s=i(26),l=i(85),c=Object.getOwnPropertyDescriptor;t.f=i(31)?c:function(e,t){if(e=a(e),t=r(t,!0),l)try{return c(e,t)}catch(e){}if(s(e,t))return o(!n.f.call(e,t),e[t])}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,i){var n=i(33).f,o=i(26),a=i(34)("toStringTag");e.exports=function(e,t,i){e&&!o(e=i?e:e.prototype,a)&&n(e,a,{configurable:!0,value:t})}},function(e,t,i){var n=i(67)("keys"),o=i(52);e.exports=function(e){return n[e]||(n[e]=o(e))}},function(e,t,i){var n=i(21),o="__core-js_shared__",a=n[o]||(n[o]={});e.exports=function(e){return a[e]||(a[e]={})}},function(e,t){var i=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:i)(e)}},function(e,t,i){var n=i(44);e.exports=function(e,t){if(!n(e))return e;var i,o;if(t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;if("function"==typeof(i=e.valueOf)&&!n(o=i.call(e)))return o;if(!t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")}},function(e,t,i){var n=i(21),o=i(25),a=i(61),r=i(71),s=i(33).f;e.exports=function(e){var t=o.Symbol||(o.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:r.f(e)})}},function(e,t,i){t.f=i(34)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(6),r=i.n(a),s=i(91),l=i.n(s),c=i(1);i.d(t,"a",function(){return u});var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o()(this,e),this.oCross=null,this.sScreenName=t,this.aViewModels=i.i(c.isArray)(n)?n:[]}return e.prototype.viewModels=function(){return this.aViewModels},e.prototype.screenName=function(){return this.sScreenName},e.prototype.routes=function(){return null},e.prototype.__cross=function(){return this.oCross},e.prototype.__start=function(){var e=null,t=null,n=this.routes();i.i(c.isNonEmptyArray)(n)&&(t=r.a.bind(this.onRoute||c.noop,this),e=l.a.create(),n.forEach(function(i){i&&e&&(e.addRoute(i[0],t).rules=i[1])}),this.oCross=e)},e}()},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(19),p=i.n(d),h=i(3),f=i(1),m=i(8),g=i(9),b=i(13);i.d(t,"AskPopupView",function(){return S}),i.d(t,"default",function(){return S});var y,v,S=(y=i.i(g.popup)({name:"View/Popup/Ask",templateID:"PopupsAsk"}),y(v=function(e){function t(){
o()(this,t);var i=r()(this,e.call(this));return i.askDesc=u.a.observable(""),i.yesButton=u.a.observable(""),i.noButton=u.a.observable(""),i.yesFocus=u.a.observable(!1),i.noFocus=u.a.observable(!1),i.fYesAction=null,i.fNoAction=null,i.bFocusYesOnShow=!0,i.bDisabeCloseOnEsc=!0,i.sDefaultKeyScope=h.KeyState.PopupAsk,i}return l()(t,e),t.prototype.clearPopup=function(){this.askDesc(""),this.yesButton(i.i(m.i18n)("POPUPS_ASK/BUTTON_YES")),this.noButton(i.i(m.i18n)("POPUPS_ASK/BUTTON_NO")),this.yesFocus(!1),this.noFocus(!1),this.fYesAction=null,this.fNoAction=null},t.prototype.yesClick=function(){this.cancelCommand(),i.i(f.isFunc)(this.fYesAction)&&this.fYesAction.call(null)},t.prototype.noClick=function(){this.cancelCommand(),i.i(f.isFunc)(this.fNoAction)&&this.fNoAction.call(null)},t.prototype.onShow=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];this.clearPopup(),this.fYesAction=t||null,this.fNoAction=i||null,this.askDesc(e||""),n&&this.yesButton(n),o&&this.noButton(o),this.bFocusYesOnShow=!!a},t.prototype.onShowWithDelay=function(){this.bFocusYesOnShow&&this.yesFocus(!0)},t.prototype.onBuild=function(){var e=this;p()("tab, shift+tab, right, left",h.KeyState.PopupAsk,function(){return e.yesFocus()?e.noFocus(!0):e.yesFocus(!0),!1}),p()("esc",h.KeyState.PopupAsk,function(){return e.noClick(),!1})},t}(b.a))||v)},function(e,t){e.exports=window.moment},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(6),l=i.n(s),c=i(12),u=i.n(c),d=i(7),p=i(3),h=i(10);i.d(t,"HtmlEditor",function(){return f}),i.d(t,"default",function(){return f});var f=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;o()(this,e),this.blurTimer=0,this.__resizable=!1,this.__inited=!1,this.onBlur=null,this.onReady=null,this.onModeChange=null,this.onBlur=i,this.onReady=n,this.onModeChange=a,this.element=t,this.$element=u()(t),this.resize=l.a.throttle(l.a.bind(this.resizeEditor,this),100),this.init()}return e.prototype.runOnBlur=function(){this.onBlur&&this.onBlur()},e.prototype.blurTrigger=function(){var e=this;this.onBlur&&(r.a.clearTimeout(this.blurTimer),this.blurTimer=r.a.setTimeout(function(){e.runOnBlur()},p.Magics.Time200ms))},e.prototype.focusTrigger=function(){this.onBlur&&r.a.clearTimeout(this.blurTimer)},e.prototype.isHtml=function(){return!!this.editor&&"wysiwyg"===this.editor.mode},e.prototype.clearCachedSignature=function(){this.editor&&this.editor.execCommand("insertSignature",{clearCache:!0})},e.prototype.setSignature=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.editor&&this.editor.execCommand("insertSignature",{isHtml:t,isFirst:n,insertBefore:i,signature:e})},e.prototype.checkDirty=function(){return!!this.editor&&this.editor.checkDirty()},e.prototype.resetDirty=function(){this.editor&&this.editor.resetDirty()},e.prototype.getData=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="";if(this.editor)try{t="plain"===this.editor.mode&&this.editor.plugins.plain&&this.editor.__plain?this.editor.__plain.getRawData():e?'<div data-html-editor-font-wrapper="true" style="font-family: arial, sans-serif; font-size: 13px;">'+this.editor.getData()+"</div>":this.editor.getData()}catch(e){}return t},e.prototype.getDataWithHtmlMark=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(this.isHtml()?":HTML:":"")+this.getData(e)},e.prototype.modeToggle=function(e,t){if(this.editor){try{e?"plain"===this.editor.mode&&this.editor.setMode("wysiwyg"):"wysiwyg"===this.editor.mode&&this.editor.setMode("plain")}catch(e){}t&&this.resize()}},e.prototype.setHtmlOrPlain=function(e,t){":HTML:"===e.substr(0,6)?this.setHtml(e.substr(6),t):this.setPlain(e,t)},e.prototype.setHtml=function(e,t){if(this.editor&&this.__inited){this.clearCachedSignature(),this.modeToggle(!0),e=e.replace(/<p[^>]*><\/p>/gi,"");try{this.editor.setData(e)}catch(e){}t&&this.focus()}},e.prototype.replaceHtml=function(e,t){if(this.editor&&this.__inited&&"wysiwyg"===this.editor.mode)try{this.editor.setData(this.editor.getData().replace(e,t))}catch(e){}},e.prototype.setPlain=function(e,t){if(this.editor&&this.__inited){if(this.clearCachedSignature(),this.modeToggle(!1),"plain"===this.editor.mode&&this.editor.plugins.plain&&this.editor.__plain)this.editor.__plain.setRawData(e);else try{this.editor.setData(e)}catch(e){}t&&this.focus()}},e.prototype.init=function(){var e=this;if(this.element&&!this.editor){var t=function(){var t=d.htmlEditorDefaultConfig,i=h.settingsGet("Language"),n=!!h.appSettingsGet("allowHtmlEditorSourceButton"),o=!!h.appSettingsGet("allowHtmlEditorBitiButtons");!n&&o||t.toolbarGroups.__cfgInited||(t.toolbarGroups.__cfgInited=!0,n&&(t.removeButtons=t.removeButtons.replace(",Source","")),o||(t.removePlugins+=(t.removePlugins?",":"")+"bidi")),t.enterMode=r.a.CKEDITOR.ENTER_BR,t.shiftEnterMode=r.a.CKEDITOR.ENTER_P,t.language=d.htmlEditorLangsMap[(i||"en").toLowerCase()]||"en",r.a.CKEDITOR.env&&(r.a.CKEDITOR.env.isCompatible=!0),e.editor=r.a.CKEDITOR.appendTo(e.element,t),e.editor.on("key",function(e){return!e||!e.data||p.EventKeyCode.Tab!==e.data.keyCode}),e.editor.on("blur",function(){e.blurTrigger()}),e.editor.on("mode",function(){e.blurTrigger(),e.onModeChange&&e.onModeChange("plain"!==e.editor.mode)}),e.editor.on("focus",function(){e.focusTrigger()}),r.a.FileReader&&e.editor.on("drop",function(t){if(0<t.data.dataTransfer.getFilesCount()){var i=t.data.dataTransfer.getFile(0);if(i&&r.a.FileReader&&t.data.dataTransfer.id&&i.type&&i.type.match(/^image/i)){var n=t.data.dataTransfer.id,o="[img="+n+"]",a=new r.a.FileReader;a.onloadend=function(){a.result&&e.replaceHtml(o,'<img src="'+a.result+'" />')},a.readAsDataURL(i),t.data.dataTransfer.setData("text/html",o)}}}),e.editor.on("instanceReady",function(){e.editor.removeMenuItem&&(e.editor.removeMenuItem("cut"),e.editor.removeMenuItem("copy"),e.editor.removeMenuItem("paste")),e.__resizable=!0,e.__inited=!0,e.resize(),e.onReady&&e.onReady()})};r.a.CKEDITOR?t():r.a.__initEditor=t}},e.prototype.focus=function(){if(this.editor)try{this.editor.focus()}catch(e){}},e.prototype.hasFocus=function(){if(this.editor)try{return!!this.editor.focusManager.hasFocus}catch(e){}return!1},e.prototype.blur=function(){if(this.editor)try{this.editor.focusManager.blur(!0)}catch(e){}},e.prototype.resizeEditor=function(){if(this.editor&&this.__resizable)try{this.editor.resize(this.$element.width(),this.$element.innerHeight())}catch(e){}},e.prototype.setReadOnly=function(e){if(this.editor)try{this.editor.setReadOnly(!!e)}catch(e){}},e.prototype.clear=function(e){this.setHtml("",e)},e}()},function(e,t,i){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!s.a||!s.a.all)throw new Error("Promises are not available your environment.");if(!e)throw new Error("src should not be empty.");return new s.a(function(i,n){var o=a.a.document.createElement("script");o.onload=function(){i(e)},o.onerror=function(){n(new Error(e))},o.async=!0===t,o.src=e,a.a.document.body.appendChild(o)})}var o=i(11),a=i.n(o),r=i(47),s=i.n(r);t.a=n},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(1),p=i(17);i.d(t,"a",function(){return h});var h=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o()(this,t);var a=r()(this,e.call(this));return a.value=n.value,!i.i(d.isUnd)(a.value)&&a.value.subscribe||(a.value=u.a.observable(!i.i(d.isUnd)(a.value)&&!!a.value)),a.enable=n.enable,!i.i(d.isUnd)(a.enable)&&a.enable.subscribe||(a.enable=u.a.observable(!!i.i(d.isUnd)(a.enable)||!!a.enable)),a.disable=n.disable,!i.i(d.isUnd)(a.disable)&&a.disable.subscribe||(a.disable=u.a.observable(!i.i(d.isUnd)(a.disable)&&!!a.disable)),a.label=n.label||"",a.inline=!i.i(d.isUnd)(n.inline)&&n.inline,a.readOnly=!i.i(d.isUnd)(n.readOnly)&&!!n.readOnly,a.inverted=!i.i(d.isUnd)(n.inverted)&&!!n.inverted,a.labeled=!i.i(d.isUnd)(n.label),a.labelAnimated=!!n.labelAnimated,a}return l()(t,e),t.prototype.click=function(){this.readOnly||!this.enable()||this.disable()||this.value(!this.value())},t}(p.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(11),u=i.n(c),d=i(214),p=i(213),h=function(e){function t(){o()(this,t);var i=r()(this,e.call(this));return i.foldersTimeout=0,i}return l()(t,e),t.prototype.foldersReload=function(e){return this.abort("Folders").postRequest("Folders",e).then(function(e){return d.a.foldersList(e.Result),d.a.foldersAdditionalParameters(e.Result),!0})},t.prototype.foldersReloadWithTimeout=function(e){var t=this;this.setTrigger(e,!0),u.a.clearTimeout(this.foldersTimeout),this.foldersTimeout=u.a.setTimeout(function(){t.foldersReload(e)},500)},t.prototype.folderDelete=function(e,t){return this.postRequest("FolderDelete",t,{Folder:e})},t.prototype.folderCreate=function(e,t,i){return this.postRequest("FolderCreate",i,{Folder:e,Parent:t})},t.prototype.folderRename=function(e,t,i){return this.postRequest("FolderRename",i,{Folder:e,NewFolderName:t})},t.prototype.attachmentsActions=function(e,t,i){return this.postRequest("AttachmentsActions",i,{Do:e,Hashes:t})},t.prototype.welcomeClose=function(){return this.postRequest("WelcomeClose")},t}(p.a);t.a=new h},function(e,t,i){"use strict";function n(e,t){return!!u&&u.set("p"+e,t)}function o(e){return u?u.get("p"+e):null}var a=i(6),r=i.n(a),s=i(200),l=i(201);t.b=n,t.a=o;var c=r.a.find([l.a,s.a],function(e){return e&&e.supported()}),u=c?new c:null},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(2),p=i.n(d),h=i(1),f=i(9),m=i(13);i.d(t,"LanguagesPopupView",function(){return y}),i.d(t,"default",function(){return y});var g,b,y=(g=i.i(f.popup)({name:"View/Popup/Languages",templateID:"PopupsLanguages"}),g(b=function(e){function t(){o()(this,t);var n=r()(this,e.call(this));return n.fLang=null,n.userLanguage=p.a.observable(""),n.langs=p.a.observableArray([]),n.languages=p.a.computed(function(){var e=n.userLanguage();return u.a.map(n.langs(),function(t){return{key:t,user:t===e,selected:p.a.observable(!1),fullName:i.i(h.convertLangName)(t)}})}),n.langs.subscribe(function(){n.setLanguageSelection()}),n}return l()(t,e),t.prototype.languageTooltipName=function(e){var t=i.i(h.convertLangName)(e,!0);return i.i(h.convertLangName)(e,!1)===t?"":t},t.prototype.setLanguageSelection=function(){var e=this.fLang?p.a.unwrap(this.fLang):"";u.a.each(this.languages(),function(t){t.selected(t.key===e)})},t.prototype.onBeforeShow=function(){this.fLang=null,this.userLanguage(""),this.langs([])},t.prototype.onShow=function(e,t,i){this.fLang=e,this.userLanguage(i||""),this.langs(t)},t.prototype.changeLanguage=function(e){this.fLang&&this.fLang(e),this.cancelCommand()},t}(m.a))||b)},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var o=i(128),a=n(o),r=i(127),s=n(r),l="function"==typeof s.default&&"symbol"==typeof a.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===l(a.default)?function(e){return"undefined"==typeof e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"==typeof e?"undefined":l(e)}},function(e,t){var i={}.toString;e.exports=function(e){return i.call(e).slice(8,-1)}},function(e,t,i){var n=i(134);e.exports=function(e,t,i){if(n(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)}}return function(){return e.apply(t,arguments)}}},function(e,t,i){var n=i(44),o=i(21).document,a=n(o)&&n(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,i){e.exports=!i(31)&&!i(43)(function(){return 7!=Object.defineProperty(i(84)("div"),"a",{get:function(){return 7}}).a})},function(e,t,i){"use strict";var n=i(61),o=i(42),a=i(90),r=i(32),s=i(26),l=i(60),c=i(141),u=i(65),d=i(147),p=i(34)("iterator"),h=!([].keys&&"next"in[].keys()),f="@@iterator",m="keys",g="values",b=function(){return this};e.exports=function(e,t,i,y,v,S,w){c(i,t,y);var T,C,E,A=function(e){if(!h&&e in I)return I[e];switch(e){case m:return function(){return new i(this,e)};case g:return function(){return new i(this,e)}}return function(){return new i(this,e)}},F=t+" Iterator",N=v==g,R=!1,I=e.prototype,L=I[p]||I[f]||v&&I[v],_=L||A(v),P=v?N?A("entries"):_:void 0,D="Array"==t?I.entries||L:L;if(D&&(E=d(D.call(new e)),E!==Object.prototype&&(u(E,F,!0),n||s(E,p)||r(E,p,b))),N&&L&&L.name!==g&&(R=!0,_=function(){return L.call(this)}),n&&!w||!h&&!R&&I[p]||r(I,p,_),l[t]=_,l[F]=b,v)if(T={values:N?_:A(g),keys:S?_:A(m),entries:P},w)for(C in T)C in I||a(I,C,T[C]);else o(o.P+o.F*(h||R),t,T);return T}},function(e,t,i){var n=i(89),o=i(59).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,i){var n=i(26),o=i(22),a=i(136)(!1),r=i(66)("IE_PROTO");e.exports=function(e,t){var i,s=o(e),l=0,c=[];for(i in s)i!=r&&n(s,i)&&c.push(i);for(;t.length>l;)n(s,i=t[l++])&&(~a(c,i)||c.push(i));return c}},function(e,t,i){e.exports=i(32)},function(e,t){e.exports=window.crossroads},function(e,t){e.exports=window.progressJs},function(e,t,i){"use strict";var n=i(11),o=i.n(n),a=i(1),r=i(7),s=i(3),l=i(27),c=i(8),u=i(38);t.a=function(e){r.data.__APP__=e,r.$win.on("keydown",a.killCtrlACtrlS).on("unload",function(){r.data.bUnload=!0}),r.$html.addClass(r.bMobileDevice?"mobile":"no-mobile").on("click.dropdown.data-api",a.detectDropdownVisibility);var t=o.a.rl||{};t.i18n=c.i18n,t.createCommand=a.createCommandLegacy,t.addSettingsViewModel=l.b,t.addSettingsViewModelForAdmin=l.c,t.addHook=l.d,t.settingsGet=l.e,t.pluginSettingsGet=l.f,t.pluginRemoteRequest=l.g,t.EmailModel=u.EmailModel,t.Enums=s,o.a.rl=t,o.a.__APP_BOOT=function(t){i.i(a.domReady)(function(){o.a.setTimeout(function(){o.a.rainloopTEMPLATES&&o.a.rainloopTEMPLATES[0]?(o.a.document.getElementById("rl-templates").innerHTML=o.a.rainloopTEMPLATES[0],o.a.setTimeout(function(){r.$html.removeClass("no-js rl-booted-trigger").addClass("rl-booted"),e.bootstart()},s.Magics.Time10ms)):t(),o.a.__APP_BOOT=null},s.Magics.Time10ms)})}}},function(e,t,i){"use strict";function n(e){if(e in c.a&&c.a[e]&&c.a[e].setItem){var t=c.a[e],i="testLocalStorage_"+c.a.Math.random();try{if(t.setItem(i,i),i===t.getItem(i))return t.removeItem(i),!0}catch(e){}}return!1}function o(){return f(u)}function a(){var e="AuthAccountHash",t=c.a.__rlah_data();m(u,t&&t[e]?t[e]:""),b()}function r(){m(u,""),b()}function s(){return g()>y()+36e5&&(r(),!0)}var l=i(11),c=i.n(l);t.d=n,t.a=o,t.b=a,t.c=r,t.e=s;var u="__rlA",d="__rlT",p=n("sessionStorage")?c.a.sessionStorage||null:null,h=c.a.top||c.a||null,f=function(e){var t=null;if(p)t=p.getItem(e)||null;else if(h&&c.a.JSON){var i=h.name&&"{"===h.name.toString().substr(0,1)?c.a.JSON.parse(h.name.toString()):null;t=i?i[e]||null:null}return t},m=function(e,t){if(p)p.setItem(e,t);else if(h&&c.a.JSON){var i=h.name&&"{"===h.name.toString().substr(0,1)?c.a.JSON.parse(h.name.toString()):null;i=i||{},i[e]=t,h.name=c.a.JSON.stringify(i)}},g=function(){return c.a.Math.round((new c.a.Date).getTime()/1e3)},b=function(){return m(d,g())},y=function(){var e=f(d,0);return e?c.a.parseInt(e,10)||0:0};c.a.setInterval(b,6e4)},,,function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(6),r=i.n(a),s=i(2),l=i.n(s),c=function e(){var t=this;o()(this,e),this.identities=l.a.observableArray([]),this.identities.loading=l.a.observable(!1).extend({throttle:100}),this.identitiesIDS=l.a.computed(function(){return r.a.compact(r.a.map(t.identities(),function(e){return e?e.id:null}))})};t.a=new c},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(2),p=i.n(d),h=i(3),f=i(20),m=i(1),g=i(8),b=i(30),y=i(10),v=i(18),S=i(9),w=i(13);i.d(t,"FolderSystemPopupView",function(){return E}),i.d(t,"default",function(){return E});var T,C,E=(T=i.i(S.popup)({name:"View/Popup/FolderSystem",templateID:"PopupsFolderSystem"}),T(C=function(e){function t(){o()(this,t);var n=r()(this,e.call(this));n.sChooseOnText="",n.sUnuseText="",i.i(g.initOnStartOrLangChange)(function(){n.sChooseOnText=i.i(g.i18n)("POPUPS_SYSTEM_FOLDERS/SELECT_CHOOSE_ONE"),n.sUnuseText=i.i(g.i18n)("POPUPS_SYSTEM_FOLDERS/SELECT_UNUSE_NAME")}),n.notification=p.a.observable(""),n.folderSelectList=p.a.computed(function(){return i.i(m.folderListOptionsBuilder)([],b.a.folderList(),b.a.folderListSystemNames(),[["",n.sChooseOnText],[f.c,n.sUnuseText]],null,null,null,null,null,!0)}),n.sentFolder=b.a.sentFolder,n.draftFolder=b.a.draftFolder,n.spamFolder=b.a.spamFolder,n.trashFolder=b.a.trashFolder,n.archiveFolder=b.a.archiveFolder;var a=function(){y.settingsSet("SentFolder",b.a.sentFolder()),y.settingsSet("DraftFolder",b.a.draftFolder()),y.settingsSet("SpamFolder",b.a.spamFolder()),y.settingsSet("TrashFolder",b.a.trashFolder()),y.settingsSet("ArchiveFolder",b.a.archiveFolder())},s=u.a.debounce(function(){a(),v.a.saveSystemFolders(m.noop,{SentFolder:b.a.sentFolder(),DraftFolder:b.a.draftFolder(),SpamFolder:b.a.spamFolder(),TrashFolder:b.a.trashFolder(),ArchiveFolder:b.a.archiveFolder(),NullFolder:"NullFolder"})},h.Magics.Time1s),l=function(){a(),s()};return b.a.sentFolder.subscribe(l),b.a.draftFolder.subscribe(l),b.a.spamFolder.subscribe(l),b.a.trashFolder.subscribe(l),b.a.archiveFolder.subscribe(l),n.defautOptionsAfterRender=m.defautOptionsAfterRender,n}return l()(t,e),t.prototype.onShow=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.SetSystemFoldersNotification.None,t="";switch(e){case h.SetSystemFoldersNotification.Sent:t=i.i(g.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_SENT");break;case h.SetSystemFoldersNotification.Draft:t=i.i(g.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_DRAFTS");break;case h.SetSystemFoldersNotification.Spam:t=i.i(g.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_SPAM");break;case h.SetSystemFoldersNotification.Trash:t=i.i(g.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_TRASH");break;case h.SetSystemFoldersNotification.Archive:t=i.i(g.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_ARCHIVE")}this.notification(t)},t}(w.a))||C)},function(e,t){e.exports=window.Jua},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(11),u=i.n(c),d=i(12),p=i.n(d),h=i(6),f=i.n(h),m=i(2),g=i.n(m),b=i(19),y=i.n(b),v=i(175),S=i.n(v),w=i(7),T=i(1),C=i(3),E=i(14),A=i(8),F=i(102),N=i(29),R=i(10),I=i(53),L=i(57),_=i(54),P=i(9),D=i(114);i.d(t,"a",function(){return M});var M=function(e){function t(n){o()(this,t);var a=r()(this,e.call(this));return a.googlePreviewSupportedCache=null,a.isLocalAutocomplete=!0,a.iframe=null,a.lastErrorTime=0,a.iframe=p()('<iframe class="internal-hiddden" />').appendTo("body"),w.$win.on("error",function(e){if(e&&e.originalEvent&&e.originalEvent.message&&-1===i.i(T.inArray)(e.originalEvent.message,["Script error.","Uncaught Error: Error calling method on NPObject."])){var t=i.i(T.timestamp)();if(a.lastErrorTime>=t)return;a.lastErrorTime=t,n.jsError(T.noop,e.originalEvent.message,e.originalEvent.filename,e.originalEvent.lineno,u.a.location&&u.a.location.toString?u.a.location.toString():"",w.$html.attr("class"),i.i(T.microtime)()-w.startMicrotime)}}),w.$win.on("resize",function(){N.a("window.resize")}),N.b("window.resize",f.a.throttle(function(){var e=w.$win.height(),t=w.$win.height();w.$win.__sizes[0]===e&&w.$win.__sizes[1]===t||(w.$win.__sizes[0]=e,w.$win.__sizes[1]=t,N.a("window.resize.real"))},C.Magics.Time50ms)),w.$doc.on("keydown",function(e){e&&e.ctrlKey&&w.$html.addClass("rl-ctrl-key-pressed")}).on("keyup",function(e){e&&!e.ctrlKey&&w.$html.removeClass("rl-ctrl-key-pressed")}),w.$doc.on("mousemove keypress click",f.a.debounce(function(){N.a("rl.auto-logout-refresh")},C.Magics.Time5s)),y()("esc, enter",C.KeyState.All,function(){i.i(T.detectDropdownVisibility)()}),R.appSettingsGet("allowCmdInterface")&&y()("ctrl+shift+`",C.KeyState.All,function(){i.i(F.a)()}),a}return l()(t,e),t.prototype.remote=function(){return null},t.prototype.data=function(){return null},t.prototype.getApplicationConfiguration=function(e,t){return this.applicationConfiguration[e]||t},t.prototype.download=function(e){if(w.sUserAgent&&(-1<w.sUserAgent.indexOf("chrome")||-1<w.sUserAgent.indexOf("chrome"))){var t=u.a.document.createElement("a");if(t.href=e,u.a.document&&u.a.document.createEvent){var i=u.a.document.createEvent.MouseEvents;if(i&&i.initEvent&&t.dispatchEvent)return i.initEvent("click",!0,!0),t.dispatchEvent(i),!0}}return w.bMobileDevice?(u.a.open(e,"_self"),u.a.focus()):this.iframe.attr("src",e),!0},t.prototype.googlePreviewSupported=function(){return null===this.googlePreviewSupportedCache&&(this.googlePreviewSupportedCache=!!R.settingsGet("AllowGoogleSocial")&&!!R.settingsGet("AllowGoogleSocialPreview")),this.googlePreviewSupportedCache},t.prototype.setWindowTitle=function(e){e=i.i(T.isNormal)(e)&&0<e.length?""+e:"",R.settingsGet("Title")&&(e+=(e?" - ":"")+R.settingsGet("Title")),u.a.document.title=e+" ...",u.a.document.title=e},t.prototype.redirectToAdminPanel=function(){f.a.delay(function(){u.a.location.href=i.i(E.E)()},C.Magics.Time100ms)},t.prototype.clearClientSideToken=function(){u.a.__rlah_clear&&u.a.__rlah_clear()},t.prototype.setClientSideToken=function(e){u.a.__rlah_set&&(u.a.__rlah_set(e),R.settingsSet("AuthAccountHash",e),i.i(E.F)())},t.prototype.loginAndLogoutReload=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!!R.appSettingsGet("inIframe"),a=i.i(T.pString)(R.appSettingsGet("customLogoutLink"));t&&this.clearClientSideToken(),t&&n&&u.a.close&&u.a.close(),a=a||(e?i.i(E.E)():i.i(E.G)()),t&&u.a.location.href!==a?f.a.delay(function(){o&&u.a.parent?u.a.parent.location.href=a:u.a.location.href=a,w.$win.trigger("rl.tooltips.diactivate")},C.Magics.Time100ms):(i.i(P.routeOff)(),i.i(P.setHash)(i.i(E.z)(),!0),i.i(P.routeOff)(),f.a.delay(function(){o&&u.a.parent?u.a.parent.location.reload():u.a.location.reload(),w.$win.trigger("rl.tooltips.diactivate")},C.Magics.Time100ms))},t.prototype.historyBack=function(){u.a.history.back()},t.prototype.bootstart=function(){N.a("rl.bootstart");var e=R.appSettingsGet("mobile");g.a.components.register("SaveTrigger",i(109)),g.a.components.register("Input",i(106)),g.a.components.register("Select",i(111)),g.a.components.register("Radio",i(108)),g.a.components.register("TextArea",i(112)),g.a.components.register("Date",i(105)),g.a.components.register("x-script",i(110)),R.appSettingsGet("materialDesign")&&w.bAnimationSupported?(g.a.components.register("Checkbox",i(107)),g.a.components.register("CheckboxSimple",i(55))):(g.a.components.register("Checkbox",i(55)),g.a.components.register("CheckboxSimple",i(55))),i.i(A.initOnStartOrLangChange)(A.initNotificationLanguage),f.a.delay(T.windowResizeCallback,C.Magics.Time1s),N.b("ssm.mobile-enter",function(){i.i(w.leftPanelDisabled)(!0)}),N.b("ssm.mobile-leave",function(){i.i(w.leftPanelDisabled)(!1)}),R.appSettingsGet("loginGlassStyle")&&w.$html.addClass("glass"),e?(w.$html.addClass("ssm-state-mobile").addClass("rl-mobile"),N.a("ssm.mobile-enter")):(S.a.addState({id:"mobile",query:"(max-width: 767px)",onEnter:function(){w.$html.addClass("ssm-state-mobile"),N.a("ssm.mobile-enter")},onLeave:function(){w.$html.removeClass("ssm-state-mobile"),N.a("ssm.mobile-leave")}}),S.a.addState({id:"tablet",query:"(min-width: 768px) and (max-width: 999px)",onEnter:function(){w.$html.addClass("ssm-state-tablet")},onLeave:function(){w.$html.removeClass("ssm-state-tablet")}}),S.a.addState({id:"desktop",query:"(min-width: 1000px) and (max-width: 1400px)",onEnter:function(){w.$html.addClass("ssm-state-desktop")},onLeave:function(){w.$html.removeClass("ssm-state-desktop")}}),S.a.addState({id:"desktop-large",query:"(min-width: 1401px)",onEnter:function(){w.$html.addClass("ssm-state-desktop-large")},onLeave:function(){w.$html.removeClass("ssm-state-desktop-large")}})),w.leftPanelDisabled.subscribe(function(e){w.$html.toggleClass("rl-left-panel-disabled",e),w.$html.toggleClass("rl-left-panel-enabled",!e)}),w.leftPanelType.subscribe(function(e){w.$html.toggleClass("rl-left-panel-none","none"===e),w.$html.toggleClass("rl-left-panel-short","short"===e)}),w.leftPanelDisabled.valueHasMutated(),I.a.populate(),L.a.populate(),_.a.populate()},t}(D.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(7),l=i(14),c=i(29),u=i(1),d=function(){function e(){var t=this;if(o()(this,e),this.notificator=null,this.player=null,this.supported=!1,this.supportedMp3=!1,this.supportedOgg=!1,this.supportedWav=!1,this.supportedNotification=!1,this.player=this.createNewObject(),this.supported=!(s.bMobileDevice||s.bSafari||!this.player||!this.player.play),this.supported&&this.player&&this.player.canPlayType&&(this.supportedMp3=""!==this.player.canPlayType("audio/mpeg;").replace(/no/,""),this.supportedWav=""!==this.player.canPlayType('audio/wav; codecs="1"').replace(/no/,""),this.supportedOgg=""!==this.player.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""),this.supportedNotification=this.supported&&this.supportedMp3),this.player&&(this.supportedMp3||this.supportedOgg||this.supportedWav)||(this.supported=!1,this.supportedMp3=!1,this.supportedOgg=!1,this.supportedWav=!1,this.supportedNotification=!1),this.supported&&this.player){var i=function(){return t.stop()};this.player.addEventListener("ended",i),this.player.addEventListener("error",i),c.b("audio.api.stop",i)}}return e.prototype.createNewObject=function(){var e=r.a.Audio?new r.a.Audio:null;return e&&e.canPlayType&&e.pause&&e.play&&(e.preload="none",e.loop=!1,e.autoplay=!1,e.muted=!1),e},e.prototype.paused=function(){return!this.supported||!!this.player.paused},e.prototype.stop=function(){this.supported&&this.player.pause&&this.player.pause(),c.a("audio.stop")},e.prototype.pause=function(){this.stop()},e.prototype.clearName=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e=i.i(u.trim)(e),t&&"."+t===e.toLowerCase().substr((t.length+1)*-1)&&(e=i.i(u.trim)(e.substr(0,e.length-4))),""===e?"audio":e},e.prototype.playMp3=function(e,t){this.supported&&this.supportedMp3&&(this.player.src=e,this.player.play(),c.a("audio.start",[this.clearName(t,"mp3"),"mp3"]))},e.prototype.playOgg=function(e,t){this.supported&&this.supportedOgg&&(this.player.src=e,this.player.play(),t=this.clearName(t,"oga"),t=this.clearName(t,"ogg"),c.a("audio.start",[t,"ogg"]))},e.prototype.playWav=function(e,t){this.supported&&this.supportedWav&&(this.player.src=e,this.player.play(),c.a("audio.start",[this.clearName(t,"wav"),"wav"]))},e.prototype.playNotification=function(){this.supported&&this.supportedMp3&&(this.notificator||(this.notificator=this.createNewObject(),this.notificator.src=l.c("new-mail.mp3")),this.notificator&&this.notificator.play&&this.notificator.play())},e}();t.a=new d},function(e,t,i){"use strict";function n(e){return i(165).replace("{{ cmd }}",e)}function o(e){return e.find(".rl-cmd-history-data").empty(),""}function a(e){return i(166).replace("{{ commands }}",e.join(" "))}function r(e,t){return e&&-1<i.i(E.inArray)(e,t)?(i.i(E.changeTheme)(e),""):i(169).replace("{{ themes }}",t.join(", "))}function s(e,t,n){return e&&-1<i.i(E.inArray)(e,n)?(i.i(A.reload)(t,e),""):i(167).replace("{{ langs }}",n.join(", "))}function l(){return i(170).replace("{{ version }}",F.appSettingsGet("version")+" ("+F.appSettingsGet("appVersionType")+")")}function c(e){L||(L=new _(e),w.a.applyBindingAccessorsToNode(e[0],{translatorInit:!0,template:function(){return{name:"Cmd"}}},L))}function u(){null===I&&(I=b()("<div></div>"),I.appendTo(T.$body),c(I))}function d(){F.appSettingsGet("allowCmdInterface")&&(u(),v.a.delay(function(){L&&(L.opened(!L.opened()),L.opened()&&v.a.delay(function(){L&&L.focused&&L.focused(!0)},C.Magics.Time50ms))},C.Magics.Time50ms))}var p=i(0),h=i.n(p),f=i(11),m=i.n(f),g=i(12),b=i.n(g),y=i(6),v=i.n(y),S=i(2),w=i.n(S),T=i(7),C=i(3),E=i(1),A=i(8),F=i(10),N=i(57),R=i(53);t.a=d;var I=null,L=null,_=function(){function e(t){h()(this,e),this.dom=null,this.opened=w.a.observable(!1),this.cmd=w.a.observable(""),this.focused=w.a.observable(!1),this.themes=N.a.themes,this.cmdHistory=[],this.cmdHistoryShift=0,this.cmdHelper=w.a.observable(""),this.cmds=["help","version","clear","theme","lang"],this.cmdsWithParameters=["theme","lang"],this.isAdmin=!1,this.dom=t,this.isAdmin=!!F.appSettingsGet("admin")}return e.prototype.runCmd=function(e,t,i){var c="",u=null;if(this.cmdHelper(""),i){switch(e){case"lang":u=(this.isAdmin?R.a.languagesAdmin():R.a.languages()).filter(function(e){return 0===e.lastIndexOf(t,0)});break;case"theme":u=N.a.themes().filter(function(e){return 0===e.lastIndexOf(t,0)})}if(e&&u)if(1===u.length&&u[0])this.cmd(e+" "+u[0]);else if(1<u.length&&u[0]&&u[1]){for(var d="",p=0,h=u[0].split(""),f=h.length;p<f&&u[1][p]===h[p];p++)d+=h[p];d&&(this.cmdHelper("["+u.join(", ")+"]"),this.cmd(e+" "+d))}return""}switch(e){case"hi":c="hello";break;case"?":case"ls":case"help":c=a(this.cmds);break;case"v":case"version":c=l();break;case"clear":c=o(this.dom);break;case"theme":c=r(t,N.a.themes());break;case"lang":c=s(t,this.isAdmin,this.isAdmin?R.a.languagesAdmin():R.a.languages());break;default:c=n(e)}return c},e.prototype.onCmd=function(e){var t=this,n=this.cmd().replace(/[\s]+/," "),o=i.i(E.trim)(n).replace().split(/[\s]+/),a=o.shift();if(""===i.i(E.trim)(n))return!1;if(e)if(-1<i.i(E.inArray)(a,this.cmds)){var r=this.runCmd(a,o.join(" "),!0);r&&this.cmd(r)}else{var s=this.cmds.filter(function(e){return e!==a&&0===e.lastIndexOf(a,0)});1===s.length&&s[0]&&this.cmd(s[0]+(-1<i.i(E.inArray)(s[0],this.cmdsWithParameters)?" ":""))}else{this.cmdHistory.unshift(n),this.cmdHistory=v.a.uniq(this.cmdHistory),this.cmdHistoryShift=0;var l=this.runCmd(a,o.join(" "),!1),c=this.dom.find(".rl-cmd-history-data");c&&c[0]&&(c.append(b()("<div></div>").html(i(168).replace("{{ cmd }}",n))),l&&c.append(b()("<div></div>").html(l)),v.a.delay(function(){t.dom.find(".rl-cmd-history").scrollTop(c.height())},50))}return!0},e.prototype.onEsc=function(){return this.opened(!1),!1},e.prototype.onTab=function(){return this.onCmd(!0),!1},e.prototype.onEnter=function(){return this.onCmd(!1),this.cmd(""),!1},e.prototype.onKeyDown=function(e){if(e&&e.keyCode&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey&&0<this.cmdHistory.length){var t=m.a.parseInt(e.keyCode,10);if(C.EventKeyCode.Up===t||C.EventKeyCode.Down===t)return this.cmdHistory[this.cmdHistoryShift]?(this.cmd(this.cmdHistory[this.cmdHistoryShift]),C.EventKeyCode.Up===t?this.cmdHistoryShift+=1:C.EventKeyCode.Down===t&&(this.cmdHistoryShift-=1)):this.cmdHistoryShift=0,!1}return!0},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n={eml:"message/rfc822",mime:"message/rfc822",txt:"text/plain",text:"text/plain",def:"text/plain",list:"text/plain",in:"text/plain",ini:"text/plain",log:"text/plain",sql:"text/plain",cfg:"text/plain",conf:"text/plain",asc:"text/plain",rtx:"text/richtext",vcard:"text/vcard",vcf:"text/vcard",htm:"text/html",html:"text/html",csv:"text/csv",ics:"text/calendar",ifb:"text/calendar",xml:"text/xml",json:"application/json",swf:"application/x-shockwave-flash",hlp:"application/winhlp",wgt:"application/widget",chm:"application/vnd.ms-htmlhelp",
p10:"application/pkcs10",p7c:"application/pkcs7-mime",p7m:"application/pkcs7-mime",p7s:"application/pkcs7-signature",torrent:"application/x-bittorrent",js:"application/javascript",pl:"text/perl",css:"text/css",asp:"text/asp",php:"application/x-httpd-php",php3:"application/x-httpd-php",php4:"application/x-httpd-php",php5:"application/x-httpd-php",phtml:"application/x-httpd-php",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",jpe:"image/jpeg",jfif:"image/jpeg",gif:"image/gif",bmp:"image/bmp",cgm:"image/cgm",ief:"image/ief",ico:"image/x-icon",tif:"image/tiff",tiff:"image/tiff",svg:"image/svg+xml",svgz:"image/svg+xml",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",webp:"image/webp",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",exe:"application/x-msdownload",dll:"application/x-msdownload",scr:"application/x-msdownload",com:"application/x-msdownload",bat:"application/x-msdownload",msi:"application/x-msdownload",cab:"application/vnd.ms-cab-compressed",gz:"application/x-gzip",tgz:"application/x-gzip",bz:"application/x-bzip",bz2:"application/x-bzip2",deb:"application/x-debian-package",psf:"application/x-font-linux-psf",otf:"application/x-font-otf",pcf:"application/x-font-pcf",snf:"application/x-font-snf",ttf:"application/x-font-ttf",ttc:"application/x-font-ttf",mp3:"audio/mpeg",amr:"audio/amr",aac:"audio/x-aac",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",wav:"audio/x-wav",wma:"audio/x-ms-wma",wax:"audio/x-ms-wax",midi:"audio/midi",mp4a:"audio/mp4",ogg:"audio/ogg",weba:"audio/webm",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",rmp:"audio/x-pn-realaudio-plugin",m3u:"audio/x-mpegurl",flv:"video/x-flv",qt:"video/quicktime",mov:"video/quicktime",wmv:"video/windows-media",avi:"video/x-msvideo",mpg:"video/mpeg",mpeg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",jpgv:"video/jpgv",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",ogv:"video/ogg",webm:"video/webm",m4v:"video/x-m4v",asf:"video/x-ms-asf",asx:"video/x-ms-asf",wm:"video/x-ms-wm",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx",movie:"video/x-sgi-movie",pdf:"application/pdf",psd:"image/vnd.adobe.photoshop",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",doc:"application/msword",dot:"application/msword",rtf:"application/rtf",xls:"application/vnd.ms-excel",ppt:"application/vnd.ms-powerpoint",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",odt:"application/vnd.oasis.opendocument.text",ods:"application/vnd.oasis.opendocument.spreadsheet"}},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(2),p=i.n(d),h=i(1),f=i(17);i.d(t,"a",function(){return m});var m=function(e){function t(n){o()(this,t);var a=r()(this,e.call(this));return a.values=p.a.observableArray([]),a.value=n.value,!i.i(h.isUnd)(a.value)&&a.value.subscribe||(a.value=p.a.observable("")),a.inline=!i.i(h.isUnd)(n.inline)&&n.inline,a.readOnly=!i.i(h.isUnd)(n.readOnly)&&!!n.readOnly,n.values&&a.values(u.a.map(n.values,function(e,t){return{label:e,value:t}})),a.click=u.a.bind(a.click,a),a}return l()(t,e),t.prototype.click=function(e){!this.readOnly&&e&&this.value(e.value)},t}(f.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(17),u=i(48),d=function(e){function t(){return o()(this,t),r()(this,e.apply(this,arguments))}return l()(t,e),t}(u.a);e.exports=i.i(c.b)(d,"DateComponent")},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(17),u=i(48),d=function(e){function t(){return o()(this,t),r()(this,e.apply(this,arguments))}return l()(t,e),t}(u.a);e.exports=i.i(c.b)(d,"InputComponent")},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(2),p=i.n(d),h=i(17),f=i(77),m=function(e){function t(i){o()(this,t);var n=r()(this,e.call(this,i));return n.animationBox=p.a.observable(!1).extend({falseTimeout:200}),n.animationCheckmark=p.a.observable(!1).extend({falseTimeout:200}),n.animationBoxSetTrue=u.a.bind(n.animationBoxSetTrue,n),n.animationCheckmarkSetTrue=u.a.bind(n.animationCheckmarkSetTrue,n),n.disposable.push(n.value.subscribe(function(e){n.triggerAnimation(e)},n)),n}return l()(t,e),t.prototype.animationBoxSetTrue=function(){this.animationBox(!0)},t.prototype.animationCheckmarkSetTrue=function(){this.animationCheckmark(!0)},t.prototype.triggerAnimation=function(e){e?(this.animationBoxSetTrue(),u.a.delay(this.animationCheckmarkSetTrue,200)):(this.animationCheckmarkSetTrue(),u.a.delay(this.animationBoxSetTrue,200))},t}(f.a);e.exports=i.i(h.b)(m,"CheckboxMaterialDesignComponent")},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(17),u=i(104),d=function(e){function t(){return o()(this,t),r()(this,e.apply(this,arguments))}return l()(t,e),t}(u.a);e.exports=i.i(c.b)(d,"RadioComponent")},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(1),u=i(3),d=i(17),p=function(e){function t(i){o()(this,t);var n=r()(this,e.call(this));return n.element=i.element||null,n.value=i.value&&i.value.subscribe?i.value:null,n.element&&(n.value?(n.element.css("display","inline-block"),i.verticalAlign&&n.element.css("vertical-align",i.verticalAlign),n.setState(n.value()),n.disposable.push(n.value.subscribe(n.setState,n))):n.element.hide()),n}return l()(t,e),t.prototype.setState=function(e){switch(i.i(c.pInt)(e)){case u.SaveSettingsStep.TrueResult:this.element.find(".animated,.error").hide().removeClass("visible").end().find(".success").show().addClass("visible");break;case u.SaveSettingsStep.FalseResult:this.element.find(".animated,.success").hide().removeClass("visible").end().find(".error").show().addClass("visible");break;case u.SaveSettingsStep.Animate:this.element.find(".error,.success").hide().removeClass("visible").end().find(".animated").show().addClass("visible");break;case u.SaveSettingsStep.Idle:default:this.element.find(".animated").hide().end().find(".error,.success").removeClass("visible")}},t}(d.a);e.exports=i.i(d.b)(p,"SaveTriggerComponent")},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(12),u=i.n(c),d=i(17),p=function(e){function t(i){o()(this,t);var n=r()(this,e.call(this));if(i.component&&i.component.templateNodes&&i.element&&i.element[0]&&i.element[0].outerHTML){var a=i.element[0].outerHTML;a=a?a.replace(/<x-script/i,"<script").replace(/<b><\/b><\/x-script>/i,"</script>"):"",a?(i.element.text(""),i.element.replaceWith(u()(a).text(i.component.templateNodes[0]&&i.component.templateNodes[0].nodeValue?i.component.templateNodes[0].nodeValue:""))):i.element.remove()}return n}return l()(t,e),t}(d.a);e.exports=i.i(d.b)(p,"ScriptComponent")},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(8),u=i(1),d=i(17),p=i(48),h=function(e){function t(n){o()(this,t);var a=r()(this,e.call(this,n));return a.options=n.options||"",a.optionsText=n.optionsText||null,a.optionsValue=n.optionsValue||null,a.optionsCaption=n.optionsCaption||null,a.optionsCaption&&(a.optionsCaption=i.i(c.i18n)(a.optionsCaption)),a.defautOptionsAfterRender=u.defautOptionsAfterRender,a}return l()(t,e),t}(p.a);e.exports=i.i(d.b)(h,"SelectComponent")},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(1),u=i(17),d=i(48),p=5,h=function(e){function t(n){o()(this,t);var a=r()(this,e.call(this,n));return a.rows=n.rows||p,a.spellcheck=!i.i(c.isUnd)(n.spellcheck)&&!!n.spellcheck,a}return l()(t,e),t}(d.a);e.exports=i.i(u.b)(h,"TextAreaComponent")},function(e,t,i){"use strict";var n=i(11),o=i.n(n);i.d(t,"a",function(){return a});var a=o.a.Opentip||{};a.styles=a.styles||{},a.styles.rainloop={extends:"standard",fixed:!0,target:!0,delay:.2,hideDelay:0,hideEffect:"fade",hideEffectDuration:.2,showEffect:"fade",showEffectDuration:.2,showOn:"mouseover click",removeElementsOnHide:!0,background:"#fff",shadow:!1,borderColor:"#999",borderRadius:2,borderWidth:1},a.styles.rainloopTip={extends:"rainloop",delay:.4,group:"rainloopTips"},a.styles.rainloopErrorTip={extends:"rainloop",className:"rainloopErrorTip"}},function(e,t,i){"use strict";var n=i(0),o=i.n(n);i.d(t,"a",function(){return a});var a=function(){function e(){o()(this,e)}return e.prototype.bootstart=function(){},e}()},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(6),l=i.n(s),c=i(12),u=i.n(c),d=i(20),p=i(3),h=i(1),f=i(7),m=i(14),g=i(27),b=i(10);i.d(t,"a",function(){return y});var y=function(){function e(){o()(this,e),this.oRequests={}}return e.prototype.defaultResponse=function(e,t,n,o,a,r){var s=function(){p.StorageResultType.Success!==n&&f.data.bUnload&&(n=p.StorageResultType.Unload),p.StorageResultType.Success===n&&o&&!o.Result?(o&&-1<i.i(h.inArray)(o.ErrorCode,[p.Notification.AuthError,p.Notification.AccessError,p.Notification.ConnectionError,p.Notification.DomainNotAllowed,p.Notification.AccountNotAllowed,p.Notification.MailServerError,p.Notification.UnknownNotification,p.Notification.UnknownError])&&(f.data.iAjaxErrorCount+=1),o&&p.Notification.InvalidToken===o.ErrorCode&&(f.data.iTokenErrorCount+=1),d.e<f.data.iTokenErrorCount&&f.data.__APP__&&f.data.__APP__.loginAndLogoutReload&&f.data.__APP__.loginAndLogoutReload(!1,!0),(o.ClearAuth||o.Logout||d.f<f.data.iAjaxErrorCount)&&f.data.__APP__&&f.data.__APP__.clearClientSideToken&&(f.data.__APP__.clearClientSideToken(),!o.ClearAuth&&f.data.__APP__.loginAndLogoutReload&&f.data.__APP__.loginAndLogoutReload(!1,!0))):p.StorageResultType.Success===n&&o&&o.Result&&(f.data.iAjaxErrorCount=0,f.data.iTokenErrorCount=0),i.i(g.a)("ajax-default-response",[t,p.StorageResultType.Success===n?o:null,n,a,r]),e&&e(n,p.StorageResultType.Success===n?o:null,a,t,r)};switch(n){case"success":n=p.StorageResultType.Success;break;case"abort":n=p.StorageResultType.Abort;break;default:n=p.StorageResultType.Error}p.StorageResultType.Error===n?l.a.delay(s,300):s()},e.prototype.ajaxRequest=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2e4,o=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],c=""===a,d={},p=(new r.a.Date).getTime(),f="";t=t||{},f=t.Action||"",f&&0<s.length&&l.a.each(s,function(e){o.oRequests[e]&&(o.oRequests[e].__aborted=!0,o.oRequests[e].abort&&o.oRequests[e].abort(),o.oRequests[e]=null)}),c&&(t.XToken=b.appSettingsGet("token"));var g=u.a.ajax({type:c?"POST":"GET",url:i.i(m.k)(a),async:!0,dataType:"json",data:c?t:{},headers:d,timeout:n,global:!0});return g.always(function(n,a){var s=!1;n&&n.Time&&(s=i.i(h.pInt)(n.Time)>(new r.a.Date).getTime()-p),f&&o.oRequests[f]&&(o.oRequests[f].__aborted&&(a="abort"),o.oRequests[f]=null),o.defaultResponse(e,f,a,n,s,t)}),f&&0<s.length&&-1<i.i(h.inArray)(f,s)&&(this.oRequests[f]&&(this.oRequests[f].__aborted=!0,this.oRequests[f].abort&&this.oRequests[f].abort(),this.oRequests[f]=null),this.oRequests[f]=g),g},e.prototype.defaultRequest=function(e,t,n,o,a,r){return n=n||{},n.Action=t,a=i.i(h.pString)(a),i.i(g.a)("ajax-default-request",[t,n,a]),this.ajaxRequest(e,n,i.i(h.isUnd)(o)?d.g:i.i(h.pInt)(o),a,r)},e.prototype.noop=function(e){this.defaultRequest(e,"Noop")},e.prototype.jsError=function(e,t,i,n,o,a,r){this.defaultRequest(e,"JsError",{Message:t,FileName:i,LineNo:n,Location:o,HtmlCapa:a,TimeOnPage:r})},e.prototype.jsInfo=function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.defaultRequest(e,"JsInfo",{Type:t,Data:i,IsError:n?"1":"0"})},e.prototype.getPublicKey=function(e){this.defaultRequest(e,"GetPublicKey")},e.prototype.jsVersion=function(e,t){this.defaultRequest(e,"Version",{Version:t})},e}()},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(12),p=i.n(d),h=i(2),f=i.n(h),m=i(7),g=i(1),b=i(14),y=i(9),v=i(72);i.d(t,"a",function(){return S});var S=function(e){function t(i){o()(this,t);var n=r()(this,e.call(this,"settings",i));return n.menu=f.a.observableArray([]),n.oCurrentSubScreen=null,n.oViewModelPlace=null,n.setupSettings(),n}return l()(t,e),t.prototype.setupSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e&&e()},t.prototype.onRoute=function(e){var t=this,n=null,o=null,a=null,r=null;if(o=u.a.find(m.VIEW_MODELS.settings,function(t){return t&&t.__rlSettingsData&&e===t.__rlSettingsData.Route}),o&&(u.a.find(m.VIEW_MODELS["settings-removed"],function(e){return e&&e===o})&&(o=null),o&&u.a.find(m.VIEW_MODELS["settings-disabled"],function(e){return e&&e===o})&&(o=null)),o){if(o.__builded&&o.__vm)n=o.__vm;else if(a=this.oViewModelPlace,a&&1===a.length){n=new o,r=p()("<div></div>").addClass("rl-settings-view-model").hide(),r.appendTo(a),n.viewModelDom=r,n.__rlSettingsData=o.__rlSettingsData,o.__dom=r,o.__builded=!0,o.__vm=n;var s={name:o.__rlSettingsData.Template};f.a.applyBindingAccessorsToNode(r[0],{translatorInit:!0,template:function(){return s}},n),i.i(g.delegateRun)(n,"onBuild",[r])}else i.i(g.log)("Cannot find sub settings view model position: SettingsSubScreen");n&&u.a.defer(function(){t.oCurrentSubScreen&&(i.i(g.delegateRun)(t.oCurrentSubScreen,"onHide"),t.oCurrentSubScreen.viewModelDom.hide()),t.oCurrentSubScreen=n,t.oCurrentSubScreen&&(i.i(g.delegateRun)(t.oCurrentSubScreen,"onBeforeShow"),t.oCurrentSubScreen.viewModelDom.show(),i.i(g.delegateRun)(t.oCurrentSubScreen,"onShow"),i.i(g.delegateRun)(t.oCurrentSubScreen,"onShowWithDelay",[],200),u.a.each(t.menu(),function(e){e.selected(n&&n.__rlSettingsData&&e.route===n.__rlSettingsData.Route)}),p()("#rl-content .b-settings .b-content .content").scrollTop(0)),i.i(g.windowResize)()})}else i.i(y.setHash)(i.i(b.q)(),!1,!0)},t.prototype.onHide=function(){this.oCurrentSubScreen&&this.oCurrentSubScreen.viewModelDom&&(i.i(g.delegateRun)(this.oCurrentSubScreen,"onHide"),this.oCurrentSubScreen.viewModelDom.hide())},t.prototype.onBuild=function(){var e=this;u.a.each(m.VIEW_MODELS.settings,function(t){t&&t.__rlSettingsData&&!u.a.find(m.VIEW_MODELS["settings-removed"],function(e){return e&&e===t})&&e.menu.push({route:t.__rlSettingsData.Route,label:t.__rlSettingsData.Label,selected:f.a.observable(!1),disabled:!!u.a.find(m.VIEW_MODELS["settings-disabled"],function(e){return e&&e===t})})}),this.oViewModelPlace=p()("#rl-content #rl-settings-subscreen")},t.prototype.routes=function(){var e=u.a.find(m.VIEW_MODELS.settings,function(e){return e&&e.__rlSettingsData&&e.__rlSettingsData.IsDefault}),t=e&&e.__rlSettingsData?e.__rlSettingsData.Route:"general",n={subname:/^(.*)$/,normalize_:function(e,n){return n.subname=i.i(g.isUnd)(n.subname)?t:i.i(g.pString)(n.subname),[n.subname]}};return[["{subname}/",n],["{subname}",n],["",n]]},t}(v.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(7),l=i(10);i.d(t,"a",function(){return c});var c=function(){function e(){o()(this,e),this.allowLanguagesOnSettings=r.a.observable(!0),this.allowLanguagesOnLogin=r.a.observable(!0),this.newMoveToFolder=r.a.observable(!0),this.interfaceAnimation=r.a.observable(!0),this.interfaceAnimation.subscribe(function(e){var t=s.bMobileDevice||!e;s.$html.toggleClass("rl-anim",!t).toggleClass("no-rl-anim",t)}),this.interfaceAnimation.valueHasMutated(),this.prem=r.a.observable(!1),this.community=r.a.observable(!0)}return e.prototype.populate=function(){this.allowLanguagesOnLogin(!!l.settingsGet("AllowLanguagesOnLogin")),this.allowLanguagesOnSettings(!!l.settingsGet("AllowLanguagesOnSettings")),this.newMoveToFolder(!!l.settingsGet("NewMoveToFolder")),this.interfaceAnimation(!!l.settingsGet("InterfaceAnimation")),this.prem(!!l.settingsGet("PremType")),this.community(!!l.settingsGet("Community"))},e}()},,,function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(3),l=i(10),c=function(){function e(){o()(this,e),this.contacts=r.a.observableArray([]),this.contacts.loading=r.a.observable(!1).extend({throttle:s.Magics.Time200ms}),this.contacts.importing=r.a.observable(!1).extend({throttle:s.Magics.Time200ms}),this.contacts.syncing=r.a.observable(!1).extend({throttle:s.Magics.Time200ms}),this.contacts.exportingVcf=r.a.observable(!1).extend({throttle:s.Magics.Time200ms}),this.contacts.exportingCsv=r.a.observable(!1).extend({throttle:s.Magics.Time200ms}),this.allowContactsSync=r.a.observable(!1),this.enableContactsSync=r.a.observable(!1),this.contactsSyncUrl=r.a.observable(""),this.contactsSyncUser=r.a.observable(""),this.contactsSyncPass=r.a.observable("")}return e.prototype.populate=function(){this.allowContactsSync(!!l.settingsGet("ContactsSyncIsAllowed")),this.enableContactsSync(!!l.settingsGet("EnableContactsSync")),this.contactsSyncUrl(l.settingsGet("ContactsSyncUrl")),this.contactsSyncUser(l.settingsGet("ContactsSyncUser")),this.contactsSyncPass(l.settingsGet("ContactsSyncPassword"))},e}();t.a=new c},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(2),l=i.n(s),c=i(3),u=i(29),d=i(101),p=i(10),h=function(){function e(){var t=this;o()(this,e),this.enableSoundNotification=l.a.observable(!1),this.soundNotificationIsSupported=l.a.observable(!1),this.allowDesktopNotification=l.a.observable(!1),this.desktopNotificationPermissions=l.a.computed(function(){t.allowDesktopNotification();var e=c.DesktopNotification.NotSupported,i=t.notificationClass();if(i&&i.permission)switch(i.permission.toLowerCase()){case"granted":e=c.DesktopNotification.Allowed;break;case"denied":e=c.DesktopNotification.Denied;break;case"default":e=c.DesktopNotification.NotAllowed}else r.a.webkitNotifications&&r.a.webkitNotifications.checkPermission&&(e=r.a.webkitNotifications.checkPermission());return e}).extend({notify:"always"}),this.enableDesktopNotification=l.a.computed({read:function(){return t.allowDesktopNotification()&&c.DesktopNotification.Allowed===t.desktopNotificationPermissions()},write:function(e){if(e){var i=t.notificationClass(),n=t.desktopNotificationPermissions();i&&c.DesktopNotification.Allowed===n?t.allowDesktopNotification(!0):i&&c.DesktopNotification.NotAllowed===n?i.requestPermission(function(){t.allowDesktopNotification.valueHasMutated(),c.DesktopNotification.Allowed===t.desktopNotificationPermissions()?t.allowDesktopNotification()?t.allowDesktopNotification.valueHasMutated():t.allowDesktopNotification(!0):t.allowDesktopNotification()?t.allowDesktopNotification(!1):t.allowDesktopNotification.valueHasMutated()}):t.allowDesktopNotification(!1)}else t.allowDesktopNotification(!1)}}).extend({notify:"always"}),this.enableDesktopNotification.valueHasMutated||(this.enableDesktopNotification.valueHasMutated=function(){t.allowDesktopNotification.valueHasMutated()}),this.computers(),this.initNotificationPlayer()}return e.prototype.computers=function(){var e=this;this.isDesktopNotificationSupported=l.a.computed(function(){return c.DesktopNotification.NotSupported!==e.desktopNotificationPermissions()}),this.isDesktopNotificationDenied=l.a.computed(function(){return c.DesktopNotification.NotSupported===e.desktopNotificationPermissions()||c.DesktopNotification.Denied===e.desktopNotificationPermissions()})},e.prototype.initNotificationPlayer=function(){d.a&&d.a.supportedNotification?this.soundNotificationIsSupported(!0):(this.enableSoundNotification(!1),this.soundNotificationIsSupported(!1))},e.prototype.playSoundNotification=function(e){d.a&&d.a.supportedNotification&&(!!e||this.enableSoundNotification())&&d.a.playNotification()},e.prototype.displayDesktopNotification=function(e,t,i,n){if(this.enableDesktopNotification()){var o=this.notificationClass(),a=o?new o(t,{body:i,icon:e}):null;a&&(a.show&&a.show(),n&&(a.onclick=function(){r.a.focus(),n.Folder&&n.Uid&&u.a("mailbox.message.show",[n.Folder,n.Uid])}),r.a.setTimeout(function(e){return function(){e.cancel?e.cancel():e.close&&e.close()}}(a),c.Magics.Time7s))}},e.prototype.populate=function(){this.enableSoundNotification(!!p.settingsGet("SoundNotification")),this.enableDesktopNotification(!!p.settingsGet("DesktopNotifications"))},e.prototype.notificationClass=function(){return r.a.Notification&&r.a.Notification.requestPermission?r.a.Notification:null},e}();t.a=new h},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(2),h=i.n(p),f=i(3),m=i(1),g=i(8),b=i(18),y=i(16),v=i(9),S=i(13);i.d(t,"AccountPopupView",function(){return A}),i.d(t,"default",function(){return A});var w,T,C,E,A=(w=i.i(v.popup)({name:"View/Popup/Account",templateID:"PopupsAccount"}),T=i.i(v.command)(function(e){return!e.submitRequest()}),w((E=function(e){function t(){s()(this,t);var i=c()(this,e.call(this));return i.isNew=h.a.observable(!0),i.email=h.a.observable(""),i.password=h.a.observable(""),i.emailError=h.a.observable(!1),i.passwordError=h.a.observable(!1),i.email.subscribe(function(){i.emailError(!1)}),i.password.subscribe(function(){i.passwordError(!1)}),i.submitRequest=h.a.observable(!1),i.submitError=h.a.observable(""),i.submitErrorAdditional=h.a.observable(""),i.emailFocus=h.a.observable(!1),i}return d()(t,e),t.prototype.addAccountCommand=function(){var e=this;return this.emailError(""===i.i(m.trim)(this.email())),this.passwordError(""===i.i(m.trim)(this.password())),!this.emailError()&&!this.passwordError()&&(this.submitRequest(!0),b.a.accountSetup(function(t,n){e.submitRequest(!1),f.StorageResultType.Success===t&&n?n.Result?(i.i(y.a)().accountsAndIdentities(),e.cancelCommand()):(e.submitError(n.ErrorCode?i.i(g.getNotification)(n.ErrorCode):i.i(g.getNotification)(f.Notification.UnknownError)),n.ErrorMessageAdditional&&e.submitErrorAdditional(n.ErrorMessageAdditional)):(e.submitError(i.i(g.getNotification)(f.Notification.UnknownError)),e.submitErrorAdditional(""))},this.email(),this.password(),this.isNew()),!0)},t.prototype.clearPopup=function(){this.isNew(!0),this.email(""),this.password(""),this.emailError(!1),this.passwordError(!1),this.submitRequest(!1),this.submitError(""),this.submitErrorAdditional("")},t.prototype.onShow=function(e){this.clearPopup(),e&&e.canBeEdit()&&(this.isNew(!1),this.email(e.email))},t.prototype.onShowWithDelay=function(){this.emailFocus(!0)},t}(S.a),n(E.prototype,"addAccountCommand",[T],a()(E.prototype,"addAccountCommand"),E.prototype),C=E))||C)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(11),h=i.n(p),f=i(6),m=i.n(f),g=i(12),b=i.n(g),y=i(2),v=i.n(y),S=i(19),w=i.n(S),T=i(99),C=i.n(T),E=i(3),A=i(1),F=i(20),N=i(7),R=i(178),I=i(14),L=i(8),_=i(40),P=i(120),D=i(18),M=i(10),k=i(38),O=i(204),x=i(205),U=i(16),H=i(9),B=i(13);i.d(t,"ContactsPopupView",function(){return J}),i.d(t,"default",function(){return J});var G,K,V,z,j,q,W,Y,$,J=(G=i.i(H.popup)({name:"View/Popup/Contacts",templateID:"PopupsContacts"}),K=i.i(H.command)(),V=i.i(H.command)(function(e){return 0<e.contactsCheckedOrSelected().length}),z=i.i(H.command)(function(e){return 0<e.contactsCheckedOrSelected().length}),j=i.i(H.command)(),q=i.i(H.command)(function(e){var t=e.viewHasNonEmptyRequaredProperties(),i=e.viewReadOnly();return!e.viewSaving()&&t&&!i}),W=i.i(H.command)(function(e){return!e.contacts.syncing()&&!e.contacts.importing()}),G(($=function(e){function t(){s()(this,t);var n=c()(this,e.call(this)),o=function(e){e&&0<e.length&&(n.viewProperties.removeAll(e),i.i(A.delegateRunOnDestroy)(e))};return n.bBackToCompose=!1,n.sLastComposeFocusedField="",n.allowContactsSync=P.a.allowContactsSync,n.enableContactsSync=P.a.enableContactsSync,n.allowExport=!N.bMobileDevice,n.search=v.a.observable(""),n.contactsCount=v.a.observable(0),n.contacts=P.a.contacts,n.currentContact=v.a.observable(null),n.importUploaderButton=v.a.observable(null),n.contactsPage=v.a.observable(1),n.contactsPageCount=v.a.computed(function(){var e=h.a.Math.ceil(n.contactsCount()/F.m);return 0>=e?1:e}),n.contactsPagenator=v.a.computed(i.i(A.computedPagenatorHelper)(n.contactsPage,n.contactsPageCount)),n.emptySelection=v.a.observable(!0),n.viewClearSearch=v.a.observable(!1),n.viewID=v.a.observable(""),n.viewReadOnly=v.a.observable(!1),n.viewProperties=v.a.observableArray([]),n.viewSaveTrigger=v.a.observable(E.SaveSettingsStep.Idle),n.viewPropertiesNames=n.viewProperties.filter(function(e){return-1<i.i(A.inArray)(e.type(),[E.ContactPropertyType.FirstName,E.ContactPropertyType.LastName])}),n.viewPropertiesOther=n.viewProperties.filter(function(e){return-1<i.i(A.inArray)(e.type(),[E.ContactPropertyType.Note])}),n.viewPropertiesOther=v.a.computed(function(){var e=m.a.filter(n.viewProperties(),function(e){return-1<i.i(A.inArray)(e.type(),[E.ContactPropertyType.Nick])});return m.a.sortBy(e,function(e){return e.type()})}),n.viewPropertiesEmails=n.viewProperties.filter(function(e){return E.ContactPropertyType.Email===e.type()}),n.viewPropertiesWeb=n.viewProperties.filter(function(e){return E.ContactPropertyType.Web===e.type()}),n.viewHasNonEmptyRequaredProperties=v.a.computed(function(){var e=n.viewPropertiesNames(),t=n.viewPropertiesEmails(),o=function(e){return""!==i.i(A.trim)(e.value())};return!(!m.a.find(e,o)&&!m.a.find(t,o))}),n.viewPropertiesPhones=n.viewProperties.filter(function(e){return E.ContactPropertyType.Phone===e.type()}),n.viewPropertiesEmailsNonEmpty=n.viewPropertiesNames.filter(function(e){return""!==i.i(A.trim)(e.value())}),n.viewPropertiesEmailsEmptyAndOnFocused=n.viewPropertiesEmails.filter(function(e){var t=e.focused();return""===i.i(A.trim)(e.value())&&!t}),n.viewPropertiesPhonesEmptyAndOnFocused=n.viewPropertiesPhones.filter(function(e){var t=e.focused();return""===i.i(A.trim)(e.value())&&!t}),n.viewPropertiesWebEmptyAndOnFocused=n.viewPropertiesWeb.filter(function(e){var t=e.focused();return""===i.i(A.trim)(e.value())&&!t}),n.viewPropertiesOtherEmptyAndOnFocused=v.a.computed(function(){return m.a.filter(n.viewPropertiesOther(),function(e){var t=e.focused();return""===i.i(A.trim)(e.value())&&!t})}),n.viewPropertiesEmailsEmptyAndOnFocused.subscribe(function(e){o(e)}),n.viewPropertiesPhonesEmptyAndOnFocused.subscribe(function(e){o(e)}),n.viewPropertiesWebEmptyAndOnFocused.subscribe(function(e){o(e)}),n.viewPropertiesOtherEmptyAndOnFocused.subscribe(function(e){o(e)}),n.viewSaving=v.a.observable(!1),n.useCheckboxesInList=_.a.useCheckboxesInList,n.search.subscribe(function(){n.reloadContactList()}),n.contacts.subscribe(A.windowResizeCallback),n.viewProperties.subscribe(A.windowResizeCallback),n.contactsChecked=v.a.computed(function(){return m.a.filter(n.contacts(),function(e){return e.checked()})}),n.contactsCheckedOrSelected=v.a.computed(function(){var e=n.contactsChecked(),t=n.currentContact();return m.a.union(e,t?[t]:[])}),n.contactsCheckedOrSelectedUids=v.a.computed(function(){return m.a.map(n.contactsCheckedOrSelected(),function(e){return e.idContact})}),n.selector=new R.a(n.contacts,n.currentContact,null,".e-contact-item .actionHandle",".e-contact-item.selected",".e-contact-item .checkboxItem",".e-contact-item.focused"),n.selector.on("onItemSelect",function(e){n.populateViewContact(e?e:null),e||n.emptySelection(!0)}),n.selector.on("onItemGetUid",function(e){return e?e.generateUid():""}),n.bDropPageAfterDelete=!1,n.watchDirty=v.a.observable(!1),n.watchHash=v.a.observable(!1),n.viewHash=v.a.computed(function(){return""+m.a.map(n.viewProperties(),function(e){return e.value()}).join("")}),n.viewHash.subscribe(function(){!n.watchHash()||n.viewReadOnly()||n.watchDirty()||n.watchDirty(!0)}),n.sDefaultKeyScope=E.KeyState.ContactList,n}return d()(t,e),t.prototype.newCommand=function(){this.populateViewContact(null),this.currentContact(null)},t.prototype.deleteCommand=function(){this.deleteSelectedContacts(),this.emptySelection(!0)},t.prototype.newMessageCommand=function(){if(!M.capa(E.Capa.Composer))return!1;var e=[],t=null,n=null,o=null,a=this.contactsCheckedOrSelected();if(i.i(A.isNonEmptyArray)(a)&&(e=m.a.map(a,function(e){if(e){var t=e.getNameAndEmailHelper(),i=t?new k.EmailModel(t[0],t[1]):null;if(i&&i.validate())return i}return null}),e=m.a.compact(e)),i.i(A.isNonEmptyArray)(e)){switch(this.bBackToCompose=!1,i.i(H.hideScreenPopup)(i(123)),this.sLastComposeFocusedField){case"cc":n=e;break;case"bcc":o=e;break;case"to":default:t=e}this.sLastComposeFocusedField="",m.a.delay(function(){i.i(H.showScreenPopup)(i(37),[E.ComposeType.Empty,null,t,n,o])},E.Magics.Time200ms)}return!0},t.prototype.clearCommand=function(){this.search("")},t.prototype.saveCommand=function(){var e=this;this.viewSaving(!0),this.viewSaveTrigger(E.SaveSettingsStep.Animate);var t=i.i(A.fakeMd5)(),n=[];m.a.each(this.viewProperties(),function(e){e.type()&&""!==i.i(A.trim)(e.value())&&n.push([e.type(),e.value(),e.typeStr()])}),D.a.contactSave(function(n,o){var a=!1;e.viewSaving(!1),E.StorageResultType.Success===n&&o&&o.Result&&o.Result.RequestUid===t&&0<i.i(A.pInt)(o.Result.ResultID)&&(""===e.viewID()&&e.viewID(i.i(A.pInt)(o.Result.ResultID)),e.reloadContactList(),a=!0),m.a.delay(function(){e.viewSaveTrigger(a?E.SaveSettingsStep.TrueResult:E.SaveSettingsStep.FalseResult)},E.Magics.Time350ms),a&&(e.watchDirty(!1),m.a.delay(function(){e.viewSaveTrigger(E.SaveSettingsStep.Idle)},E.Magics.Time1s))},t,this.viewID(),n)},t.prototype.syncCommand=function(){var e=this;i.i(U.a)().contactsSync(function(t,n){E.StorageResultType.Success===t&&n&&n.Result||h.a.alert(i.i(L.getNotification)(n&&n.ErrorCode?n.ErrorCode:E.Notification.ContactsSyncError)),e.reloadContactList(!0)})},t.prototype.getPropertyPlaceholder=function(e){var t="";switch(e){case E.ContactPropertyType.LastName:t="CONTACTS/PLACEHOLDER_ENTER_LAST_NAME";break;case E.ContactPropertyType.FirstName:t="CONTACTS/PLACEHOLDER_ENTER_FIRST_NAME";break;case E.ContactPropertyType.Nick:t="CONTACTS/PLACEHOLDER_ENTER_NICK_NAME"}return t},t.prototype.addNewProperty=function(e,t){this.viewProperties.push(new x.a(e,t||"","",(!0),this.getPropertyPlaceholder(e)))},t.prototype.addNewOrFocusProperty=function(e,t){var i=m.a.find(this.viewProperties(),function(t){return e===t.type()});i?i.focused(!0):this.addNewProperty(e,t)},t.prototype.addNewEmail=function(){this.addNewProperty(E.ContactPropertyType.Email,"Home")},t.prototype.addNewPhone=function(){this.addNewProperty(E.ContactPropertyType.Phone,"Mobile")},t.prototype.addNewWeb=function(){this.addNewProperty(E.ContactPropertyType.Web)},t.prototype.addNewNickname=function(){this.addNewOrFocusProperty(E.ContactPropertyType.Nick)},t.prototype.addNewNotes=function(){this.addNewOrFocusProperty(E.ContactPropertyType.Note)},t.prototype.addNewBirthday=function(){this.addNewOrFocusProperty(E.ContactPropertyType.Birthday)},t.prototype.exportVcf=function(){i.i(U.a)().download(i.i(I.u)())},t.prototype.exportCsv=function(){i.i(U.a)().download(i.i(I.v)())},t.prototype.initUploader=function(){var e=this;if(this.importUploaderButton()){var t=new C.a({action:i.i(I.w)(),name:"uploader",queueSize:1,multipleSizeLimit:1,disableDragAndDrop:!0,disableMultiple:!0,disableDocumentDropPrevent:!0,clickElement:this.importUploaderButton()});t&&t.on("onStart",function(){
e.contacts.importing(!0)}).on("onComplete",function(t,n,o){e.contacts.importing(!1),e.reloadContactList(),t&&n&&o&&o.Result||h.a.alert(i.i(L.i18n)("CONTACTS/ERROR_IMPORT_FILE"))})}},t.prototype.removeCheckedOrSelectedContactsFromList=function(){var e=this,t=this.contacts,n=this.contactsCheckedOrSelected(),o=this.currentContact(),a=this.contacts().length;0<n.length&&(m.a.each(n,function(t){o&&o.idContact===t.idContact&&(o=null,e.currentContact(null)),t.deleted(!0),a-=1}),0>=a&&(this.bDropPageAfterDelete=!0),m.a.delay(function(){m.a.each(n,function(e){t.remove(e),i.i(A.delegateRunOnDestroy)(e)})},E.Magics.Time500ms))},t.prototype.deleteSelectedContacts=function(){0<this.contactsCheckedOrSelected().length&&(D.a.contactsDelete(m.a.bind(this.deleteResponse,this),this.contactsCheckedOrSelectedUids()),this.removeCheckedOrSelectedContactsFromList())},t.prototype.deleteResponse=function(e,t){var n=this;E.Magics.Time500ms<(E.StorageResultType.Success===e&&t&&t.Time?i.i(A.pInt)(t.Time):0)?this.reloadContactList(this.bDropPageAfterDelete):m.a.delay(function(){n.reloadContactList(n.bDropPageAfterDelete)},E.Magics.Time500ms)},t.prototype.removeProperty=function(e){this.viewProperties.remove(e),i.i(A.delegateRunOnDestroy)(e)},t.prototype.populateViewContact=function(e){var t="",n="",o="",a=[];this.watchHash(!1),this.emptySelection(!1),this.viewReadOnly(!1),e&&(t=e.idContact,i.i(A.isNonEmptyArray)(e.properties)&&m.a.each(e.properties,function(e){e&&e[0]&&(E.ContactPropertyType.LastName===e[0]?n=e[1]:E.ContactPropertyType.FirstName===e[0]?o=e[1]:a.push(new x.a(e[0],e[2]||"",e[1])))}),this.viewReadOnly(!!e.readOnly)),a.unshift(new x.a(E.ContactPropertyType.LastName,"",n,(!1),this.getPropertyPlaceholder(E.ContactPropertyType.LastName))),a.unshift(new x.a(E.ContactPropertyType.FirstName,"",o,(!e),this.getPropertyPlaceholder(E.ContactPropertyType.FirstName))),this.viewID(t),i.i(A.delegateRunOnDestroy)(this.viewProperties()),this.viewProperties([]),this.viewProperties(a),this.watchDirty(!1),this.watchHash(!0)},t.prototype.reloadContactList=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=(this.contactsPage()-1)*F.m;this.bDropPageAfterDelete=!1,t&&(this.contactsPage(1),n=0),this.contacts.loading(!0),D.a.contacts(function(t,n){var o=0,a=[];E.StorageResultType.Success===t&&n&&n.Result&&n.Result.List&&i.i(A.isNonEmptyArray)(n.Result.List)&&(a=m.a.map(n.Result.List,function(e){var t=new O.a;return t.parse(e)?t:null}),a=m.a.compact(a),o=i.i(A.pInt)(n.Result.Count),o=0<o?o:0),e.contactsCount(o),i.i(A.delegateRunOnDestroy)(e.contacts()),e.contacts(a),e.contacts.loading(!1),e.viewClearSearch(""!==e.search())},n,F.m,this.search())},t.prototype.onBuild=function(e){var t=this;this.oContentVisible=b()(".b-list-content",e),this.oContentScrollable=b()(".content",this.oContentVisible),this.selector.init(this.oContentVisible,this.oContentScrollable,E.KeyState.ContactList),w()("delete",E.KeyState.ContactList,function(){return t.deleteCommand(),!1}),w()("c, w",E.KeyState.ContactList,function(){return t.newMessageCommand(),!1});var n=this;e.on("click",".e-pagenator .e-page",function(){var e=v.a.dataFor(this);e&&(n.contactsPage(i.i(A.pInt)(e.value)),n.reloadContactList())}),this.initUploader()},t.prototype.onShow=function(e,t){this.bBackToCompose=!i.i(A.isUnd)(e)&&!!e,this.sLastComposeFocusedField=i.i(A.isUnd)(t)?"":t,i.i(H.routeOff)(),this.reloadContactList(!0)},t.prototype.onHide=function(){i.i(H.routeOn)(),this.currentContact(null),this.emptySelection(!0),this.search(""),this.contactsCount(0),i.i(A.delegateRunOnDestroy)(this.contacts()),this.contacts([]),this.sLastComposeFocusedField="",this.bBackToCompose&&(this.bBackToCompose=!1,M.capa(E.Capa.Composer)&&i.i(H.showScreenPopup)(i(37)))},t}(B.a),n($.prototype,"newCommand",[K],a()($.prototype,"newCommand"),$.prototype),n($.prototype,"deleteCommand",[V],a()($.prototype,"deleteCommand"),$.prototype),n($.prototype,"newMessageCommand",[z],a()($.prototype,"newMessageCommand"),$.prototype),n($.prototype,"clearCommand",[j],a()($.prototype,"clearCommand"),$.prototype),n($.prototype,"saveCommand",[q],a()($.prototype,"saveCommand"),$.prototype),n($.prototype,"syncCommand",[W],a()($.prototype,"syncCommand"),$.prototype),Y=$))||Y)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(2),h=i.n(p),f=i(3),m=i(7),g=i(1),b=i(8),y=i(18),v=i(16),S=i(9),w=i(13);i.d(t,"IdentityPopupView",function(){return F}),i.d(t,"default",function(){return F});var T,C,E,A,F=(T=i.i(S.popup)({name:"View/Popup/Identity",templateID:"PopupsIdentity"}),C=i.i(S.command)(function(e){return!e.submitRequest()}),T((A=function(e){function t(){s()(this,t);var i=c()(this,e.call(this));return i.id="",i.edit=h.a.observable(!1),i.owner=h.a.observable(!1),i.email=h.a.observable("").validateEmail(),i.email.focused=h.a.observable(!1),i.name=h.a.observable(""),i.name.focused=h.a.observable(!1),i.replyTo=h.a.observable("").validateSimpleEmail(),i.replyTo.focused=h.a.observable(!1),i.bcc=h.a.observable("").validateSimpleEmail(),i.bcc.focused=h.a.observable(!1),i.signature=h.a.observable(""),i.signatureInsertBefore=h.a.observable(!1),i.showBcc=h.a.observable(!1),i.showReplyTo=h.a.observable(!1),i.submitRequest=h.a.observable(!1),i.submitError=h.a.observable(""),i.bcc.subscribe(function(e){!1===i.showBcc()&&0<e.length&&i.showBcc(!0)}),i.replyTo.subscribe(function(e){!1===i.showReplyTo()&&0<e.length&&i.showReplyTo(!0)}),i}return d()(t,e),t.prototype.addOrEditIdentityCommand=function(){var e=this;return this.signature&&this.signature.__fetchEditorValue&&this.signature.__fetchEditorValue(),this.email.hasError()||this.email.hasError(""===i.i(g.trim)(this.email())),this.email.hasError()?(this.owner()||this.email.focused(!0),!1):this.replyTo.hasError()?(this.replyTo.focused(!0),!1):this.bcc.hasError()?(this.bcc.focused(!0),!1):(this.submitRequest(!0),y.a.identityUpdate(function(t,n){e.submitRequest(!1),f.StorageResultType.Success===t&&n?n.Result?(i.i(v.a)().accountsAndIdentities(),e.cancelCommand()):n.ErrorCode&&e.submitError(i.i(b.getNotification)(n.ErrorCode)):e.submitError(i.i(b.getNotification)(f.Notification.UnknownError))},this.id,this.email(),this.name(),this.replyTo(),this.bcc(),this.signature(),this.signatureInsertBefore()),!0)},t.prototype.clearPopup=function(){this.id="",this.edit(!1),this.owner(!1),this.name(""),this.email(""),this.replyTo(""),this.bcc(""),this.signature(""),this.signatureInsertBefore(!1),this.email.hasError(!1),this.replyTo.hasError(!1),this.bcc.hasError(!1),this.showBcc(!1),this.showReplyTo(!1),this.submitRequest(!1),this.submitError("")},t.prototype.onShow=function(e){this.clearPopup(),e?(this.edit(!0),this.id=e.id()||"",this.name(e.name()),this.email(e.email()),this.replyTo(e.replyTo()),this.bcc(e.bcc()),this.signature(e.signature()),this.signatureInsertBefore(e.signatureInsertBefore()),this.owner(""===this.id)):this.id=i.i(g.fakeMd5)()},t.prototype.onShowWithDelay=function(){this.owner()||m.bMobileDevice||this.email.focused(!0)},t.prototype.onHideWithDelay=function(){this.clearPopup()},t}(w.a),n(A.prototype,"addOrEditIdentityCommand",[C],a()(A.prototype,"addOrEditIdentityCommand"),A.prototype),E=A))||E)},function(e,t,i){e.exports={default:i(129),__esModule:!0}},function(e,t,i){e.exports={default:i(131),__esModule:!0}},function(e,t,i){e.exports={default:i(132),__esModule:!0}},function(e,t,i){e.exports={default:i(133),__esModule:!0}},function(e,t,i){i(155);var n=i(25).Object;e.exports=function(e,t){return n.create(e,t)}},function(e,t,i){i(156);var n=i(25).Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}},function(e,t,i){i(157),e.exports=i(25).Object.setPrototypeOf},function(e,t,i){i(160),i(158),i(161),i(162),e.exports=i(25).Symbol},function(e,t,i){i(159),i(163),e.exports=i(71).f("iterator")},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(){}},function(e,t,i){var n=i(22),o=i(152),a=i(151);e.exports=function(e){return function(t,i,r){var s,l=n(t),c=o(l.length),u=a(r,c);if(e&&i!=i){for(;c>u;)if(s=l[u++],s!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===i)return e||u||0;return!e&&-1}}},function(e,t,i){var n=i(50),o=i(88),a=i(64);e.exports=function(e){var t=n(e),i=o.f;if(i)for(var r,s=i(e),l=a.f,c=0;s.length>c;)l.call(e,r=s[c++])&&t.push(r);return t}},function(e,t,i){e.exports=i(21).document&&document.documentElement},function(e,t,i){var n=i(82);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==n(e)?e.split(""):Object(e)}},function(e,t,i){var n=i(82);e.exports=Array.isArray||function(e){return"Array"==n(e)}},function(e,t,i){"use strict";var n=i(62),o=i(51),a=i(65),r={};i(32)(r,i(34)("iterator"),function(){return this}),e.exports=function(e,t,i){e.prototype=n(r,{next:o(1,i)}),a(e,t+" Iterator")}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,i){var n=i(50),o=i(22);e.exports=function(e,t){for(var i,a=o(e),r=n(a),s=r.length,l=0;s>l;)if(a[i=r[l++]]===t)return i}},function(e,t,i){var n=i(52)("meta"),o=i(44),a=i(26),r=i(33).f,s=0,l=Object.isExtensible||function(){return!0},c=!i(43)(function(){return l(Object.preventExtensions({}))}),u=function(e){r(e,n,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!o(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[n].i},p=function(e,t){if(!a(e,n)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[n].w},h=function(e){return c&&f.NEED&&l(e)&&!a(e,n)&&u(e),e},f=e.exports={KEY:n,NEED:!1,fastKey:d,getWeak:p,onFreeze:h}},function(e,t,i){var n=i(33),o=i(41),a=i(50);e.exports=i(31)?Object.defineProperties:function(e,t){o(e);for(var i,r=a(t),s=r.length,l=0;s>l;)n.f(e,i=r[l++],t[i]);return e}},function(e,t,i){var n=i(22),o=i(87).f,a={}.toString,r="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return o(e)}catch(e){return r.slice()}};e.exports.f=function(e){return r&&"[object Window]"==a.call(e)?s(e):o(n(e))}},function(e,t,i){var n=i(26),o=i(153),a=i(66)("IE_PROTO"),r=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=o(e),n(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?r:null}},function(e,t,i){var n=i(42),o=i(25),a=i(43);e.exports=function(e,t){var i=(o.Object||{})[e]||Object[e],r={};r[e]=t(i),n(n.S+n.F*a(function(){i(1)}),"Object",r)}},function(e,t,i){var n=i(44),o=i(41),a=function(e,t){if(o(e),!n(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,n){try{n=i(83)(Function.call,i(63).f(Object.prototype,"__proto__").set,2),n(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,i){return a(e,i),t?e.__proto__=i:n(e,i),e}}({},!1):void 0),check:a}},function(e,t,i){var n=i(68),o=i(58);e.exports=function(e){return function(t,i){var a,r,s=String(o(t)),l=n(i),c=s.length;return l<0||l>=c?e?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===c||(r=s.charCodeAt(l+1))<56320||r>57343?e?s.charAt(l):a:e?s.slice(l,l+2):(a-55296<<10)+(r-56320)+65536)}}},function(e,t,i){var n=i(68),o=Math.max,a=Math.min;e.exports=function(e,t){return e=n(e),e<0?o(e+t,0):a(e,t)}},function(e,t,i){var n=i(68),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},function(e,t,i){var n=i(58);e.exports=function(e){return Object(n(e))}},function(e,t,i){"use strict";var n=i(135),o=i(142),a=i(60),r=i(22);e.exports=i(86)(Array,"Array",function(e,t){this._t=r(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,i=this._i++;return!e||i>=e.length?(this._t=void 0,o(1)):"keys"==t?o(0,i):"values"==t?o(0,e[i]):o(0,[i,e[i]])},"values"),a.Arguments=a.Array,n("keys"),n("values"),n("entries")},function(e,t,i){var n=i(42);n(n.S,"Object",{create:i(62)})},function(e,t,i){var n=i(22),o=i(63).f;i(148)("getOwnPropertyDescriptor",function(){return function(e,t){return o(n(e),t)}})},function(e,t,i){var n=i(42);n(n.S,"Object",{setPrototypeOf:i(149).set})},function(e,t){},function(e,t,i){"use strict";var n=i(150)(!0);i(86)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})})},function(e,t,i){"use strict";var n=i(21),o=i(26),a=i(31),r=i(42),s=i(90),l=i(144).KEY,c=i(43),u=i(67),d=i(65),p=i(52),h=i(34),f=i(71),m=i(70),g=i(143),b=i(137),y=i(140),v=i(41),S=i(22),w=i(69),T=i(51),C=i(62),E=i(146),A=i(63),F=i(33),N=i(50),R=A.f,I=F.f,L=E.f,_=n.Symbol,P=n.JSON,D=P&&P.stringify,M="prototype",k=h("_hidden"),O=h("toPrimitive"),x={}.propertyIsEnumerable,U=u("symbol-registry"),H=u("symbols"),B=u("op-symbols"),G=Object[M],K="function"==typeof _,V=n.QObject,z=!V||!V[M]||!V[M].findChild,j=a&&c(function(){return 7!=C(I({},"a",{get:function(){return I(this,"a",{value:7}).a}})).a})?function(e,t,i){var n=R(G,t);n&&delete G[t],I(e,t,i),n&&e!==G&&I(G,t,n)}:I,q=function(e){var t=H[e]=C(_[M]);return t._k=e,t},W=K&&"symbol"==typeof _.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof _},Y=function(e,t,i){return e===G&&Y(B,t,i),v(e),t=w(t,!0),v(i),o(H,t)?(i.enumerable?(o(e,k)&&e[k][t]&&(e[k][t]=!1),i=C(i,{enumerable:T(0,!1)})):(o(e,k)||I(e,k,T(1,{})),e[k][t]=!0),j(e,t,i)):I(e,t,i)},$=function(e,t){v(e);for(var i,n=b(t=S(t)),o=0,a=n.length;a>o;)Y(e,i=n[o++],t[i]);return e},J=function(e,t){return void 0===t?C(e):$(C(e),t)},X=function(e){var t=x.call(this,e=w(e,!0));return!(this===G&&o(H,e)&&!o(B,e))&&(!(t||!o(this,e)||!o(H,e)||o(this,k)&&this[k][e])||t)},Z=function(e,t){if(e=S(e),t=w(t,!0),e!==G||!o(H,t)||o(B,t)){var i=R(e,t);return!i||!o(H,t)||o(e,k)&&e[k][t]||(i.enumerable=!0),i}},Q=function(e){for(var t,i=L(S(e)),n=[],a=0;i.length>a;)o(H,t=i[a++])||t==k||t==l||n.push(t);return n},ee=function(e){for(var t,i=e===G,n=L(i?B:S(e)),a=[],r=0;n.length>r;)!o(H,t=n[r++])||i&&!o(G,t)||a.push(H[t]);return a};K||(_=function(){if(this instanceof _)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(i){this===G&&t.call(B,i),o(this,k)&&o(this[k],e)&&(this[k][e]=!1),j(this,e,T(1,i))};return a&&z&&j(G,e,{configurable:!0,set:t}),q(e)},s(_[M],"toString",function(){return this._k}),A.f=Z,F.f=Y,i(87).f=E.f=Q,i(64).f=X,i(88).f=ee,a&&!i(61)&&s(G,"propertyIsEnumerable",X,!0),f.f=function(e){return q(h(e))}),r(r.G+r.W+r.F*!K,{Symbol:_});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;te.length>ie;)h(te[ie++]);for(var te=N(h.store),ie=0;te.length>ie;)m(te[ie++]);r(r.S+r.F*!K,"Symbol",{for:function(e){return o(U,e+="")?U[e]:U[e]=_(e)},keyFor:function(e){if(W(e))return g(U,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){z=!0},useSimple:function(){z=!1}}),r(r.S+r.F*!K,"Object",{create:J,defineProperty:Y,defineProperties:$,getOwnPropertyDescriptor:Z,getOwnPropertyNames:Q,getOwnPropertySymbols:ee}),P&&r(r.S+r.F*(!K||c(function(){var e=_();return"[null]"!=D([e])||"{}"!=D({a:e})||"{}"!=D(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!W(e)){for(var t,i,n=[e],o=1;arguments.length>o;)n.push(arguments[o++]);return t=n[1],"function"==typeof t&&(i=t),!i&&y(t)||(t=function(e,t){if(i&&(t=i.call(this,e,t)),!W(t))return t}),n[1]=t,D.apply(P,n)}}}),_[M][O]||i(32)(_[M],O,_[M].valueOf),d(_,"Symbol"),d(Math,"Math",!0),d(n.JSON,"JSON",!0)},function(e,t,i){i(70)("asyncIterator")},function(e,t,i){i(70)("observable")},function(e,t,i){i(154);for(var n=i(21),o=i(32),a=i(60),r=i(34)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var c=s[l],u=n[c],d=u&&u.prototype;d&&!d[r]&&o(d,r,c),a[c]=a.Array}},function(e,t,i){!function(t,n){"use strict";var o;try{o=i(74)}catch(e){}e.exports=n(o)}(this,function(e){"use strict";var t="function"==typeof e,i=!!window.addEventListener,n=window.document,o=window.setTimeout,a=function(e,t,n,o){i?e.addEventListener(t,n,!!o):e.attachEvent("on"+t,n)},r=function(e,t,n,o){i?e.removeEventListener(t,n,!!o):e.detachEvent("on"+t,n)},s=function(e,t,i){var o;n.createEvent?(o=n.createEvent("HTMLEvents"),o.initEvent(t,!0,!1),o=v(o,i),e.dispatchEvent(o)):n.createEventObject&&(o=n.createEventObject(),o=v(o,i),e.fireEvent("on"+t,o))},l=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")},c=function(e,t){return(" "+e.className+" ").indexOf(" "+t+" ")!==-1},u=function(e,t){c(e,t)||(e.className=""===e.className?t:e.className+" "+t)},d=function(e,t){e.className=l((" "+e.className+" ").replace(" "+t+" "," "))},p=function(e){return/Array/.test(Object.prototype.toString.call(e))},h=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())},f=function(e){var t=e.getDay();return 0===t||6===t},m=function(e){return e%4===0&&e%100!==0||e%400===0},g=function(e,t){return[31,m(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},b=function(e){h(e)&&e.setHours(0,0,0,0)},y=function(e,t){return e.getTime()===t.getTime()},v=function(e,t,i){var n,o;for(n in t)o=void 0!==e[n],o&&"object"==typeof t[n]&&null!==t[n]&&void 0===t[n].nodeName?h(t[n])?i&&(e[n]=new Date(t[n].getTime())):p(t[n])?i&&(e[n]=t[n].slice(0)):e[n]=v({},t[n],i):!i&&o||(e[n]=t[n]);return e},S=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),e.month>11&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e},w={field:null,bound:void 0,position:"bottom left",reposition:!0,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,formatStrict:!1,minDate:null,maxDate:null,yearRange:10,showWeekNumber:!1,minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!1,yearSuffix:"",showMonthAfterYear:!1,showDaysInNextAndPreviousMonths:!1,numberOfMonths:1,mainCalendar:"left",container:void 0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,onSelect:null,onOpen:null,onClose:null,onDraw:null},T=function(e,t,i){for(t+=e.firstDay;t>=7;)t-=7;return i?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},C=function(e){var t=[],i="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),i="true"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+i+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},E=function(e,t,i){var n=new Date(i,0,1),o=Math.ceil(((new Date(i,t,e)-n)/864e5+n.getDay()+1)/7);return'<td class="pika-week">'+o+"</td>"},A=function(e,t){return"<tr>"+(t?e.reverse():e).join("")+"</tr>"},F=function(e){return"<tbody>"+e.join("")+"</tbody>"},N=function(e){var t,i=[];for(e.showWeekNumber&&i.push("<th></th>"),t=0;t<7;t++)i.push('<th scope="col"><abbr title="'+T(e,t)+'">'+T(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?i.reverse():i).join("")+"</tr></thead>"},R=function(e,t,i,n,o,a){var r,s,l,c,u,d=e._o,h=i===d.minYear,f=i===d.maxYear,m='<div id="'+a+'" class="pika-title" role="heading" aria-live="assertive">',g=!0,b=!0;for(l=[],r=0;r<12;r++)l.push('<option value="'+(i===o?r-t:12+r-t)+'"'+(r===n?' selected="selected"':"")+(h&&r<d.minMonth||f&&r>d.maxMonth?'disabled="disabled"':"")+">"+d.i18n.months[r]+"</option>");for(c='<div class="pika-label">'+d.i18n.months[n]+'<select class="pika-select pika-select-month" tabindex="-1">'+l.join("")+"</select></div>",p(d.yearRange)?(r=d.yearRange[0],s=d.yearRange[1]+1):(r=i-d.yearRange,s=1+i+d.yearRange),l=[];r<s&&r<=d.maxYear;r++)r>=d.minYear&&l.push('<option value="'+r+'"'+(r===i?' selected="selected"':"")+">"+r+"</option>");return u='<div class="pika-label">'+i+d.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+l.join("")+"</select></div>",m+=d.showMonthAfterYear?u+c:c+u,h&&(0===n||d.minMonth>=n)&&(g=!1),f&&(11===n||d.maxMonth<=n)&&(b=!1),0===t&&(m+='<button class="pika-prev'+(g?"":" is-disabled")+'" type="button">'+d.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(m+='<button class="pika-next'+(b?"":" is-disabled")+'" type="button">'+d.i18n.nextMonth+"</button>"),m+="</div>"},I=function(e,t,i){return'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+i+'">'+N(e)+F(t)+"</table>"},L=function(r){var s=this,l=s.config(r);s._onMouseDown=function(e){if(s._v){e=e||window.event;var t=e.target||e.srcElement;if(t)if(c(t,"is-disabled")||(!c(t,"pika-button")||c(t,"is-empty")||c(t.parentNode,"is-disabled")?c(t,"pika-prev")?s.prevMonth():c(t,"pika-next")&&s.nextMonth():(s.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),l.bound&&o(function(){s.hide(),l.field&&l.field.blur()},100))),c(t,"pika-select"))s._c=!0;else{if(!e.preventDefault)return e.returnValue=!1,!1;e.preventDefault()}}},s._onChange=function(e){e=e||window.event;var t=e.target||e.srcElement;t&&(c(t,"pika-select-month")?s.gotoMonth(t.value):c(t,"pika-select-year")&&s.gotoYear(t.value))},s._onKeyChange=function(e){if(e=e||window.event,s.isVisible())switch(e.keyCode){case 13:case 27:l.field.blur();break;case 37:e.preventDefault(),s.adjustDate("subtract",1);break;case 38:s.adjustDate("subtract",7);break;case 39:s.adjustDate("add",1);break;case 40:s.adjustDate("add",7)}},s._onInputChange=function(i){var n;i.firedBy!==s&&(t?(n=e(l.field.value,l.format,l.formatStrict),n=n&&n.isValid()?n.toDate():null):n=new Date(Date.parse(l.field.value)),h(n)&&s.setDate(n),s._v||s.show())},s._onInputFocus=function(){s.show()},s._onInputClick=function(){s.show()},s._onInputBlur=function(){var e=n.activeElement;do if(c(e,"pika-single"))return;while(e=e.parentNode);s._c||(s._b=o(function(){s.hide()},50)),s._c=!1},s._onClick=function(e){e=e||window.event;var t=e.target||e.srcElement,n=t;if(t){!i&&c(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),a(t,"change",s._onChange)));do if(c(n,"pika-single")||n===l.trigger)return;while(n=n.parentNode);s._v&&t!==l.trigger&&n!==l.trigger&&s.hide()}},s.el=n.createElement("div"),s.el.className="pika-single"+(l.isRTL?" is-rtl":"")+(l.theme?" "+l.theme:""),a(s.el,"mousedown",s._onMouseDown,!0),a(s.el,"touchend",s._onMouseDown,!0),a(s.el,"change",s._onChange),a(n,"keydown",s._onKeyChange),l.field&&(l.container?l.container.appendChild(s.el):l.bound?n.body.appendChild(s.el):l.field.parentNode.insertBefore(s.el,l.field.nextSibling),a(l.field,"change",s._onInputChange),l.defaultDate||(t&&l.field.value?l.defaultDate=e(l.field.value,l.format).toDate():l.defaultDate=new Date(Date.parse(l.field.value)),l.setDefaultDate=!0));var u=l.defaultDate;h(u)?l.setDefaultDate?s.setDate(u,!0):s.gotoDate(u):s.gotoDate(new Date),l.bound?(this.hide(),s.el.className+=" is-bound",a(l.trigger,"click",s._onInputClick),a(l.trigger,"focus",s._onInputFocus),a(l.trigger,"blur",s._onInputBlur)):this.show()};return L.prototype={config:function(e){this._o||(this._o=v({},w,!0));var t=v(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var i=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=i>4?4:i,h(t.minDate)||(t.minDate=!1),h(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),p(t.yearRange)){var n=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||n,t.yearRange[1]=parseInt(t.yearRange[1],10)||n}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||w.yearRange,t.yearRange>100&&(t.yearRange=100);return t},toString:function(i){return h(this._d)?t?e(this._d).format(i||this._o.format):this._d.toDateString():""},getMoment:function(){return t?e(this._d):null},setMoment:function(i,n){t&&e.isMoment(i)&&this.setDate(i.toDate(),n)},getDate:function(){return h(this._d)?new Date(this._d.getTime()):new Date},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",s(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),h(e)){var i=this._o.minDate,n=this._o.maxDate;h(i)&&e<i?e=i:h(n)&&e>n&&(e=n),this._d=new Date(e.getTime()),b(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),s(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(h(e)){if(this.calendars){var i=new Date(this.calendars[0].year,this.calendars[0].month,1),n=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=e.getTime();n.setMonth(n.getMonth()+1),n.setDate(n.getDate()-1),t=o<i.getTime()||n.getTime()<o}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(i,n){var o,a=this.getDate(),r=24*parseInt(n)*60*60*1e3;"add"===i?o=new Date(a.valueOf()+r):"subtract"===i&&(o=new Date(a.valueOf()-r)),t&&("add"===i?o=e(a).add(n,"days").toDate():"subtract"===i&&(o=e(a).subtract(n,"days").toDate())),this.setDate(o)},adjustCalendars:function(){this.calendars[0]=S(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=S({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(b(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=w.minDate,this._o.minYear=w.minYear,this._o.minMonth=w.minMonth,this._o.startRange=w.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(b(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=w.maxDate,this._o.maxYear=w.maxYear,this._o.maxMonth=w.maxMonth,this._o.endRange=w.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,i=this._o,n=i.minYear,a=i.maxYear,r=i.minMonth,s=i.maxMonth,l="";this._y<=n&&(this._y=n,!isNaN(r)&&this._m<r&&(this._m=r)),this._y>=a&&(this._y=a,!isNaN(s)&&this._m>s&&(this._m=s)),t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var c=0;c<i.numberOfMonths;c++)l+='<div class="pika-lendar">'+R(this,c,this.calendars[c].year,this.calendars[c].month,this.calendars[0].year,t)+this.render(this.calendars[c].year,this.calendars[c].month,t)+"</div>";this.el.innerHTML=l,i.bound&&"hidden"!==i.field.type&&o(function(){i.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),i.bound&&i.field.setAttribute("aria-label","Use the arrow keys to pick a date")}},adjustPosition:function(){var e,t,i,o,a,r,s,l,c,u;if(!this._o.container){if(this.el.style.position="absolute",e=this._o.trigger,t=e,i=this.el.offsetWidth,o=this.el.offsetHeight,a=window.innerWidth||n.documentElement.clientWidth,r=window.innerHeight||n.documentElement.clientHeight,s=window.pageYOffset||n.body.scrollTop||n.documentElement.scrollTop,"function"==typeof e.getBoundingClientRect)u=e.getBoundingClientRect(),l=u.left+window.pageXOffset,c=u.bottom+window.pageYOffset;else for(l=t.offsetLeft,c=t.offsetTop+t.offsetHeight;t=t.offsetParent;)l+=t.offsetLeft,c+=t.offsetTop;(this._o.reposition&&l+i>a||this._o.position.indexOf("right")>-1&&l-i+e.offsetWidth>0)&&(l=l-i+e.offsetWidth),(this._o.reposition&&c+o>r+s||this._o.position.indexOf("top")>-1&&c-o-e.offsetHeight>0)&&(c=c-o-e.offsetHeight),this.el.style.left=l+"px",this.el.style.top=c+"px"}},render:function(e,t,i){var n=this._o,o=new Date,a=g(e,t),r=new Date(e,t,1).getDay(),s=[],l=[];b(o),n.firstDay>0&&(r-=n.firstDay,r<0&&(r+=7));for(var c=0===t?11:t-1,u=11===t?0:t+1,d=0===t?e-1:e,p=11===t?e+1:e,m=g(d,c),v=a+r,S=v;S>7;)S-=7;v+=7-S;for(var w=0,T=0;w<v;w++){var F=new Date(e,t,1+(w-r)),N=!!h(this._d)&&y(F,this._d),R=y(F,o),L=w<r||w>=a+r,_=1+(w-r),P=t,D=e,M=n.startRange&&y(n.startRange,F),k=n.endRange&&y(n.endRange,F),O=n.startRange&&n.endRange&&n.startRange<F&&F<n.endRange,x=n.minDate&&F<n.minDate||n.maxDate&&F>n.maxDate||n.disableWeekends&&f(F)||n.disableDayFn&&n.disableDayFn(F);L&&(w<r?(_=m+_,P=c,D=d):(_-=a,P=u,D=p));var U={day:_,month:P,year:D,isSelected:N,isToday:R,isDisabled:x,isEmpty:L,isStartRange:M,isEndRange:k,isInRange:O,showDaysInNextAndPreviousMonths:n.showDaysInNextAndPreviousMonths};l.push(C(U)),7===++T&&(n.showWeekNumber&&l.unshift(E(w-r,t,e)),s.push(A(l,n.isRTL)),l=[],T=0)}return I(n,s,i)},isVisible:function(){return this._v},show:function(){this.isVisible()||(d(this.el,"is-hidden"),this._v=!0,this.draw(),this._o.bound&&(a(n,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;e!==!1&&(this._o.bound&&r(n,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",u(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),r(this.el,"mousedown",this._onMouseDown,!0),r(this.el,"touchend",this._onMouseDown,!0),r(this.el,"change",this._onChange),this._o.field&&(r(this._o.field,"change",this._onInputChange),this._o.bound&&(r(this._o.trigger,"click",this._onInputClick),r(this._o.trigger,"focus",this._onInputFocus),r(this._o.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},L})},function(e,t){e.exports='<span class="rl-cmd-clr-error">Command not found:</span> {{ cmd }}'},function(e,t){e.exports=' <span class="rl-cmd-clr-info">commands:</span> {{ commands }}'},function(e,t){e.exports='lang <span class="rl-cmd-clr-info">[{{ langs }}]</span>'},function(e,t){e.exports='<span class="rl-cmd-clr-success">&gt;</span> {{ cmd }}'},function(e,t){e.exports='theme <span class="rl-cmd-clr-info">[{{ themes }}]</span>'},function(e,t){e.exports=' <span class="rl-cmd-clr-info">version:</span> {{ version }}'},function(e,t){e.exports='<html>\n<head>\n\t<meta charset="utf-8" />\n\t<meta name="viewport" content="user-scalable=no" />\n\t<meta name="apple-mobile-web-app-capable" content="yes" />\n\t<meta name="robots" content="noindex, nofollow, noodp" />\n\t<title>{{title}}</title>\n\t<style>\nhtml, body {\n\tbackground-color: #fff;\n\tfont-size: 13px;\n\tfont-family: arial, sans-serif;\n\tmargin: 0;\n\tpadding: 0;\n}\n\na {color: blue; text-decoration: underline}\na:visited {color: #609}\na:active {color: red}\nblockquote {border-left: 2px solid black; margin: 0; padding: 0px 10px}\n\npre {\n\tmargin: 0px;\n\tpadding: 0px;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\tbackground: #fff;\n\tborder: none;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: break-all;\n}\n\n.body-wrp {\n\tpadding: 10px;\n}\n\n.body-wrp.html pre {\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: normal;\n}\n\n.body-wrp.plain {\n\tpadding: 15px;\n\twhite-space: pre-wrap;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n}\n\n.body-wrp.plain pre {\n\tmargin: 0px;\n\tpadding: 0px;\n\tbackground: #fff;\n\tborder: none;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: normal;\n}\n\n.body-wrp.plain blockquote {\n\tborder-left: 2px solid blue;\n\tcolor: blue;\n}\n\n.body-wrp.plain blockquote blockquote {\n\tborder-left: 2px solid green;\n\tcolor: green;\n}\n\n.body-wrp.plain blockquote blockquote blockquote {\n\tborder-left: 2px solid red;\n\tcolor: red;\n}\n\n.rl-previre-subject {\n\tfont-size: 16px;\n\tfont-weight: bold;\n\tpadding: 15px;\n\tborder-bottom: 1px solid #ccc;\n}\n\n.rl-previre-creds-from, .rl-previre-creds-to {\n\tfont-size: 12px;\n\tpadding: 10px 15px;\n}\n\n.rl-previre-creds-from {\n\tpadding-bottom: 0;\n}\n\n.rl-previre-creds-to {\n\tborder-bottom: 1px solid #ccc;\n}\n\n.rl-previre-date {\n\tfloat: right;\n\tfont-size: 12px;\n\tpadding: 10px 15px;\n}\n\t</style>\n</head>\n<body>\n\t<div>\n\t\t<div class="rl-previre-subject">{{subject}}</div>\n\t</div>\n\t<div>\n\t\t<div class="rl-previre-date">{{date}}</div>\n\t\t<div class="rl-previre-creds-from">{{fromCreds}}</div>\n\t\t<div class="rl-previre-creds-to">{{toLabel}}: {{toCreds}}</div>\n\t</div>\n\t<div class="body-wrp {{bodyClass}}">{{html}}</div>\n</body>\n</html>';
},,function(e,t){e.exports=window.Autolinker},function(e,t){e.exports=window.hasher},function(e,t){e.exports=window.ssm},,function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(11),u=i.n(c),d=i(6),p=i.n(d),h=i(12),f=i.n(h),m=i(92),g=i.n(m),b=i(273),y=i.n(b),v=i(1),S=i(3),w=i(7),T=i(20),C=i(27),E=i(35),A=i(23),F=i(14),N=i(29),R=i(8),I=i(54),L=i(28),_=i(40),P=i(121),D=i(46),M=i(120),k=i(97),O=i(185),x=i(30),U=i(49),H=i(39),B=i(184),G=i(79),K=i(10),V=i(94),z=i(18),j=i(78),q=i(38),W=i(202),Y=i(209),$=i(212),J=i(211),X=i(217),Z=i(218),Q=i(219),ee=i(9),te=i(100),ie=function(e){function t(){o()(this,t);var n=r()(this,e.call(this,z.a));return n.moveCache={},n.quotaDebounce=p.a.debounce(n.quota,S.Magics.Time30s),n.moveOrDeleteResponseHelper=p.a.bind(n.moveOrDeleteResponseHelper,n),n.messagesMoveTrigger=p.a.debounce(n.messagesMoveTrigger,500),u.a.setInterval(function(){return N.a("interval.30s")},S.Magics.Time30s),u.a.setInterval(function(){return N.a("interval.1m")},S.Magics.Time1m),u.a.setInterval(function(){return N.a("interval.2m")},S.Magics.Time2m),u.a.setInterval(function(){return N.a("interval.3m")},S.Magics.Time3m),u.a.setInterval(function(){return N.a("interval.5m")},S.Magics.Time5m),u.a.setInterval(function(){return N.a("interval.10m")},S.Magics.Time10m),u.a.setInterval(function(){return N.a("interval.15m")},S.Magics.Time15m),u.a.setInterval(function(){return N.a("interval.20m")},S.Magics.Time20m),u.a.setTimeout(function(){return u.a.setInterval(function(){return N.a("interval.2m-after5m")},S.Magics.Time2m)},S.Magics.Time5m),u.a.setTimeout(function(){return u.a.setInterval(function(){return N.a("interval.5m-after5m")},S.Magics.Time5m)},S.Magics.Time5m),u.a.setTimeout(function(){return u.a.setInterval(function(){return N.a("interval.10m-after5m")},S.Magics.Time10m)},S.Magics.Time5m),f.a.wakeUp(function(){i.i(V.e)()&&n.reload(),z.a.jsVersion(function(e,t){S.StorageResultType.Success===e&&t&&!t.Result&&n.reload()},K.appSettingsGet("version"))},{},S.Magics.Time60m),i.i(V.e)()&&n.reload(),K.settingsGet("UserBackgroundHash")&&p.a.delay(function(){f()("#rl-bg").attr("style","background-image: none !important;").backstretch(i.i(F.A)(K.settingsGet("UserBackgroundHash")),{fade:w.bAnimationSupported?S.Magics.Time1s:0,centeredX:!0,centeredY:!0}).removeAttr("style")},S.Magics.Time1s),n.socialUsers=p.a.bind(n.socialUsers,n),n}return l()(t,e),t.prototype.remote=function(){return z.a},t.prototype.reload=function(){u.a.parent&&K.appSettingsGet("inIframe")?u.a.parent.location.reload():u.a.location.reload()},t.prototype.reloadFlagsCurrentMessageListAndMessageFromCache=function(){p.a.each(H.a.messageList(),function(e){i.i(A.k)(e)}),i.i(A.k)(H.a.message())},t.prototype.reloadMessageList=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(H.a.messageListPage()-1)*_.a.messagesPerPage();t&&i.i(A.h)(x.a.currentFolderFullNameRaw(),""),e&&(H.a.messageListPage(1),H.a.messageListPageBeforeThread(1),n=0,i.i(ee.setHash)(i.i(F.r)(x.a.currentFolderFullNameHash(),H.a.messageListPage(),H.a.messageListSearch(),H.a.messageListThreadUid()),!0,!0)),H.a.messageListLoading(!0),z.a.messageList(function(e,t,n){S.StorageResultType.Success===e&&t&&t.Result?(H.a.messageListError(""),H.a.messageListLoading(!1),H.a.setMessageList(t,n)):S.StorageResultType.Unload===e?(H.a.messageListError(""),H.a.messageListLoading(!1)):S.StorageResultType.Abort!==e&&(H.a.messageList([]),H.a.messageListLoading(!1),H.a.messageListError(t&&t.ErrorCode?i.i(R.getNotification)(t.ErrorCode):i.i(R.i18n)("NOTIFICATIONS/CANT_GET_MESSAGE_LIST")))},x.a.currentFolderFullNameRaw(),n,_.a.messagesPerPage(),H.a.messageListSearch(),H.a.messageListThreadUid())},t.prototype.recacheInboxMessageList=function(){z.a.messageList(v.noop,i.i(A.a)(),0,_.a.messagesPerPage(),"","",!0)},t.prototype.contactsSync=function(e){var t=M.a.contacts;return!(t.importing()||t.syncing()||!M.a.enableContactsSync()||!M.a.allowContactsSync())&&(t.syncing(!0),z.a.contactsSync(function(i,n){t.syncing(!1),e&&e(i,n)}),!0)},t.prototype.messagesMoveTrigger=function(){var e=this,t=x.a.trashFolder(),n=x.a.spamFolder();p.a.each(this.moveCache,function(o){var a=n===o.To,r=t===o.To,s=!a&&n===o.From&&i.i(A.a)()===o.To;z.a.messagesMove(e.moveOrDeleteResponseHelper,o.From,o.To,o.Uid,a?"SPAM":s?"HAM":"",a||r)}),this.moveCache={}},t.prototype.messagesMoveHelper=function(e,t,i){var n="$$"+e+"$$"+t+"$$";this.moveCache[n]||(this.moveCache[n]={From:e,To:t,Uid:[]}),this.moveCache[n].Uid=p.a.union(this.moveCache[n].Uid,i),this.messagesMoveTrigger()},t.prototype.messagesCopyHelper=function(e,t,i){z.a.messagesCopy(this.moveOrDeleteResponseHelper,e,t,i)},t.prototype.messagesDeleteHelper=function(e,t){z.a.messagesDelete(this.moveOrDeleteResponseHelper,e,t)},t.prototype.moveOrDeleteResponseHelper=function(e,t){S.StorageResultType.Success===e&&x.a.currentFolder()&&(t&&i.i(v.isArray)(t.Result)&&2===t.Result.length?i.i(A.h)(t.Result[0],t.Result[1]):(i.i(A.h)(x.a.currentFolderFullNameRaw(),""),t&&-1<i.i(v.inArray)(t.ErrorCode,[S.Notification.CantMoveMessage,S.Notification.CantCopyMessage])&&u.a.alert(i.i(R.getNotification)(t.ErrorCode))),this.reloadMessageList(0===H.a.messageList().length),this.quotaDebounce())},t.prototype.deleteMessagesFromFolderWithoutCheck=function(e,t){this.messagesDeleteHelper(e,t),H.a.removeMessagesFromList(e,t)},t.prototype.deleteMessagesFromFolder=function(e,t,n,o){var a=this,r=null,s=null;switch(e){case S.FolderType.Spam:r=i.i(A.b)(x.a.spamFolder()),s=S.SetSystemFoldersNotification.Spam;break;case S.FolderType.NotSpam:r=i.i(A.b)(i.i(A.a)());break;case S.FolderType.Trash:r=i.i(A.b)(x.a.trashFolder()),s=S.SetSystemFoldersNotification.Trash;break;case S.FolderType.Archive:r=i.i(A.b)(x.a.archiveFolder()),s=S.SetSystemFoldersNotification.Archive}o=!!i.i(v.isUnd)(o)||!!o,o&&(S.FolderType.Spam===e&&T.c===x.a.spamFolder()||S.FolderType.Trash===e&&T.c===x.a.trashFolder()||S.FolderType.Archive===e&&T.c===x.a.archiveFolder())&&(o=!1),!r&&o?i.i(ee.showScreenPopup)(i(98),[s]):o&&(S.FolderType.Trash!==e||t!==x.a.spamFolder()&&t!==x.a.trashFolder())?r&&(this.messagesMoveHelper(t,r.fullNameRaw,n),H.a.removeMessagesFromList(t,n,r.fullNameRaw)):i.i(ee.showScreenPopup)(i(73),[i.i(R.i18n)("POPUPS_ASK/DESC_WANT_DELETE_MESSAGES"),function(){a.messagesDeleteHelper(t,n),H.a.removeMessagesFromList(t,n)}])},t.prototype.moveMessagesToFolder=function(e,t,n,o){if(e!==n&&i.i(v.isArray)(t)&&0<t.length){var a=i.i(A.b)(e),r=i.i(A.b)(n);if(a&&r)return i.i(v.isUnd)(o)||!o?this.messagesMoveHelper(a.fullNameRaw,r.fullNameRaw,t):this.messagesCopyHelper(a.fullNameRaw,r.fullNameRaw,t),H.a.removeMessagesFromList(a.fullNameRaw,t,r.fullNameRaw,o),!0}return!1},t.prototype.foldersReload=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=j.a.foldersReload(x.a.foldersLoading);e&&t.then(function(e){return!!e}).then(e).catch(function(){p.a.delay(function(){e&&e(!1)},1)})},t.prototype.foldersPromisesActionHelper=function(e,t){j.a.abort("Folders").fastResolve(!0).then(function(){return e}).then(function(){j.a.foldersReloadWithTimeout(x.a.foldersLoading)},function(e){x.a.folderList.error(i.i(R.getNotification)(e,"",t)),j.a.foldersReloadWithTimeout(x.a.foldersLoading)})},t.prototype.reloadOpenPgpKeys=function(){if(U.a.capaOpenPGP()){var e=[],t=new q.EmailModel,n=U.a.openpgpKeyring,o=n?n.getAllKeys():[];p.a.each(o,function(i,n){if(i&&i.primaryKey){var o=[],a=[],r=i.getPrimaryUser(),s=r&&r.user?r.user.userId.userid:i.users&&i.users[0]?i.users[0].userId.userid:"";i.users&&p.a.each(i.users,function(e){e.userId&&(t.clear(),t.mailsoParse(e.userId.userid),t.validate()&&(o.push(t.email),a.push(e.userId.userid)))}),o.length&&e.push(new J.a(n,i.primaryKey.getFingerprint(),i.primaryKey.getKeyId().toHex().toLowerCase(),p.a.uniq(p.a.compact(p.a.map(i.getKeyIds(),function(e){return e&&e.toHex?e.toHex():null}))),a,o,i.isPrivate(),i.armor(),s))}}),i.i(v.delegateRunOnDestroy)(U.a.openpgpkeys()),U.a.openpgpkeys(e)}},t.prototype.accountsCounts=function(){return!1},t.prototype.accountsAndIdentities=function(e){var t=this;D.a.accounts.loading(!0),k.a.identities.loading(!0),z.a.accountsAndIdentities(function(n,o){if(D.a.accounts.loading(!1),k.a.identities.loading(!1),S.StorageResultType.Success===n&&o.Result){var a={},r=D.a.email(),s=K.settingsGet("ParentEmail");s=""===s?r:s,i.i(v.isArray)(o.Result.Accounts)&&(p.a.each(D.a.accounts(),function(e){a[e.email]=e.count()}),i.i(v.delegateRunOnDestroy)(D.a.accounts()),D.a.accounts(p.a.map(o.Result.Accounts,function(e){return new W.a(e,e!==s,a[e]||0)}))),i.i(v.isUnd)(e)||!e||(p.a.delay(function(){return t.accountsCounts()},5e3),N.b("interval.10m-after5m",function(){return t.accountsCounts()})),i.i(v.isArray)(o.Result.Identities)&&(i.i(v.delegateRunOnDestroy)(k.a.identities()),k.a.identities(p.a.map(o.Result.Identities,function(e){var t=i.i(v.pString)(e.Id),n=i.i(v.pString)(e.Email),o=new Y.a(t,n);return o.name(i.i(v.pString)(e.Name)),o.replyTo(i.i(v.pString)(e.ReplyTo)),o.bcc(i.i(v.pString)(e.Bcc)),o.signature(i.i(v.pString)(e.Signature)),o.signatureInsertBefore(!!e.SignatureInsertBefore),o})))}})},t.prototype.templates=function(){O.a.templates.loading(!0),z.a.templates(function(e,t){O.a.templates.loading(!1),S.StorageResultType.Success===e&&t.Result&&i.i(v.isArray)(t.Result.Templates)&&(i.i(v.delegateRunOnDestroy)(O.a.templates()),O.a.templates(p.a.compact(p.a.map(t.Result.Templates,function(e){var t=new $.a;return t.parse(e)?t:null}))))})},t.prototype.quota=function(){z.a.quota(function(e,t){S.StorageResultType.Success===e&&t&&t.Result&&i.i(v.isArray)(t.Result)&&1<t.Result.length&&i.i(v.isPosNumeric)(t.Result[0],!0)&&i.i(v.isPosNumeric)(t.Result[1],!0)&&B.a.populateData(i.i(v.pInt)(t.Result[1]),i.i(v.pInt)(t.Result[0]))})},t.prototype.folderInformation=function(e,t){var n=this;""!==i.i(v.trim)(e)&&z.a.folderInformation(function(e,t){if(S.StorageResultType.Success===e&&t&&t.Result&&t.Result.Hash&&t.Result.Folder){var o="",a=!1,r=!1,s=i.i(A.b)(t.Result.Folder);if(s){if(s.interval=i.i(E.momentNowUnix)(),t.Result.Hash&&i.i(A.h)(t.Result.Folder,t.Result.Hash),i.i(v.isNormal)(t.Result.MessageCount)&&s.messageCountAll(t.Result.MessageCount),i.i(v.isNormal)(t.Result.MessageUnseenCount)&&(i.i(v.pInt)(s.messageCountUnread())!==i.i(v.pInt)(t.Result.MessageUnseenCount)&&(r=!0),s.messageCountUnread(t.Result.MessageUnseenCount)),r&&i.i(A.m)(s.fullNameRaw),t.Result.Flags){for(o in t.Result.Flags)if(i.i(v.has)(t.Result.Flags,o)){a=!0;var l=t.Result.Flags[o];i.i(A.v)(s.fullNameRaw,o.toString(),[!l.IsSeen,!!l.IsFlagged,!!l.IsAnswered,!!l.IsForwarded,!!l.IsReadReceipt])}a&&n.reloadFlagsCurrentMessageListAndMessageFromCache()}H.a.initUidNextAndNewMessages(s.fullNameRaw,t.Result.UidNext,t.Result.NewMessages);var c=i.i(A.c)(t.Result.Folder);(t.Result.Hash!==c||""===c||r)&&(s.fullNameRaw===x.a.currentFolderFullNameRaw()?n.reloadMessageList():i.i(A.a)()===s.fullNameRaw&&n.recacheInboxMessageList())}}},e,t)},t.prototype.folderInformationMultiply=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=x.a.getNextFolderNames();i.i(v.isNonEmptyArray)(n)&&z.a.folderInformationMultiply(function(n,o){if(S.StorageResultType.Success===n&&o&&o.Result&&o.Result.List&&i.i(v.isNonEmptyArray)(o.Result.List)){var a=i.i(E.momentNowUnix)();p.a.each(o.Result.List,function(t){var n=i.i(A.c)(t.Folder),o=i.i(A.b)(t.Folder),r=!1;if(o)if(o.interval=a,t.Hash&&i.i(A.h)(t.Folder,t.Hash),i.i(v.isNormal)(t.MessageCount)&&o.messageCountAll(t.MessageCount),i.i(v.isNormal)(t.MessageUnseenCount)&&(i.i(v.pInt)(o.messageCountUnread())!==i.i(v.pInt)(t.MessageUnseenCount)&&(r=!0),o.messageCountUnread(t.MessageUnseenCount)),r&&i.i(A.m)(o.fullNameRaw),t.Hash!==n||""===n)o.fullNameRaw===x.a.currentFolderFullNameRaw()&&e.reloadMessageList();else if(r&&o.fullNameRaw===x.a.currentFolderFullNameRaw()){var s=H.a.messageList();i.i(v.isNonEmptyArray)(s)&&e.folderInformation(o.fullNameRaw,s)}}),t&&p.a.delay(function(){return e.folderInformationMultiply(!0)},2e3)}},n)},t.prototype.messageListAction=function(e,t,n){var o=null,a=0,r=[];if(!i.i(v.isUnd)(n)&&n||(n=H.a.messageListChecked()),r=p.a.uniq(p.a.compact(p.a.map(n,function(e){return e&&e.uid?e.uid:null}))),""!==e&&0<r.length){switch(t){case S.MessageSetAction.SetSeen:p.a.each(r,function(n){a+=i.i(A.w)(e,n,t)}),o=i.i(A.b)(e),o&&o.messageCountUnread(o.messageCountUnread()-a),z.a.messageSetSeen(v.noop,e,r,!0);break;case S.MessageSetAction.UnsetSeen:p.a.each(r,function(n){a+=i.i(A.w)(e,n,t)}),o=i.i(A.b)(e),o&&o.messageCountUnread(o.messageCountUnread()-a+r.length),z.a.messageSetSeen(v.noop,e,r,!1);break;case S.MessageSetAction.SetFlag:p.a.each(r,function(n){i.i(A.w)(e,n,t)}),z.a.messageSetFlagged(v.noop,e,r,!0);break;case S.MessageSetAction.UnsetFlag:p.a.each(r,function(n){i.i(A.w)(e,n,t)}),z.a.messageSetFlagged(v.noop,e,r,!1)}this.reloadFlagsCurrentMessageListAndMessageFromCache(),H.a.message.viewTrigger(!H.a.message.viewTrigger())}},t.prototype.googleConnect=function(){u.a.open(i.i(F.o)(),"Google","left=200,top=100,width=650,height=600,menubar=no,status=no,resizable=yes,scrollbars=yes")},t.prototype.twitterConnect=function(){u.a.open(i.i(F.p)(),"Twitter","left=200,top=100,width=650,height=350,menubar=no,status=no,resizable=yes,scrollbars=yes")},t.prototype.facebookConnect=function(){u.a.open(i.i(F.n)(),"Facebook","left=200,top=100,width=650,height=335,menubar=no,status=no,resizable=yes,scrollbars=yes")},t.prototype.socialUsers=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];!0===e&&(I.a.google.loading(!0),I.a.facebook.loading(!0),I.a.twitter.loading(!0)),z.a.socialUsers(function(e,t){S.StorageResultType.Success===e&&t&&t.Result?(I.a.google.userName(t.Result.Google||""),I.a.facebook.userName(t.Result.Facebook||""),I.a.twitter.userName(t.Result.Twitter||"")):(I.a.google.userName(""),I.a.facebook.userName(""),I.a.twitter.userName("")),I.a.google.loading(!1),I.a.facebook.loading(!1),I.a.twitter.loading(!1)})},t.prototype.googleDisconnect=function(){I.a.google.loading(!0),z.a.googleDisconnect(this.socialUsers)},t.prototype.facebookDisconnect=function(){I.a.facebook.loading(!0),z.a.facebookDisconnect(this.socialUsers)},t.prototype.twitterDisconnect=function(){I.a.twitter.loading(!0),z.a.twitterDisconnect(this.socialUsers)},t.prototype.getAutocomplete=function(e,t){z.a.suggestions(function(e,n){S.StorageResultType.Success===e&&n&&i.i(v.isArray)(n.Result)?t(p.a.compact(p.a.map(n.Result,function(e){return e&&e[0]?new q.EmailModel(e[0],e[1]):null}))):S.StorageResultType.Abort!==e&&t([])},e)},t.prototype.setExpandedFolder=function(e,t){var n=G.a(S.ClientSideKeyName.ExpandedFolders);i.i(v.isArray)(n)||(n=[]),t?(n.push(e),n=p.a.uniq(n)):n=p.a.without(n,e),G.b(S.ClientSideKeyName.ExpandedFolders,n)},t.prototype.initHorizontalLayoutResizer=function(e){var t=null,n=null,o=200,a=500,r=function(e){e&&(t&&t.attr("style","height:"+e+"px"),n&&n.attr("style","top:"+(55+e)+"px"))},s=function(e){e&&e.target&&f()(e.target).find(".ui-resizable-handle").on("mousedown",function(){w.$html.addClass("rl-resizer")}).on("mouseup",function(){w.$html.removeClass("rl-resizer")})},l=function(){w.$html.addClass("rl-resizer")},c=p.a.debounce(function(){w.$html.addClass("rl-resizer")},500,!0),u=function(t,n){w.$html.removeClass("rl-resizer"),n&&n.size&&n.size.height&&(G.b(e,n.size.height),r(n.size.height),i.i(v.windowResize)())},d={helper:"ui-resizable-helper-h",minHeight:o,maxHeight:a,handles:"s",create:s,resize:c,start:l,stop:u},h=function(a){if(a)t&&t.hasClass("ui-resizable")&&t.resizable("destroy").removeAttr("style"),n&&n.removeAttr("style");else if(w.$html.hasClass("rl-bottom-preview-pane")){t=f()(".b-message-list-wrapper"),n=f()(".b-message-view-wrapper"),t.hasClass("ui-resizable")||t.resizable(d);var s=i.i(v.pInt)(G.a(e))||300;r(s>o?s:o)}};h(!1),N.b("layout",function(e){h(S.Layout.BottomPreview!==e)})},t.prototype.initVerticalLayoutResizer=function(e){var t=60,n=155,o=f()("#rl-left"),a=f()("#rl-right"),r=G.a(e)||null,s=function(e){e&&(i.i(w.leftPanelWidth)(e),w.$html.removeClass("rl-resizer"),o.css({width:""+e+"px"}),a.css({left:""+e+"px"}))},l=function(a){if(a)o.resizable("disable"),s(t);else{o.resizable("enable");var r=i.i(v.pInt)(G.a(e))||n;s(r>n?r:n)}},c=function(e){e&&e.target&&f()(e.target).find(".ui-resizable-handle").on("mousedown",function(){w.$html.addClass("rl-resizer")}).on("mouseup",function(){w.$html.removeClass("rl-resizer")})},u=p.a.debounce(function(){w.$html.addClass("rl-resizer")},500,!0),d=function(){w.$html.addClass("rl-resizer")},h=function(t,n){w.$html.removeClass("rl-resizer"),n&&n.size&&n.size.width&&(G.b(e,n.size.width),i.i(w.leftPanelWidth)(n.size.width),a.css({left:""+n.size.width+"px"}),o.css({position:"",top:"",left:"",height:""}))};null!==r&&s(r>n?r:n),o.resizable({helper:"ui-resizable-helper-w",minWidth:n,maxWidth:S.Magics.Size350px,handles:"e",create:c,resize:u,start:d,stop:h}),N.b("left-panel.off",function(){l(!0)}),N.b("left-panel.on",function(){l(!1)})},t.prototype.logout=function(){var e=this;z.a.logout(function(){e.loginAndLogoutReload(!1,!0,K.settingsGet("ParentEmail")&&0<K.settingsGet("ParentEmail").length)})},t.prototype.bootstartTwoFactorScreen=function(){i.i(ee.showScreenPopup)(i(191),[!0])},t.prototype.bootstartWelcomePopup=function(e){i.i(ee.showScreenPopup)(i(255),[e])},t.prototype.bootstartLoginScreen=function(){w.$html.removeClass("rl-user-auth").addClass("rl-user-no-auth");var e=i.i(v.pString)(K.appSettingsGet("customLoginLink"));e?(i.i(ee.routeOff)(),i.i(ee.setHash)(i.i(F.z)(),!0),i.i(ee.routeOff)(),p.a.defer(function(){u.a.location.href=e})):(i.i(ee.startScreens)([X.a]),i.i(C.a)("rl-start-login-screens"),N.a("rl.bootstart-login-screens"))},t.prototype.bootend=function(){g.a&&g.a.set(100).end(),i.i(ee.hideLoading)()},t.prototype.bootstart=function(){var t=this;e.prototype.bootstart.call(this),L.a.populate(),_.a.populate(),P.a.populate(),D.a.populate(),M.a.populate();var n=i.i(v.pInt)(K.settingsGet("ContactsSyncInterval")),o=K.appSettingsGet("jsHash"),a=i.i(v.pString)(K.settingsGet("StartupUrl")),r=K.settingsGet("AllowGoogleSocial"),s=K.settingsGet("AllowFacebookSocial"),l=K.settingsGet("AllowTwitterSocial");g.a&&g.a.set(90),w.leftPanelDisabled.subscribe(function(e){N.a("left-panel."+(e?"off":"on"))}),this.setWindowTitle(""),K.settingsGet("Auth")?(w.$html.addClass("rl-user-auth"),K.capa(S.Capa.TwoFactor)&&K.capa(S.Capa.TwoFactorForce)&&K.settingsGet("RequireTwoFactor")?(this.bootend(),this.bootstartTwoFactorScreen()):(this.setWindowTitle(i.i(R.i18n)("TITLES/LOADING")),this.foldersReload(function(e){if(t.bootend(),e){if(""!==a&&(i.i(ee.routeOff)(),i.i(ee.setHash)(i.i(F.z)(a),!0),i.i(ee.routeOn)()),v.jassl&&u.a.crypto&&u.a.crypto.getRandomValues&&K.capa(S.Capa.OpenPGP)){var o=function(e){if(U.a.openpgp=e,u.a.Worker)try{U.a.openpgp.initWorker({path:i.i(F.H)()})}catch(e){i.i(v.log)(e)}U.a.openpgpKeyring=new e.Keyring,U.a.capaOpenPGP(!0),N.a("openpgp.init"),t.reloadOpenPgpKeys()};u.a.openpgp?o(u.a.openpgp):i.i(v.jassl)(i.i(F.I)()).then(function(){u.a.openpgp&&o(u.a.openpgp)})}else U.a.capaOpenPGP(!1);i.i(ee.startScreens)([Z.a,K.capa(S.Capa.Settings)?Q.a:null]),(r||s||l)&&t.socialUsers(!0),N.b("interval.2m",function(){return t.folderInformation(i.i(A.a)())}),N.b("interval.3m",function(){var e=x.a.currentFolderFullNameRaw();i.i(A.a)()!==e&&t.folderInformation(e)}),N.b("interval.2m-after5m",function(){return t.folderInformationMultiply()}),N.b("interval.15m",function(){return t.quota()}),N.b("interval.20m",function(){return t.foldersReload()}),n=5<=n?n:20,n=320>=n?n:320,p.a.delay(function(){return t.contactsSync()},S.Magics.Time10s),p.a.delay(function(){return t.folderInformationMultiply(!0)},S.Magics.Time2s),u.a.setInterval(function(){return t.contactsSync()},6e4*n+5e3),t.accountsAndIdentities(!0),p.a.delay(function(){var e=x.a.currentFolderFullNameRaw();i.i(A.a)()!==e&&t.folderInformation(e)},1e3),p.a.delay(function(){return t.quota()},5e3),p.a.delay(function(){return z.a.appDelayStart(v.noop)},35e3),N.b("rl.auto-logout",function(){return t.logout()}),i.i(C.a)("rl-start-user-screens"),N.a("rl.bootstart-user-screens"),K.settingsGet("WelcomePageUrl")&&p.a.delay(function(){return t.bootstartWelcomePopup(K.settingsGet("WelcomePageUrl"))},1e3),K.settingsGet("AccountSignMe")&&u.a.navigator.registerProtocolHandler&&K.capa(S.Capa.Composer)&&p.a.delay(function(){try{u.a.navigator.registerProtocolHandler("mailto",u.a.location.protocol+"//"+u.a.location.host+u.a.location.pathname+"?mailto&to=%s",""+(K.settingsGet("Title")||"RainLoop"))}catch(e){}K.settingsGet("MailToEmail")&&i.i(v.mailToHelper)(K.settingsGet("MailToEmail"),i(37))},500),w.bMobileDevice||(p.a.defer(function(){return t.initVerticalLayoutResizer(S.ClientSideKeyName.FolderListSize)}),y.a&&K.appSettingsGet("faviconStatus")&&!K.appSettingsGet("listPermanentFiltered")&&(y.a.setOptions({fallback:!1}),N.b("mailbox.inbox-unread-count",function(e){return y.a.setBubble(0<e?99<e?99:e:0)})))}else t.logout()}))):(this.bootend(),this.bootstartLoginScreen()),r&&(u.a["rl_"+o+"_google_service"]=function(){I.a.google.loading(!0),t.socialUsers()}),s&&(u.a["rl_"+o+"_facebook_service"]=function(){I.a.facebook.loading(!0),t.socialUsers()}),l&&(u.a["rl_"+o+"_twitter_service"]=function(){I.a.twitter.loading(!0),t.socialUsers()}),N.b("interval.1m",function(){return i.i(E.reload)()}),i.i(C.a)("rl-start-screens"),N.a("rl.bootstart-end")},t}(te.a);t.default=new ie},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(12),r=i.n(a),s=i(6),l=i.n(s),c=i(19),u=i.n(c),d=i(2),p=i.n(d),h=i(3),f=i(1);i.d(t,"a",function(){return m});var m=function(){function e(t,n,a,r,s,c,u){var d=this;o()(this,e),this.selectedItemUseCallback=!0,this.iSelectNextHelper=0,this.iFocusedNextHelper=0,this.sLastUid="",this.oCallbacks={},this.list=t,this.listChecked=p.a.computed(function(){return l.a.filter(d.list(),function(e){return e.checked()})}).extend({rateLimit:0}),this.isListChecked=p.a.computed(function(){return 0<d.listChecked().length}),this.focusedItem=a||p.a.observable(null),this.selectedItem=n||p.a.observable(null),this.itemSelectedThrottle=l.a.debounce(l.a.bind(this.itemSelected,this),300),this.listChecked.subscribe(function(e){0<e.length?null===d.selectedItem()?d.selectedItem.valueHasMutated&&d.selectedItem.valueHasMutated():d.selectedItem(null):d.autoSelect()&&d.focusedItem()&&d.selectedItem(d.focusedItem())},this),this.selectedItem.subscribe(function(e){e?(d.isListChecked()&&l.a.each(d.listChecked(),function(e){e.checked(!1)}),d.selectedItemUseCallback&&d.itemSelectedThrottle(e)):d.selectedItemUseCallback&&d.itemSelected(null)},this),this.selectedItem=this.selectedItem.extend({toggleSubscribeProperty:[this,"selected"]}),this.focusedItem=this.focusedItem.extend({toggleSubscribeProperty:[null,"focused"]}),this.sItemSelector=r,this.sItemSelectedSelector=s,this.sItemCheckedSelector=c,this.sItemFocusedSelector=u,this.focusedItem.subscribe(function(e){e&&(d.sLastUid=d.getItemUid(e))},this);var h=[],m=[],g=null,b=null;this.list.subscribe(function(e){i.i(f.isArray)(e)&&l.a.each(e,function(e){if(e){var t=d.getItemUid(e);h.push(t),e.checked()&&m.push(t),null===g&&e.focused()&&(g=t),null===b&&e.selected()&&(b=t)}})},this,"beforeChange"),this.list.subscribe(function(e){var t=null,n=!1,o=g,a=!1,r=!1,s=0,c=[];d.selectedItemUseCallback=!1,d.focusedItem(null),d.selectedItem(null),i.i(f.isArray)(e)&&(s=m.length,l.a.each(e,function(e){var t=d.getItemUid(e);c.push(t),null!==g&&g===t&&(d.focusedItem(e),g=null),0<s&&-1<i.i(f.inArray)(t,m)&&(a=!0,e.checked(!0),s-=1),a||null===b||b!==t||(r=!0,d.selectedItem(e),b=null)}),d.selectedItemUseCallback=!0,a||r||!d.autoSelect()||(d.focusedItem()?d.selectedItem(d.focusedItem()):0<e.length&&(null!==o&&(n=!1,o=l.a.find(h,function(e){return n&&-1<i.i(f.inArray)(e,c)?e:(o===e&&(n=!0),!1)}),o&&(t=l.a.find(e,function(e){return o===d.getItemUid(e)}))),d.selectedItem(t||null),d.focusedItem(d.selectedItem()))),(0!==d.iSelectNextHelper||0!==d.iFocusedNextHelper)&&0<e.length&&!d.focusedItem()&&(t=null,0!==d.iFocusedNextHelper&&(t=e[-1===d.iFocusedNextHelper?e.length-1:0]||null),t||0===d.iSelectNextHelper||(t=e[-1===d.iSelectNextHelper?e.length-1:0]||null),t&&(0!==d.iSelectNextHelper&&d.selectedItem(t||null),d.focusedItem(t||null),d.scrollToFocused(),l.a.delay(function(){return d.scrollToFocused()},100)),d.iSelectNextHelper=0,d.iFocusedNextHelper=0)),h=[],m=[],g=null,b=null})}return e.prototype.itemSelected=function(e){this.isListChecked()?e||(this.oCallbacks.onItemSelect||f.noop)(e||null):e&&(this.oCallbacks.onItemSelect||f.noop)(e)},e.prototype.goDown=function(e){this.newSelectPosition(h.EventKeyCode.Down,!1,e)},e.prototype.goUp=function(e){this.newSelectPosition(h.EventKeyCode.Up,!1,e)},e.prototype.unselect=function(){this.selectedItem(null),this.focusedItem(null)},e.prototype.init=function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";this.oContentVisible=e,this.oContentScrollable=t,this.oContentVisible&&this.oContentScrollable&&(r()(this.oContentVisible).on("selectstart",function(e){e&&e.preventDefault&&e.preventDefault()}).on("click",this.sItemSelector,function(e){i.actionClick(p.a.dataFor(e.currentTarget),e)}).on("click",this.sItemCheckedSelector,function(e){var t=p.a.dataFor(e.currentTarget);t&&(e&&e.shiftKey?i.actionClick(t,e):(i.focusedItem(t),t.checked(!t.checked())))}),u()("enter",n,function(){return!(i.focusedItem()&&!i.focusedItem().selected())||(i.actionClick(i.focusedItem()),!1)}),u()("ctrl+up, command+up, ctrl+down, command+down",n,function(){return!1}),u()("up, shift+up, down, shift+down, home, end, pageup, pagedown, insert, space",n,function(e,t){if(e&&t&&t.shortcut){var n=0;switch(t.shortcut){case"up":case"shift+up":n=h.EventKeyCode.Up;break;case"down":case"shift+down":n=h.EventKeyCode.Down;break;case"insert":n=h.EventKeyCode.Insert;break;case"space":n=h.EventKeyCode.Space;break;case"home":n=h.EventKeyCode.Home;break;case"end":n=h.EventKeyCode.End;break;case"pageup":n=h.EventKeyCode.PageUp;break;case"pagedown":n=h.EventKeyCode.PageDown}if(0<n)return i.newSelectPosition(n,u.a.shift),!1}return!0}))},e.prototype.autoSelect=function(){return!!(this.oCallbacks.onAutoSelect||f.noopTrue)()},e.prototype.doUpUpOrDownDown=function(e){(this.oCallbacks.onUpUpOrDownDown||f.noopTrue)(!!e)},e.prototype.getItemUid=function(e){var t="",i=this.oCallbacks.onItemGetUid||null;return i&&e&&(t=i(e)),t.toString()},e.prototype.newSelectPosition=function(e,t,i){var n=0,o=!1,a=!1,r=null,s=10,c=this.list(),u=c?c.length:0,d=this.focusedItem();if(0<u)if(d){if(d)if(h.EventKeyCode.Down===e||h.EventKeyCode.Up===e||h.EventKeyCode.Insert===e||h.EventKeyCode.Space===e)l.a.each(c,function(t){if(!a)switch(e){case h.EventKeyCode.Up:d===t?a=!0:r=t;break;case h.EventKeyCode.Down:case h.EventKeyCode.Insert:o?(r=t,a=!0):d===t&&(o=!0)}}),r||h.EventKeyCode.Down!==e&&h.EventKeyCode.Up!==e||this.doUpUpOrDownDown(h.EventKeyCode.Up===e);else if(h.EventKeyCode.Home===e||h.EventKeyCode.End===e)h.EventKeyCode.Home===e?r=c[0]:h.EventKeyCode.End===e&&(r=c[c.length-1]);else if(h.EventKeyCode.PageDown===e){for(;n<u;n++)if(d===c[n]){n+=s,n=u-1<n?u-1:n,r=c[n];break}}else if(h.EventKeyCode.PageUp===e)for(n=u;0<=n;n--)if(d===c[n]){n-=s,n=0>n?0:n,r=c[n];break}}else h.EventKeyCode.Down===e||h.EventKeyCode.Insert===e||h.EventKeyCode.Space===e||h.EventKeyCode.Home===e||h.EventKeyCode.PageUp===e?r=c[0]:h.EventKeyCode.Up!==e&&h.EventKeyCode.End!==e&&h.EventKeyCode.PageDown!==e||(r=c[c.length-1]);r?(this.focusedItem(r),d&&(t?h.EventKeyCode.Up!==e&&h.EventKeyCode.Down!==e||d.checked(!d.checked()):h.EventKeyCode.Insert!==e&&h.EventKeyCode.Space!==e||d.checked(!d.checked())),!this.autoSelect()&&!i||this.isListChecked()||h.EventKeyCode.Space===e||this.selectedItem(r),this.scrollToFocused()):d&&(!t||h.EventKeyCode.Up!==e&&h.EventKeyCode.Down!==e?h.EventKeyCode.Insert!==e&&h.EventKeyCode.Space!==e||d.checked(!d.checked()):d.checked(!d.checked()),this.focusedItem(d))},e.prototype.scrollToFocused=function(){if(!this.oContentVisible||!this.oContentScrollable)return!1;var e=20,t=this.list(),i=r()(this.sItemFocusedSelector,this.oContentScrollable),n=i.position(),o=this.oContentVisible.height(),a=i.outerHeight();return t&&t[0]&&t[0].focused()?(this.oContentScrollable.scrollTop(0),!0):!(!n||!(0>n.top||n.top+a>o))&&(this.oContentScrollable.scrollTop(0>n.top?this.oContentScrollable.scrollTop()+n.top-e:this.oContentScrollable.scrollTop()+n.top-o+a+e),!0)},e.prototype.scrollToTop=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return!(!this.oContentVisible||!this.oContentScrollable)&&(e||50>this.oContentScrollable.scrollTop()?this.oContentScrollable.scrollTop(0):this.oContentScrollable.stop().animate({scrollTop:0},200),!0)},e.prototype.eventClickFunction=function(e,t){var i=0,n=0,o=!1,a=!1,r=[],s=!1,l=null,c="",u=this.getItemUid(e);if(t&&t.shiftKey&&""!==u&&""!==this.sLastUid&&u!==this.sLastUid)for(r=this.list(),s=e.checked(),i=0,n=r.length;i<n;i++)l=r[i],c=this.getItemUid(l),o=!1,c!==this.sLastUid&&c!==u||(o=!0),o&&(a=!a),(a||o)&&l.checked(s);this.sLastUid=""===u?"":u},e.prototype.actionClick=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){var i=!0;t&&(!t.shiftKey||t.ctrlKey||t.metaKey||t.altKey?!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(i=!1,this.focusedItem(e),this.selectedItem()&&e!==this.selectedItem()&&this.selectedItem().checked(!0),e.checked(!e.checked())):(i=!1,""===this.sLastUid&&(this.sLastUid=this.getItemUid(e)),e.checked(!e.checked()),this.eventClickFunction(e,t),this.focusedItem(e))),i&&this.selectMessageItem(e)}},e.prototype.on=function(e,t){this.oCallbacks[e]=t},e.prototype.selectMessageItem=function(e){this.focusedItem(e),this.selectedItem(e),this.scrollToFocused()},e}()},function(e,t,i){"use strict";function n(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=0,a=0,r=[];if(i.i(s.isNonEmptyArray)(e))for(a=e.length;o<a;o++)r.push(e[o].toLine(t,n));return r.join(", ")}function o(e){var t=0,n=0,o=[];if(i.i(s.isNonEmptyArray)(e))for(n=e.length;t<n;t++)e[t]&&e[t].email&&""!==e[t].name&&o.push(e[t].email);return o.join(", ")}function a(e){var t=0,n=0,o=null,a=[];if(i.i(s.isNonEmptyArray)(e))for(t=0,n=e.length;t<n;t++)o=l.EmailModel.newInstanceFromJson(e[t]),o&&a.push(o);return a}function r(e,t,n){if(e&&0<e.length)for(var o=0,a=e.length;o<a;o++)i.i(s.isUnd)(t[e[o].email])&&(t[e[o].email]=!0,n.push(e[o]))}var s=i(1),l=i(38);t.b=n,t.c=o,t.a=a,t.d=r},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(11),u=i.n(c),d=i(6),p=i.n(d),h=i(2),f=i.n(h),m=i(3),g=i(7),b=i(1),y=i(14),v=i(36),S=i(101);i.d(t,"d",function(){return w}),i.d(t,"c",function(){return T}),i.d(t,"a",function(){return C}),i.d(t,"b",function(){return E});var w=p.a.memoize(function(e,t){e=i.i(b.trim)(e).toLowerCase(),t=i.i(b.trim)(t).toLowerCase();var n=m.FileType.Unknown,o=t.split("/");switch(!0){case"image"===o[0]||-1<i.i(b.inArray)(e,["png","jpg","jpeg","gif","bmp"]):n=m.FileType.Image;break;case"audio"===o[0]||-1<i.i(b.inArray)(e,["mp3","ogg","oga","wav"]):n=m.FileType.Audio;break;case"video"===o[0]||-1<i.i(b.inArray)(e,["mkv","avi"]):n=m.FileType.Video;break;case-1<i.i(b.inArray)(e,["php","js","css"]):n=m.FileType.Code;break;case"eml"===e||-1<i.i(b.inArray)(t,["message/delivery-status","message/rfc822"]):n=m.FileType.Eml;break;case"text"===o[0]&&"html"!==o[1]||-1<i.i(b.inArray)(e,["txt","log"]):n=m.FileType.Text;break;case"text/html"===t||-1<i.i(b.inArray)(e,["html"]):n=m.FileType.Html;break;case-1<i.i(b.inArray)(o[1],["zip","7z","tar","rar","gzip","bzip","bzip2","x-zip","x-7z","x-rar","x-tar","x-gzip","x-bzip","x-bzip2","x-zip-compressed","x-7z-compressed","x-rar-compressed"])||-1<i.i(b.inArray)(e,["zip","7z","tar","rar","gzip","bzip","bzip2"]):n=m.FileType.Archive;break;case-1<i.i(b.inArray)(o[1],["pdf","x-pdf"])||-1<i.i(b.inArray)(e,["pdf"]):n=m.FileType.Pdf;break;case-1<i.i(b.inArray)(t,["application/pgp-signature","application/pgp-keys"])||-1<i.i(b.inArray)(e,["asc","pem","ppk"]):
n=m.FileType.Certificate;break;case-1<i.i(b.inArray)(t,["application/pkcs7-signature"])||-1<i.i(b.inArray)(e,["p7s"]):n=m.FileType.CertificateBin;break;case-1<i.i(b.inArray)(o[1],["rtf","msword","vnd.msword","vnd.openxmlformats-officedocument.wordprocessingml.document","vnd.openxmlformats-officedocument.wordprocessingml.template","vnd.ms-word.document.macroEnabled.12","vnd.ms-word.template.macroEnabled.12"]):n=m.FileType.WordText;break;case-1<i.i(b.inArray)(o[1],["excel","ms-excel","vnd.ms-excel","vnd.openxmlformats-officedocument.spreadsheetml.sheet","vnd.openxmlformats-officedocument.spreadsheetml.template","vnd.ms-excel.sheet.macroEnabled.12","vnd.ms-excel.template.macroEnabled.12","vnd.ms-excel.addin.macroEnabled.12","vnd.ms-excel.sheet.binary.macroEnabled.12"]):n=m.FileType.Sheet;break;case-1<i.i(b.inArray)(o[1],["powerpoint","ms-powerpoint","vnd.ms-powerpoint","vnd.openxmlformats-officedocument.presentationml.presentation","vnd.openxmlformats-officedocument.presentationml.template","vnd.openxmlformats-officedocument.presentationml.slideshow","vnd.ms-powerpoint.addin.macroEnabled.12","vnd.ms-powerpoint.presentation.macroEnabled.12","vnd.ms-powerpoint.template.macroEnabled.12","vnd.ms-powerpoint.slideshow.macroEnabled.12"]):n=m.FileType.Presentation}return n}),T=p.a.memoize(function(e){var t="",i="icon-file";switch(e){case m.FileType.Text:case m.FileType.Eml:case m.FileType.WordText:i="icon-file-text";break;case m.FileType.Html:case m.FileType.Code:i="icon-file-code";break;case m.FileType.Image:i="icon-file-image";break;case m.FileType.Audio:i="icon-file-music";break;case m.FileType.Video:i="icon-file-movie";break;case m.FileType.Archive:i="icon-file-zip";break;case m.FileType.Certificate:case m.FileType.CertificateBin:i="icon-file-certificate";break;case m.FileType.Sheet:i="icon-file-excel";break;case m.FileType.Presentation:i="icon-file-chart-graph";break;case m.FileType.Pdf:t="pdf",i="icon-none"}return[i,t]}),C=function(e){var t="",n=[];if(i.i(b.isNonEmptyArray)(e)&&(t="icon-attachment",n=p.a.uniq(p.a.compact(p.a.map(e,function(e){return e?w(i.i(b.getFileExtension)(e[0]),e[1]):""}))),n&&1===n.length&&n[0]))switch(n[0]){case m.FileType.Text:case m.FileType.WordText:t="icon-file-text";break;case m.FileType.Html:case m.FileType.Code:t="icon-file-code";break;case m.FileType.Image:t="icon-file-image";break;case m.FileType.Audio:t="icon-file-music";break;case m.FileType.Video:t="icon-file-movie";break;case m.FileType.Archive:t="icon-file-zip";break;case m.FileType.Certificate:case m.FileType.CertificateBin:t="icon-file-certificate";break;case m.FileType.Sheet:t="icon-file-excel";break;case m.FileType.Presentation:t="icon-file-chart-graph"}return t},E=function(e){function t(){o()(this,t);var i=r()(this,e.call(this,"AttachmentModel"));return i.checked=f.a.observable(!1),i.mimeType="",i.fileName="",i.fileNameExt="",i.fileType=m.FileType.Unknown,i.estimatedSize=0,i.friendlySize="",i.isInline=!1,i.isLinked=!1,i.isThumbnail=!1,i.cid="",i.cidWithOutTags="",i.contentLocation="",i.download="",i.folder="",i.uid="",i.mimeIndex="",i.framed=!1,i}return l()(t,e),t.newInstanceFromJson=function(e){var i=new t;return i.initByJson(e)?i:null},t.prototype.initByJson=function(e){var t=!1;return e&&"Object/Attachment"===e["@Object"]&&(this.mimeType=i.i(b.trim)((e.MimeType||"").toLowerCase()),this.fileName=i.i(b.trim)(e.FileName),this.estimatedSize=i.i(b.pInt)(e.EstimatedSize),this.isInline=!!e.IsInline,this.isLinked=!!e.IsLinked,this.isThumbnail=!!e.IsThumbnail,this.cid=e.CID,this.contentLocation=e.ContentLocation,this.download=e.Download,this.folder=e.Folder,this.uid=e.Uid,this.mimeIndex=e.MimeIndex,this.framed=!!e.Framed,this.friendlySize=i.i(b.friendlySize)(this.estimatedSize),this.cidWithOutTags=this.cid.replace(/^<+/,"").replace(/>+$/,""),this.fileNameExt=i.i(b.getFileExtension)(this.fileName),this.fileType=w(this.fileNameExt,this.mimeType),t=!0),t},t.prototype.isImage=function(){return m.FileType.Image===this.fileType},t.prototype.isMp3=function(){return m.FileType.Audio===this.fileType&&"mp3"===this.fileNameExt},t.prototype.isOgg=function(){return m.FileType.Audio===this.fileType&&("oga"===this.fileNameExt||"ogg"===this.fileNameExt)},t.prototype.isWav=function(){return m.FileType.Audio===this.fileType&&"wav"===this.fileNameExt},t.prototype.hasThumbnail=function(){return this.isThumbnail},t.prototype.isText=function(){return m.FileType.Text===this.fileType||m.FileType.Eml===this.fileType||m.FileType.Certificate===this.fileType||m.FileType.Html===this.fileType||m.FileType.Code===this.fileType},t.prototype.isPdf=function(){return m.FileType.Pdf===this.fileType},t.prototype.isFramed=function(){return this.framed&&g.data.__APP__&&g.data.__APP__.googlePreviewSupported()&&!(this.isPdf()&&g.bAllowPdfPreview)&&!this.isText()&&!this.isImage()},t.prototype.hasPreview=function(){return this.isImage()||this.isPdf()&&g.bAllowPdfPreview||this.isText()||this.isFramed()},t.prototype.hasPreplay=function(){return S.a.supportedMp3&&this.isMp3()||S.a.supportedOgg&&this.isOgg()||S.a.supportedWav&&this.isWav()},t.prototype.linkDownload=function(){return i.i(y.d)(this.download)},t.prototype.linkPreview=function(){return i.i(y.e)(this.download)},t.prototype.linkThumbnail=function(){return this.hasThumbnail()?i.i(y.f)(this.download):""},t.prototype.linkThumbnailPreviewStyle=function(){var e=this.linkThumbnail();return""===e?"":"background:url("+e+")"},t.prototype.linkFramed=function(){return i.i(y.g)(this.download)},t.prototype.linkPreviewAsPlain=function(){return i.i(y.h)(this.download)},t.prototype.linkPreviewMain=function(){var e="";switch(!0){case this.isImage():case this.isPdf()&&g.bAllowPdfPreview:e=this.linkPreview();break;case this.isText():e=this.linkPreviewAsPlain();break;case this.isFramed():e=this.linkFramed()}return e},t.prototype.generateTransferDownloadUrl=function(){var e=this.linkDownload();return"http"!==e.substr(0,4)&&(e=u.a.location.protocol+"//"+u.a.location.host+u.a.location.pathname+e),this.mimeType+":"+this.fileName+":"+e},t.prototype.eventDragStart=function(e,t){var i=t.originalEvent||t;return e&&i&&i.dataTransfer&&i.dataTransfer.setData&&i.dataTransfer.setData("DownloadURL",this.generateTransferDownloadUrl()),!0},t.prototype.iconClass=function(){return T(this.fileType)[0]},t.prototype.iconText=function(){return T(this.fileType)[1]},t}(v.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(47),r=i.n(a),s=i(1);i.d(t,"a",function(){return l});var l=function(){function e(){o()(this,e),this.oPromisesStack={}}return e.prototype.func=function(e){return e(),this},e.prototype.fastResolve=function(e){return r.a.resolve(e)},e.prototype.fastReject=function(e){return r.a.reject(e)},e.prototype.setTrigger=function(e,t){e&&(t=!!t,(i.i(s.isArray)(e)?e:[e]).forEach(function(e){e&&e(t)}))},e}()},,function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(3),l=function e(){o()(this,e),this.capa=r.a.observable(""),this.modules=r.a.observable({}),this.filters=r.a.observableArray([]),this.filters.loading=r.a.observable(!1).extend({throttle:s.Magics.Time200ms}),this.filters.saving=r.a.observable(!1).extend({throttle:s.Magics.Time200ms}),this.raw=r.a.observable("")};t.a=new l},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(2),l=i.n(s),c=i(3),u=function(){function e(){var t=this;o()(this,e),this.quota=l.a.observable(0),this.usage=l.a.observable(0),this.percentage=l.a.computed(function(){var e=t.quota(),i=t.usage();return 0<e?r.a.Math.ceil(i/e*100):0})}return e.prototype.populateData=function(e,t){this.quota(e*c.Magics.BitLength1024),this.usage(t*c.Magics.BitLength1024)},e}();t.a=new u},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(6),l=i.n(s),c=function(){function e(){o()(this,e),this.templates=r.a.observableArray([]),this.templates.loading=r.a.observable(!1).extend({throttle:100}),this.templatesNames=r.a.observableArray([]).extend({throttle:1e3}),this.templatesNames.skipFirst=!0,this.subscribers()}return e.prototype.subscribers=function(){var e=this;this.templates.subscribe(function(t){e.templatesNames(l.a.compact(l.a.map(t,function(e){return e?e.name:null})))})},e}();t.a=new c},,function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(6),h=i.n(p),f=i(2),m=i.n(f),g=i(3),b=i(7),y=i(1),v=i(8),S=i(183),w=i(30),T=i(9),C=i(13);i.d(t,"FilterPopupView",function(){return R}),i.d(t,"default",function(){return R});var E,A,F,N,R=(E=i.i(T.popup)({name:"View/Popup/Filter",templateID:"PopupsFilter"}),A=i.i(T.command)(),E((N=function(e){function t(){s()(this,t);var n=c()(this,e.call(this));return n.isNew=m.a.observable(!0),n.modules=S.a.modules,n.fTrueCallback=null,n.filter=m.a.observable(null),n.allowMarkAsRead=m.a.observable(!1),n.defautOptionsAfterRender=y.defautOptionsAfterRender,n.folderSelectList=w.a.folderMenuForFilters,n.selectedFolderValue=m.a.observable(""),n.selectedFolderValue.subscribe(function(){n.filter()&&n.filter().actionValue.error(!1)}),n.actionTypeOptions=m.a.observableArray([]),n.fieldOptions=m.a.observableArray([]),n.typeOptions=m.a.observableArray([]),n.typeOptionsSize=m.a.observableArray([]),i.i(v.initOnStartOrLangChange)(h.a.bind(n.populateOptions,n)),n.modules.subscribe(n.populateOptions,n),n}return d()(t,e),t.prototype.saveFilterCommand=function(){if(this.filter()){if(g.FiltersAction.MoveTo===this.filter().actionType()&&this.filter().actionValue(this.selectedFolderValue()),!this.filter().verify())return!1;this.fTrueCallback&&this.fTrueCallback(this.filter()),this.modalVisibility()&&i.i(y.delegateRun)(this,"closeCommand")}return!0},t.prototype.populateOptions=function(){this.actionTypeOptions([]);var e=this.modules();e&&(e.markasread&&this.allowMarkAsRead(!0),e.moveto&&this.actionTypeOptions.push({id:g.FiltersAction.MoveTo,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_ACTION_MOVE_TO")}),e.redirect&&this.actionTypeOptions.push({id:g.FiltersAction.Forward,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_ACTION_FORWARD_TO")}),e.reject&&this.actionTypeOptions.push({id:g.FiltersAction.Reject,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_ACTION_REJECT")}),e.vacation&&this.actionTypeOptions.push({id:g.FiltersAction.Vacation,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_ACTION_VACATION_MESSAGE")})),this.actionTypeOptions.push({id:g.FiltersAction.Discard,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_ACTION_DISCARD")}),this.fieldOptions([{id:g.FilterConditionField.From,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_FIELD_FROM")},{id:g.FilterConditionField.Recipient,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_FIELD_RECIPIENTS")},{id:g.FilterConditionField.Subject,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_FIELD_SUBJECT")},{id:g.FilterConditionField.Size,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_FIELD_SIZE")},{id:g.FilterConditionField.Header,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_FIELD_HEADER")}]),this.typeOptions([{id:g.FilterConditionType.Contains,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_TYPE_CONTAINS")},{id:g.FilterConditionType.NotContains,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_TYPE_NOT_CONTAINS")},{id:g.FilterConditionType.EqualTo,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_TYPE_EQUAL_TO")},{id:g.FilterConditionType.NotEqualTo,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_TYPE_NOT_EQUAL_TO")}]),e&&e.regex&&this.typeOptions.push({id:g.FilterConditionType.Regex,name:"Regex"}),this.typeOptionsSize([{id:g.FilterConditionType.Over,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_TYPE_OVER")},{id:g.FilterConditionType.Under,name:i.i(v.i18n)("POPUPS_FILTER/SELECT_TYPE_UNDER")}])},t.prototype.removeCondition=function(e){this.filter()&&this.filter().removeCondition(e)},t.prototype.clearPopup=function(){this.isNew(!0),this.fTrueCallback=null,this.filter(null)},t.prototype.onShow=function(e,t,i){this.clearPopup(),this.fTrueCallback=t,this.filter(e),e&&this.selectedFolderValue(e.actionValue()),this.isNew(!i),!i&&e&&e.name.focused(!0)},t.prototype.onShowWithDelay=function(){this.isNew()&&this.filter()&&!b.bMobileDevice&&this.filter().name.focused(!0)},t}(C.a),n(N.prototype,"saveFilterCommand",[A],a()(N.prototype,"saveFilterCommand"),N.prototype),F=N))||F)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(2),h=i.n(p),f=i(3),m=i(20),g=i(7),b=i(1),y=i(30),v=i(78),S=i(16),w=i(9),T=i(13);i.d(t,"FolderCreateView",function(){return N}),i.d(t,"default",function(){return N});var C,E,A,F,N=(C=i.i(w.popup)({name:"View/Popup/FolderCreate",templateID:"PopupsFolderCreate"}),E=i.i(w.command)(function(e){return e.simpleFolderNameValidation(e.folderName())}),C((F=function(e){function t(){s()(this,t);var n=c()(this,e.call(this));return n.folderName=h.a.observable(""),n.folderName.focused=h.a.observable(!1),n.selectedParentValue=h.a.observable(m.c),n.parentFolderSelectList=h.a.computed(function(){var e=[],t=y.a.folderList(),n=function(e){return e?e.isSystemFolder()?e.name()+" "+e.manageFolderSystemName():e.name():""};e.push(["",""]);var o=null;return""!==y.a.namespace&&(o=function(e){return y.a.namespace!==e.fullNameRaw.substr(0,y.a.namespace.length)}),i.i(b.folderListOptionsBuilder)([],t,[],e,null,o,null,n)}),n.defautOptionsAfterRender=b.defautOptionsAfterRender,n}return d()(t,e),t.prototype.createFolderCommand=function(){var e=this.selectedParentValue();""===e&&1<y.a.namespace.length&&(e=y.a.namespace.substr(0,y.a.namespace.length-1)),i.i(S.a)().foldersPromisesActionHelper(v.a.folderCreate(this.folderName(),e,y.a.foldersCreating),f.Notification.CantCreateFolder),this.cancelCommand()},t.prototype.simpleFolderNameValidation=function(e){return/^[^\\\/]+$/g.test(i.i(b.trim)(e))},t.prototype.clearPopup=function(){this.folderName(""),this.selectedParentValue(""),this.folderName.focused(!1)},t.prototype.onShow=function(){this.clearPopup()},t.prototype.onShowWithDelay=function(){g.bMobileDevice||this.folderName.focused(!0)},t}(T.a),n(F.prototype,"createFolderCommand",[E],a()(F.prototype,"createFolderCommand"),F.prototype),A=F))||A)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(19),p=i.n(d),h=i(3),f=i(9),m=i(13);i.d(t,"KeyboardShortcutsHelpPopupView",function(){return y}),i.d(t,"default",function(){return y});var g,b,y=(g=i.i(f.popup)({name:"View/Popup/KeyboardShortcutsHelp",templateID:"PopupsKeyboardShortcutsHelp"}),g(b=function(e){function t(){o()(this,t);var i=r()(this,e.call(this));return i.sDefaultKeyScope=h.KeyState.PopupKeyboardShortcutsHelp,i}return l()(t,e),t.prototype.onBuild=function(e){p()("tab, shift+tab, left, right",h.KeyState.PopupKeyboardShortcutsHelp,u.a.throttle(function(t,i){if(t&&i){var n=e.find(".nav.nav-tabs > li"),o=i&&("tab"===i.shortcut||"right"===i.shortcut),a=n.index(n.filter(".active"));return!o&&0<a?a-=1:o&&a<n.length-1?a+=1:a=o?0:n.length-1,n.eq(a).find('a[data-toggle="tab"]').tab("show"),!1}return!0},h.Magics.Time100ms))},t}(m.a))||b)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(2),h=i.n(p),f=i(3),m=i(1),g=i(8),b=i(75),y=i(18),v=i(16),S=i(9),w=i(13);i.d(t,"TemplatePopupView",function(){return F}),i.d(t,"default",function(){return F});var T,C,E,A,F=(T=i.i(S.popup)({name:"View/Popup/Template",templateID:"PopupsTemplate"}),C=i.i(S.command)(function(e){return!e.submitRequest()}),T((A=function(e){function t(){s()(this,t);var i=c()(this,e.call(this));return i.editor=null,i.signatureDom=h.a.observable(null),i.id=h.a.observable(""),i.name=h.a.observable(""),i.name.error=h.a.observable(!1),i.name.focus=h.a.observable(!1),i.body=h.a.observable(""),i.body.loading=h.a.observable(!1),i.body.error=h.a.observable(!1),i.name.subscribe(function(){i.name.error(!1)}),i.body.subscribe(function(){i.body.error(!1)}),i.submitRequest=h.a.observable(!1),i.submitError=h.a.observable(""),i}return d()(t,e),t.prototype.addTemplateCommand=function(){var e=this;return this.populateBodyFromEditor(),this.name.error(""===i.i(m.trim)(this.name())),this.body.error(""===i.i(m.trim)(this.body())||":HTML:"===i.i(m.trim)(this.body())),!this.name.error()&&!this.body.error()&&(this.submitRequest(!0),y.a.templateSetup(function(t,n){e.submitRequest(!1),f.StorageResultType.Success===t&&n?n.Result?(i.i(v.a)().templates(),e.cancelCommand()):n.ErrorCode&&e.submitError(i.i(g.getNotification)(n.ErrorCode)):e.submitError(i.i(g.getNotification)(f.Notification.UnknownError))},this.id(),this.name(),this.body()),!0)},t.prototype.clearPopup=function(){this.id(""),this.name(""),this.name.error(!1),this.body(""),this.body.loading(!1),this.body.error(!1),this.submitRequest(!1),this.submitError(""),this.editor&&this.editor.setPlain("",!1)},t.prototype.populateBodyFromEditor=function(){this.editor&&this.body(this.editor.getDataWithHtmlMark())},t.prototype.editorSetBody=function(e){var t=this;!this.editor&&this.signatureDom()?this.editor=new b.HtmlEditor(this.signatureDom(),function(){t.populateBodyFromEditor()},function(){t.editor.setHtmlOrPlain(e)}):this.editor.setHtmlOrPlain(e)},t.prototype.onShow=function(e){var t=this;this.clearPopup(),e&&e.id?(this.id(e.id),this.name(e.name),this.body(e.body),e.populated?this.editorSetBody(this.body()):(this.body.loading(!0),this.body.error(!1),y.a.templateGetById(function(n,o){t.body.loading(!1),f.StorageResultType.Success===n&&o&&o.Result&&"Object/Template"===o.Result["@Object"]&&i.i(m.isNormal)(o.Result.Body)?(e.body=o.Result.Body,e.populated=!0,t.body(e.body),t.body.error(!1)):(t.body(""),t.body.error(!0)),t.editorSetBody(t.body())},this.id()))):this.editorSetBody("")},t.prototype.onShowWithDelay=function(){this.name.focus(!0)},t}(w.a),n(A.prototype,"addTemplateCommand",[C],a()(A.prototype,"addTemplateCommand"),A.prototype),E=A))||E)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(11),u=i.n(c),d=i(6),p=i.n(d),h=i(2),f=i.n(h),m=i(275),g=i.n(m),b=i(3),y=i(1),v=i(8),S=i(10),w=i(18),T=i(16),C=i(9),E=i(13);i.d(t,"TwoFactorConfigurationPopupView",function(){return N}),i.d(t,"default",function(){return N});var A,F,N=(A=i.i(C.popup)({name:"View/Popup/TwoFactorConfiguration",templateID:"PopupsTwoFactorConfiguration"}),A(F=function(e){function t(){o()(this,t);var n=r()(this,e.call(this));return n.lock=f.a.observable(!1),n.capaTwoFactor=S.capa(b.Capa.TwoFactor),n.processing=f.a.observable(!1),n.clearing=f.a.observable(!1),n.secreting=f.a.observable(!1),n.viewUser=f.a.observable(""),n.twoFactorStatus=f.a.observable(!1),n.twoFactorTested=f.a.observable(!1),n.viewSecret=f.a.observable(""),n.viewBackupCodes=f.a.observable(""),n.viewUrlTitle=f.a.observable(""),n.viewUrl=f.a.observable(""),n.viewEnable_=f.a.observable(!1),n.viewEnable=f.a.computed({read:n.viewEnable_,write:function(e){e=!!e,e&&n.twoFactorTested()?(n.viewEnable_(e),w.a.enableTwoFactor(function(e,t){b.StorageResultType.Success===e&&t&&t.Result||n.viewEnable_(!1)},!0)):(e||n.viewEnable_(e),w.a.enableTwoFactor(function(e,t){b.StorageResultType.Success===e&&t&&t.Result||n.viewEnable_(!1)},!1))}}),n.viewTwoFactorEnableTooltip=f.a.computed(function(){return i.i(v.trigger)(),n.twoFactorTested()||n.viewEnable_()?"":i.i(v.i18n)("POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_TEST_BEFORE_DESC")}),n.viewTwoFactorStatus=f.a.computed(function(){return i.i(v.trigger)(),i.i(v.i18n)(n.twoFactorStatus()?"POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_CONFIGURED_DESC":"POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_NOT_CONFIGURED_DESC")}),n.twoFactorAllowedEnable=f.a.computed(function(){return n.viewEnable()||n.twoFactorTested()}),n.onResult=p.a.bind(n.onResult,n),n.onShowSecretResult=p.a.bind(n.onShowSecretResult,n),n}return l()(t,e),t.prototype.showSecret=function(){this.secreting(!0),w.a.showTwoFactorSecret(this.onShowSecretResult)},t.prototype.hideSecret=function(){this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl("")},t.prototype.createTwoFactor=function(){this.processing(!0),w.a.createTwoFactor(this.onResult)},t.prototype.logout=function(){i.i(T.a)().logout()},t.prototype.testTwoFactor=function(){i.i(C.showScreenPopup)(i(253),[this.twoFactorTested])},t.prototype.clearTwoFactor=function(){this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl(""),this.twoFactorTested(!1),this.clearing(!0),w.a.clearTwoFactor(this.onResult)},t.prototype.onShow=function(e){this.lock(!!e),this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl("")},t.prototype.onHide=function(){this.lock()&&u.a.location.reload()},t.prototype.getQr=function(){return"otpauth://totp/"+u.a.encodeURIComponent(this.viewUser())+"?secret="+u.a.encodeURIComponent(this.viewSecret())+"&issuer="+u.a.encodeURIComponent("")},t.prototype.onResult=function(e,t){this.processing(!1),this.clearing(!1),b.StorageResultType.Success===e&&t&&t.Result?(this.viewUser(i.i(y.pString)(t.Result.User)),this.viewEnable_(!!t.Result.Enable),this.twoFactorStatus(!!t.Result.IsSet),this.twoFactorTested(!!t.Result.Tested),this.viewSecret(i.i(y.pString)(t.Result.Secret)),this.viewBackupCodes(i.i(y.pString)(t.Result.BackupCodes).replace(/[\s]+/g,"  ")),this.viewUrlTitle(i.i(y.pString)(t.Result.UrlTitle)),this.viewUrl(g.a.toDataURL({level:"M",size:8,value:this.getQr()}))):(this.viewUser(""),this.viewEnable_(!1),this.twoFactorStatus(!1),this.twoFactorTested(!1),this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl(""))},t.prototype.onShowSecretResult=function(e,t){this.secreting(!1),b.StorageResultType.Success===e&&t&&t.Result?(this.viewSecret(i.i(y.pString)(t.Result.Secret)),this.viewUrlTitle(i.i(y.pString)(t.Result.UrlTitle)),this.viewUrl(g.a.toDataURL({level:"M",size:6,value:this.getQr()}))):(this.viewSecret(""),this.viewUrlTitle(""),this.viewUrl(""))},t.prototype.onBuild=function(){this.capaTwoFactor&&(this.processing(!0),w.a.getTwoFactor(this.onResult))},t}(E.a))||F)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(2),p=i.n(d),h=i(19),f=i.n(h),m=i(28),g=i(46),b=i(39),y=i(3),v=i(1),S=i(14),w=i(29),T=i(10),C=i(16),E=i(9),A=i(13);i.d(t,"a",function(){return F});var F=function(e){function t(){o()(this,t);var n=r()(this,e.call(this));return n.logoImg=i.i(v.trim)(T.settingsGet("UserLogo")),n.logoTitle=i.i(v.trim)(T.settingsGet("UserLogoTitle")),n.mobile=!!T.appSettingsGet("mobile"),n.mobileDevice=!!T.appSettingsGet("mobileDevice"),n.allowSettings=!!T.capa(y.Capa.Settings),n.allowHelp=!!T.capa(y.Capa.Help),n.currentAudio=m.a.currentAudio,n.accountEmail=g.a.email,n.accounts=g.a.accounts,n.accountsUnreadCount=g.a.accountsUnreadCount,n.accountMenuDropdownTrigger=p.a.observable(!1),n.capaAdditionalAccounts=p.a.observable(T.capa(y.Capa.AdditionalAccounts)),n.addAccountClick=u.a.bind(n.addAccountClick,n),w.b("audio.stop",function(){return m.a.currentAudio("")}),w.b("audio.start",function(e){return m.a.currentAudio(e)}),n}return l()(t,e),t.prototype.stopPlay=function(){w.a("audio.api.stop")},t.prototype.accountClick=function(e,t){return e&&t&&!i.i(v.isUnd)(t.which)&&1===t.which&&(g.a.accounts.loading(!0),u.a.delay(function(){return g.a.accounts.loading(!1)},y.Magics.Time1s)),!0},t.prototype.emailTitle=function(){return g.a.email()},t.prototype.settingsClick=function(){T.capa(y.Capa.Settings)&&i.i(E.setHash)(i.i(S.q)())},t.prototype.settingsHelp=function(){T.capa(y.Capa.Help)&&i.i(E.showScreenPopup)(i(189))},t.prototype.addAccountClick=function(){this.capaAdditionalAccounts()&&i.i(E.showScreenPopup)(i(122))},t.prototype.logoutClick=function(){i.i(C.a)().logout()},t.prototype.onBuild=function(){var e=this;f()("`",[y.KeyState.MessageList,y.KeyState.MessageView,y.KeyState.Settings],function(){e.viewModelVisibility()&&(b.a.messageFullScreenMode(!1),e.accountMenuDropdownTrigger(!0))}),f()("shift+/",[y.KeyState.MessageList,y.KeyState.MessageView,y.KeyState.Settings],function(){return!e.viewModelVisibility()||(i.i(E.showScreenPopup)(i(189)),!1)})},t}(A.a)},,,,,,,function(e,t,i){"use strict";i.d(t,"a",function(){return a});var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o={urlsafe_encode:function(e){return o.encode(e).replace(/[+]/g,"-").replace(/[\/]/g,"_").replace(/[=]/g,"")},encode:function(e){var t="",i=void 0,a=void 0,r=void 0,s=void 0,l=void 0,c=void 0,u=void 0,d=0;for(e=o._utf8_encode(e);d<e.length;)i=e.charCodeAt(d++),a=e.charCodeAt(d++),r=e.charCodeAt(d++),s=i>>2,l=(3&i)<<4|a>>4,c=(15&a)<<2|r>>6,u=63&r,isNaN(a)?c=u=64:isNaN(r)&&(u=64),t=t+n.charAt(s)+n.charAt(l)+n.charAt(c)+n.charAt(u);return t},decode:function(e){var t="",i=void 0,a=void 0,r=void 0,s=void 0,l=void 0,c=void 0,u=void 0,d=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");d<e.length;)s=n.indexOf(e.charAt(d++)),l=n.indexOf(e.charAt(d++)),c=n.indexOf(e.charAt(d++)),u=n.indexOf(e.charAt(d++)),i=s<<2|l>>4,a=(15&l)<<4|c>>2,r=(3&c)<<6|u,t+=String.fromCharCode(i),64!==c&&(t+=String.fromCharCode(a)),64!==u&&(t+=String.fromCharCode(r));return o._utf8_decode(t)},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");for(var t="",i=0,n=e.length,o=0;i<n;i++)o=e.charCodeAt(i),o<128?t+=String.fromCharCode(o):o>127&&o<2048?(t+=String.fromCharCode(o>>6|192),t+=String.fromCharCode(63&o|128)):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128),t+=String.fromCharCode(63&o|128));return t},_utf8_decode:function(e){for(var t="",i=0,n=0,o=0,a=0;i<e.length;)n=e.charCodeAt(i),n<128?(t+=String.fromCharCode(n),i++):n>191&&n<224?(o=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&o),i+=2):(o=e.charCodeAt(i+1),a=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&a),i+=3);return t}},a=(o.decode,o.encode,o.urlsafe_encode)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(265),l=i.n(s),c=i(1),u=i(20);i.d(t,"a",function(){return d});var d=function(){function e(){o()(this,e)}return e.prototype.set=function(e,t){var i=!1,n=null;try{n=l.a.getJSON(u.d)}catch(e){}(n||(n={}))[e]=t;try{l.a.set(u.d,n,{expires:30}),i=!0}catch(e){}return i},e.prototype.get=function(e){var t=null;try{var n=l.a.getJSON(u.d);t=n&&!i.i(c.isUnd)(n[e])?n[e]:null}catch(e){}return t},e.supported=function(){return!(!r.a.navigator||!r.a.navigator.cookieEnabled)},e}()},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(1),l=i(94),c=i(20);i.d(t,"a",function(){return u});var u=function(){function e(){o()(this,e),this.s=null,this.s=r.a.localStorage||null}return e.prototype.set=function(e,t){if(!this.s)return!1;var i=null;try{var n=this.s.getItem(c.d)||null;i=null===n?null:r.a.JSON.parse(n)}catch(e){}(i||(i={}))[e]=t;try{return this.s.setItem(c.d,r.a.JSON.stringify(i)),!0}catch(e){}return!1},e.prototype.get=function(e){if(!this.s)return null;try{var t=this.s.getItem(c.d)||null,n=null===t?null:r.a.JSON.parse(t);return n&&!i.i(s.isUnd)(n[e])?n[e]:null}catch(e){}return null},e.supported=function(){return i.i(l.d)("localStorage")},e}()},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(14),p=i(36);i.d(t,"a",function(){return h});var h=function(e){function t(i){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;o()(this,t);var s=r()(this,e.call(this,"AccountModel"));return s.email=i,s.count=u.a.observable(a),s.deleteAccess=u.a.observable(!1),s.canBeDeleted=u.a.observable(!!n),s.canBeEdit=s.canBeDeleted,s}return l()(t,e),t.prototype.changeAccountLink=function(){return i.i(d.m)(this.email)},t}(p.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(1),p=i(180),h=i(36);i.d(t,"a",function(){return f});var f=function(e){function t(n,a){var s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],p=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"";o()(this,t);var f=r()(this,e.call(this,"ComposeAttachmentModel"));return f.id=n,f.isInline=!!l,f.isLinked=!!c,f.CID=p,f.contentLocation=h,f.fromMessage=!1,f.fileName=u.a.observable(a),f.size=u.a.observable(s),f.tempName=u.a.observable(""),f.progress=u.a.observable(0),f.error=u.a.observable(""),f.waiting=u.a.observable(!0),f.uploading=u.a.observable(!1),f.enabled=u.a.observable(!0),f.complete=u.a.observable(!1),f.progressText=u.a.computed(function(){var e=f.progress();return 0===e?"":""+(98<e?100:e)+"%"}),f.progressStyle=u.a.computed(function(){var e=f.progress();return 0===e?"":"width:"+(98<e?100:e)+"%"}),f.title=u.a.computed(function(){var e=f.error();return""!==e?e:f.fileName()}),f.friendlySize=u.a.computed(function(){var e=f.size();return null===e?"":i.i(d.friendlySize)(e)}),f.mimeType=u.a.computed(function(){return i.i(d.mimeContentType)(f.fileName())}),f.fileExt=u.a.computed(function(){return i.i(d.getFileExtension)(f.fileName())}),f.regDisposables([f.progressText,f.progressStyle,f.title,f.friendlySize,f.mimeType,f.fileExt]),f}return l()(t,e),t.prototype.initByUploadJson=function(e){var t=!1;return e&&(this.fileName(e.Name),this.size(i.i(d.isUnd)(e.Size)?0:i.i(d.pInt)(e.Size)),this.tempName(i.i(d.isUnd)(e.TempName)?"":e.TempName),this.isInline=!1,t=!0),t},t.prototype.iconClass=function(){return i.i(p.c)(i.i(p.d)(this.fileExt(),this.mimeType()))[0]},t.prototype.iconText=function(){return i.i(p.c)(i.i(p.d)(this.fileExt(),this.mimeType()))[1]},t}(h.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(2),p=i.n(d),h=i(3),f=i(1),m=i(14),g=i(36);i.d(t,"a",function(){return b});var b=function(e){function t(){o()(this,t);var i=r()(this,e.call(this,"ContactModel"));return i.idContact=0,i.display="",i.properties=[],i.readOnly=!1,i.focused=p.a.observable(!1),i.selected=p.a.observable(!1),i.checked=p.a.observable(!1),i.deleted=p.a.observable(!1),i}return l()(t,e),t.prototype.getNameAndEmailHelper=function(){var e="",t="";return i.i(f.isNonEmptyArray)(this.properties)&&u.a.each(this.properties,function(n){n&&(h.ContactPropertyType.FirstName===n[0]?e=i.i(f.trim)(n[1]+" "+e):h.ContactPropertyType.LastName===n[0]?e=i.i(f.trim)(e+" "+n[1]):""===t&&h.ContactPropertyType.Email===n[0]&&(t=n[1]))}),""===t?null:[t,e]},t.prototype.parse=function(e){var t=this,n=!1;return e&&"Object/Contact"===e["@Object"]&&(this.idContact=i.i(f.pInt)(e.IdContact),this.display=i.i(f.pString)(e.Display),this.readOnly=!!e.ReadOnly,i.i(f.isNonEmptyArray)(e.Properties)&&u.a.each(e.Properties,function(e){e&&e.Type&&i.i(f.isNormal)(e.Value)&&i.i(f.isNormal)(e.TypeStr)&&t.properties.push([i.i(f.pInt)(e.Type),i.i(f.pString)(e.Value),i.i(f.pString)(e.TypeStr)])}),n=!0),n},t.prototype.srcAttr=function(){return i.i(m.t)()},t.prototype.generateUid=function(){return i.i(f.pString)(this.idContact)},t.prototype.lineAsCss=function(){var e=[];return this.deleted()&&e.push("deleted"),this.selected()&&e.push("selected"),
this.checked()&&e.push("checked"),this.focused()&&e.push("focused"),e.join(" ")},t}(g.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(3),p=i(1),h=i(8),f=i(36);i.d(t,"a",function(){return m});var m=function(e){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.ContactPropertyType.Unknown,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",l=arguments.length>3&&void 0!==arguments[3]&&arguments[3],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";o()(this,t);var f=r()(this,e.call(this,"ContactPropertyModel"));return f.type=u.a.observable(i.i(p.pInt)(n)),f.typeStr=u.a.observable(i.i(p.pString)(a)),f.focused=u.a.observable(!!l),f.value=u.a.observable(i.i(p.pString)(s)),f.placeholder=u.a.observable(c),f.placeholderValue=u.a.computed(function(){var e=f.placeholder();return e?i.i(h.i18n)(e):""}),f.largeValue=u.a.computed(function(){return d.ContactPropertyType.Note===f.type()}),f.regDisposables([f.placeholderValue,f.largeValue]),f}return l()(t,e),t}(f.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(2),p=i.n(d),h=i(3),f=i(1),m=i(8),g=i(23),b=i(46),y=i(207),v=i(36);i.d(t,"a",function(){return S});var S=function(e){function t(){o()(this,t);var n=r()(this,e.call(this,"FilterModel"));n.enabled=p.a.observable(!0),n.id="",n.name=p.a.observable(""),n.name.error=p.a.observable(!1),n.name.focused=p.a.observable(!1),n.conditions=p.a.observableArray([]),n.conditionsType=p.a.observable(h.FilterRulesType.Any),n.actionValue=p.a.observable(""),n.actionValue.error=p.a.observable(!1),n.actionValueSecond=p.a.observable(""),n.actionValueThird=p.a.observable(""),n.actionValueFourth=p.a.observable(""),n.actionValueFourth.error=p.a.observable(!1),n.actionMarkAsRead=p.a.observable(!1),n.actionKeep=p.a.observable(!0),n.actionNoStop=p.a.observable(!1),n.actionType=p.a.observable(h.FiltersAction.MoveTo),n.actionType.subscribe(function(){n.actionValue(""),n.actionValue.error(!1),n.actionValueSecond(""),n.actionValueThird(""),n.actionValueFourth(""),n.actionValueFourth.error(!1)});var a=function(e){var t=i.i(g.b)(e);return t?t.fullName.replace("."===t.delimiter?/\./:/[\\\/]+/," / "):e};return n.nameSub=p.a.computed(function(){var e="",t=n.actionValue();switch(n.actionType()){case h.FiltersAction.MoveTo:e=i.i(m.i18n)("SETTINGS_FILTERS/SUBNAME_MOVE_TO",{FOLDER:a(t)});break;case h.FiltersAction.Forward:e=i.i(m.i18n)("SETTINGS_FILTERS/SUBNAME_FORWARD_TO",{EMAIL:t});break;case h.FiltersAction.Vacation:e=i.i(m.i18n)("SETTINGS_FILTERS/SUBNAME_VACATION_MESSAGE");break;case h.FiltersAction.Reject:e=i.i(m.i18n)("SETTINGS_FILTERS/SUBNAME_REJECT");break;case h.FiltersAction.Discard:e=i.i(m.i18n)("SETTINGS_FILTERS/SUBNAME_DISCARD")}return e?"("+e+")":""}),n.actionTemplate=p.a.computed(function(){var e="";switch(n.actionType()){case h.FiltersAction.Forward:e="SettingsFiltersActionForward";break;case h.FiltersAction.Vacation:e="SettingsFiltersActionVacation";break;case h.FiltersAction.Reject:e="SettingsFiltersActionReject";break;case h.FiltersAction.None:e="SettingsFiltersActionNone";break;case h.FiltersAction.Discard:e="SettingsFiltersActionDiscard";break;case h.FiltersAction.MoveTo:default:e="SettingsFiltersActionMoveToFolder"}return e}),n.regDisposables(n.conditions.subscribe(f.windowResizeCallback)),n.regDisposables(n.name.subscribe(function(e){n.name.error(""===e)})),n.regDisposables(n.actionValue.subscribe(function(e){n.actionValue.error(""===e)})),n.regDisposables([n.actionNoStop,n.actionTemplate]),n.deleteAccess=p.a.observable(!1),n.canBeDeleted=p.a.observable(!0),n}return l()(t,e),t.prototype.generateID=function(){this.id=i.i(f.fakeMd5)()},t.prototype.verify=function(){return""===this.name()?(this.name.error(!0),!1):!(0<this.conditions().length&&u.a.find(this.conditions(),function(e){return e&&!e.verify()}))&&(""===this.actionValue()&&-1<i.i(f.inArray)(this.actionType(),[h.FiltersAction.MoveTo,h.FiltersAction.Forward,h.FiltersAction.Reject,h.FiltersAction.Vacation])?(this.actionValue.error(!0),!1):h.FiltersAction.Forward===this.actionType()&&-1===this.actionValue().indexOf("@")?(this.actionValue.error(!0),!1):h.FiltersAction.Vacation===this.actionType()&&""!==this.actionValueFourth()&&-1===this.actionValueFourth().indexOf("@")?(this.actionValueFourth.error(!0),!1):(this.name.error(!1),this.actionValue.error(!1),!0))},t.prototype.toJson=function(){return{ID:this.id,Enabled:this.enabled()?"1":"0",Name:this.name(),ConditionsType:this.conditionsType(),Conditions:u.a.map(this.conditions(),function(e){return e.toJson()}),ActionValue:this.actionValue(),ActionValueSecond:this.actionValueSecond(),ActionValueThird:this.actionValueThird(),ActionValueFourth:this.actionValueFourth(),ActionType:this.actionType(),Stop:this.actionNoStop()?"0":"1",Keep:this.actionKeep()?"1":"0",MarkAsRead:this.actionMarkAsRead()?"1":"0"}},t.prototype.addCondition=function(){this.conditions.push(new y.a)},t.prototype.removeCondition=function(e){this.conditions.remove(e),i.i(f.delegateRunOnDestroy)(e)},t.prototype.setRecipients=function(){this.actionValueFourth(b.a.accountsEmails().join(", "))},t.prototype.parse=function(e){var t=!1;return e&&"Object/Filter"===e["@Object"]&&(this.id=i.i(f.pString)(e.ID),this.name(i.i(f.pString)(e.Name)),this.enabled(!!e.Enabled),this.conditionsType(i.i(f.pString)(e.ConditionsType)),this.conditions([]),i.i(f.isNonEmptyArray)(e.Conditions)&&this.conditions(u.a.compact(u.a.map(e.Conditions,function(e){var t=new y.a;return t&&t.parse(e)?t:null}))),this.actionType(i.i(f.pString)(e.ActionType)),this.actionValue(i.i(f.pString)(e.ActionValue)),this.actionValueSecond(i.i(f.pString)(e.ActionValueSecond)),this.actionValueThird(i.i(f.pString)(e.ActionValueThird)),this.actionValueFourth(i.i(f.pString)(e.ActionValueFourth)),this.actionNoStop(!e.Stop),this.actionKeep(!!e.Keep),this.actionMarkAsRead(!!e.MarkAsRead),t=!0),t},t.prototype.cloneSelf=function(){var e=new t;return e.id=this.id,e.enabled(this.enabled()),e.name(this.name()),e.name.error(this.name.error()),e.conditionsType(this.conditionsType()),e.actionMarkAsRead(this.actionMarkAsRead()),e.actionType(this.actionType()),e.actionValue(this.actionValue()),e.actionValue.error(this.actionValue.error()),e.actionValueSecond(this.actionValueSecond()),e.actionValueThird(this.actionValueThird()),e.actionValueFourth(this.actionValueFourth()),e.actionKeep(this.actionKeep()),e.actionNoStop(this.actionNoStop()),e.conditions(u.a.map(this.conditions(),function(e){return e.cloneSelf()})),e},t}(v.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(3),p=i(1),h=i(36);i.d(t,"a",function(){return f});var f=function(e){function t(){o()(this,t);var i=r()(this,e.call(this,"FilterConditionModel"));return i.field=u.a.observable(d.FilterConditionField.From),i.type=u.a.observable(d.FilterConditionType.Contains),i.value=u.a.observable(""),i.value.error=u.a.observable(!1),i.valueSecond=u.a.observable(""),i.valueSecond.error=u.a.observable(!1),i.template=u.a.computed(function(){var e="";switch(i.field()){case d.FilterConditionField.Size:e="SettingsFiltersConditionSize";break;case d.FilterConditionField.Header:e="SettingsFiltersConditionMore";break;default:e="SettingsFiltersConditionDefault"}return e},i),i.field.subscribe(function(){i.value(""),i.valueSecond("")}),i.regDisposables([i.template]),i}return l()(t,e),t.prototype.verify=function(){return""===this.value()?(this.value.error(!0),!1):d.FilterConditionField.Header!==this.field()||""!==this.valueSecond()||(this.valueSecond.error(!0),!1)},t.prototype.parse=function(e){return!!(e&&e.Field&&e.Type)&&(this.field(i.i(p.pString)(e.Field)),this.type(i.i(p.pString)(e.Type)),this.value(i.i(p.pString)(e.Value)),this.valueSecond(i.i(p.pString)(e.ValueSecond)),!0)},t.prototype.toJson=function(){return{Field:this.field(),Type:this.type(),Value:this.value(),ValueSecond:this.valueSecond()}},t.prototype.cloneSelf=function(){var e=new t;return e.field(this.field()),e.type(this.type()),e.value(this.value()),e.valueSecond(this.valueSecond()),e},t}(h.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(2),p=i.n(d),h=i(3),f=i(1),m=i(8),g=i(23),b=i(29),y=i(36);i.d(t,"a",function(){return v});var v=function(e){function t(){o()(this,t);var i=r()(this,e.call(this,"FolderModel"));return i.name=p.a.observable(""),i.fullName="",i.fullNameRaw="",i.fullNameHash="",i.delimiter="",i.namespace="",i.deep=0,i.interval=0,i.selectable=!1,i.existen=!0,i.type=p.a.observable(h.FolderType.User),i.focused=p.a.observable(!1),i.selected=p.a.observable(!1),i.edited=p.a.observable(!1),i.subScribed=p.a.observable(!0),i.checkable=p.a.observable(!1),i.subFolders=p.a.observableArray([]),i.deleteAccess=p.a.observable(!1),i.actionBlink=p.a.observable(!1).extend({falseTimeout:1e3}),i.nameForEdit=p.a.observable(""),i.privateMessageCountAll=p.a.observable(0),i.privateMessageCountUnread=p.a.observable(0),i.collapsedPrivate=p.a.observable(!0),i}return l()(t,e),t.newInstanceFromJson=function(e){var i=new t;return i.initByJson(e)?i.initComputed():null},t.prototype.initComputed=function(){var e=this,t=i.i(g.a)();return this.isInbox=p.a.computed(function(){return h.FolderType.Inbox===e.type()}),this.hasSubScribedSubfolders=p.a.computed(function(){return!!u.a.find(e.subFolders(),function(e){return(e.subScribed()||e.hasSubScribedSubfolders())&&!e.isSystemFolder()})}),this.canBeEdited=p.a.computed(function(){return h.FolderType.User===e.type()&&e.existen&&e.selectable}),this.visible=p.a.computed(function(){var t=e.subScribed(),i=e.hasSubScribedSubfolders();return t||i&&(!e.existen||!e.selectable)}),this.isSystemFolder=p.a.computed(function(){return h.FolderType.User!==e.type()}),this.hidden=p.a.computed(function(){var t=e.isSystemFolder(),i=e.hasSubScribedSubfolders();return t&&!i||!e.selectable&&!i}),this.selectableForFolderList=p.a.computed(function(){return!e.isSystemFolder()&&e.selectable}),this.messageCountAll=p.a.computed({read:this.privateMessageCountAll,write:function(t){i.i(f.isPosNumeric)(t,!0)?e.privateMessageCountAll(t):e.privateMessageCountAll.valueHasMutated()}}).extend({notify:"always"}),this.messageCountUnread=p.a.computed({read:this.privateMessageCountUnread,write:function(t){i.i(f.isPosNumeric)(t,!0)?e.privateMessageCountUnread(t):e.privateMessageCountUnread.valueHasMutated()}}).extend({notify:"always"}),this.printableUnreadCount=p.a.computed(function(){var t=e.messageCountAll(),i=e.messageCountUnread(),n=e.type();if(0<t){if(h.FolderType.Draft===n)return""+t;if(0<i&&h.FolderType.Trash!==n&&h.FolderType.Archive!==n&&h.FolderType.SentItems!==n)return""+i}return""}),this.canBeDeleted=p.a.computed(function(){var i=e.isSystemFolder();return!i&&0===e.subFolders().length&&t!==e.fullNameRaw}),this.canBeSubScribed=p.a.computed(function(){return!e.isSystemFolder()&&e.selectable&&t!==e.fullNameRaw}),this.canBeChecked=this.canBeSubScribed,this.localName=p.a.computed(function(){i.i(m.trigger)();var t=e.name(),n=e.type();if(e.isSystemFolder())switch(n){case h.FolderType.Inbox:t=i.i(m.i18n)("FOLDER_LIST/INBOX_NAME");break;case h.FolderType.SentItems:t=i.i(m.i18n)("FOLDER_LIST/SENT_NAME");break;case h.FolderType.Draft:t=i.i(m.i18n)("FOLDER_LIST/DRAFTS_NAME");break;case h.FolderType.Spam:t=i.i(m.i18n)("FOLDER_LIST/SPAM_NAME");break;case h.FolderType.Trash:t=i.i(m.i18n)("FOLDER_LIST/TRASH_NAME");break;case h.FolderType.Archive:t=i.i(m.i18n)("FOLDER_LIST/ARCHIVE_NAME")}return t}),this.manageFolderSystemName=p.a.computed(function(){i.i(m.trigger)();var t="",n=e.type(),o=e.name();if(e.isSystemFolder())switch(n){case h.FolderType.Inbox:t="("+i.i(m.i18n)("FOLDER_LIST/INBOX_NAME")+")";break;case h.FolderType.SentItems:t="("+i.i(m.i18n)("FOLDER_LIST/SENT_NAME")+")";break;case h.FolderType.Draft:t="("+i.i(m.i18n)("FOLDER_LIST/DRAFTS_NAME")+")";break;case h.FolderType.Spam:t="("+i.i(m.i18n)("FOLDER_LIST/SPAM_NAME")+")";break;case h.FolderType.Trash:t="("+i.i(m.i18n)("FOLDER_LIST/TRASH_NAME")+")";break;case h.FolderType.Archive:t="("+i.i(m.i18n)("FOLDER_LIST/ARCHIVE_NAME")+")"}return(""!==t&&"("+o+")"===t||"(inbox)"===t.toLowerCase())&&(t=""),t}),this.collapsed=p.a.computed({read:function(){return!e.hidden()&&e.collapsedPrivate()},write:function(t){e.collapsedPrivate(t)}}),this.hasUnreadMessages=p.a.computed(function(){return 0<e.messageCountUnread()&&""!==e.printableUnreadCount()}),this.hasSubScribedUnreadMessagesSubfolders=p.a.computed(function(){return!!u.a.find(e.subFolders(),function(e){return e.hasUnreadMessages()||e.hasSubScribedUnreadMessagesSubfolders()})}),this.name.subscribe(function(t){e.nameForEdit(t)}),this.edited.subscribe(function(t){t&&e.nameForEdit(e.name())}),this.messageCountUnread.subscribe(function(t){h.FolderType.Inbox===e.type()&&b.a("mailbox.inbox-unread-count",[t])}),this},t.prototype.collapsedCss=function(){return this.hasSubScribedSubfolders()?this.collapsed()?"icon-right-mini e-collapsed-sign":"icon-down-mini e-collapsed-sign":"icon-none e-collapsed-sign"},t.prototype.initByJson=function(e){var t=!1,n=i.i(g.a)();return e&&"Object/Folder"===e["@Object"]&&(this.name(e.Name),this.delimiter=e.Delimiter,this.fullName=e.FullName,this.fullNameRaw=e.FullNameRaw,this.fullNameHash=e.FullNameHash,this.deep=e.FullNameRaw.split(this.delimiter).length-1,this.selectable=!!e.IsSelectable,this.existen=!!e.IsExists,this.subScribed(!!e.IsSubscribed),this.checkable(!!e.Checkable),this.type(n===this.fullNameRaw?h.FolderType.Inbox:h.FolderType.User),t=!0),t},t.prototype.printableFullName=function(){return this.fullName.split(this.delimiter).join(" / ")},t}(y.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(36);i.d(t,"a",function(){return p});var p=function(e){function t(i,n){o()(this,t);var a=r()(this,e.call(this,"IdentityModel"));return a.id=u.a.observable(i||""),a.email=u.a.observable(n),a.name=u.a.observable(""),a.replyTo=u.a.observable(""),a.bcc=u.a.observable(""),a.signature=u.a.observable(""),a.signatureInsertBefore=u.a.observable(!1),a.deleteAccess=u.a.observable(!1),a.canBeDeleted=u.a.computed(function(){return""!==a.id()}),a}return l()(t,e),t.prototype.formattedName=function(){var e=this.name(),t=this.email();return""!==e?e+" ("+t+")":t},t}(d.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(12),p=i.n(d),h=i(2),f=i.n(h),m=i(74),g=i.n(m),b=i(264),y=i.n(b),v=i(3),S=i(8),w=i(1),T=i(7),C=i(14),E=i(30),A=i(49),F=i(179),N=i(180),R=i(36);i.d(t,"a",function(){return I});var I=function(e){function t(){o()(this,t);var n=r()(this,e.call(this,"MessageModel"));return n.folderFullNameRaw="",n.uid="",n.hash="",n.requestHash="",n.subject=f.a.observable(""),n.subjectPrefix=f.a.observable(""),n.subjectSuffix=f.a.observable(""),n.size=f.a.observable(0),n.dateTimeStampInUTC=f.a.observable(0),n.priority=f.a.observable(v.MessagePriority.Normal),n.proxy=!1,n.fromEmailString=f.a.observable(""),n.fromClearEmailString=f.a.observable(""),n.toEmailsString=f.a.observable(""),n.toClearEmailsString=f.a.observable(""),n.senderEmailsString=f.a.observable(""),n.senderClearEmailsString=f.a.observable(""),n.emails=[],n.from=[],n.to=[],n.cc=[],n.bcc=[],n.replyTo=[],n.deliveredTo=[],n.unsubsribeLinks=[],n.newForAnimation=f.a.observable(!1),n.deleted=f.a.observable(!1),n.deletedMark=f.a.observable(!1),n.unseen=f.a.observable(!1),n.flagged=f.a.observable(!1),n.answered=f.a.observable(!1),n.forwarded=f.a.observable(!1),n.isReadReceipt=f.a.observable(!1),n.focused=f.a.observable(!1),n.selected=f.a.observable(!1),n.checked=f.a.observable(!1),n.hasAttachments=f.a.observable(!1),n.attachmentsSpecData=f.a.observableArray([]),n.attachmentIconClass=f.a.computed(function(){return i.i(N.a)(n.hasAttachments()?n.attachmentsSpecData():[])}),n.body=null,n.isHtml=f.a.observable(!1),n.hasImages=f.a.observable(!1),n.attachments=f.a.observableArray([]),n.isPgpSigned=f.a.observable(!1),n.isPgpEncrypted=f.a.observable(!1),n.pgpSignedVerifyStatus=f.a.observable(v.SignedVerifyStatus.None),n.pgpSignedVerifyUser=f.a.observable(""),n.priority=f.a.observable(v.MessagePriority.Normal),n.readReceipt=f.a.observable(""),n.aDraftInfo=[],n.sMessageId="",n.sInReplyTo="",n.sReferences="",n.hasUnseenSubMessage=f.a.observable(!1),n.hasFlaggedSubMessage=f.a.observable(!1),n.threads=f.a.observableArray([]),n.threadsLen=f.a.computed(function(){return n.threads().length}),n.isImportant=f.a.computed(function(){return v.MessagePriority.High===n.priority()}),n.regDisposables([n.attachmentIconClass,n.threadsLen,n.isImportant]),n}return l()(t,e),t.newInstanceFromJson=function(e){var i=new t;return i.initByJson(e)?i:null},t.prototype.clear=function(){this.folderFullNameRaw="",this.uid="",this.hash="",this.requestHash="",this.subject(""),this.subjectPrefix(""),this.subjectSuffix(""),this.size(0),this.dateTimeStampInUTC(0),this.priority(v.MessagePriority.Normal),this.proxy=!1,this.fromEmailString(""),this.fromClearEmailString(""),this.toEmailsString(""),this.toClearEmailsString(""),this.senderEmailsString(""),this.senderClearEmailsString(""),this.emails=[],this.from=[],this.to=[],this.cc=[],this.bcc=[],this.replyTo=[],this.deliveredTo=[],this.unsubsribeLinks=[],this.newForAnimation(!1),this.deleted(!1),this.deletedMark(!1),this.unseen(!1),this.flagged(!1),this.answered(!1),this.forwarded(!1),this.isReadReceipt(!1),this.selected(!1),this.checked(!1),this.hasAttachments(!1),this.attachmentsSpecData([]),this.body=null,this.isHtml(!1),this.hasImages(!1),this.attachments([]),this.isPgpSigned(!1),this.isPgpEncrypted(!1),this.pgpSignedVerifyStatus(v.SignedVerifyStatus.None),this.pgpSignedVerifyUser(""),this.priority(v.MessagePriority.Normal),this.readReceipt(""),this.aDraftInfo=[],this.sMessageId="",this.sInReplyTo="",this.sReferences="",this.threads([]),this.hasUnseenSubMessage(!1),this.hasFlaggedSubMessage(!1)},t.prototype.getEmails=function(e){var t=this;return u.a.compact(u.a.uniq(u.a.map(u.a.reduce(e,function(e,i){return e.concat(t[i])},[]),function(e){return e?e.email:""})))},t.prototype.getRecipientsEmails=function(){return this.getEmails(["to","cc"])},t.prototype.friendlySize=function(){return i.i(w.friendlySize)(this.size())},t.prototype.computeSenderEmail=function(){var e=E.a.sentFolder(),t=E.a.draftFolder();this.senderEmailsString(this.folderFullNameRaw===e||this.folderFullNameRaw===t?this.toEmailsString():this.fromEmailString()),this.senderClearEmailsString(this.folderFullNameRaw===e||this.folderFullNameRaw===t?this.toClearEmailsString():this.fromClearEmailString())},t.prototype.initByJson=function(e){var t=!1,n=v.MessagePriority.Normal;return e&&"Object/Message"===e["@Object"]&&(n=i.i(w.pInt)(e.Priority),this.priority(-1<i.i(w.inArray)(n,[v.MessagePriority.High,v.MessagePriority.Low])?n:v.MessagePriority.Normal),this.folderFullNameRaw=e.Folder,this.uid=e.Uid,this.hash=e.Hash,this.requestHash=e.RequestHash,this.proxy=!!e.ExternalProxy,this.size(i.i(w.pInt)(e.Size)),this.from=i.i(F.a)(e.From),this.to=i.i(F.a)(e.To),this.cc=i.i(F.a)(e.Cc),this.bcc=i.i(F.a)(e.Bcc),this.replyTo=i.i(F.a)(e.ReplyTo),this.deliveredTo=i.i(F.a)(e.DeliveredTo),this.unsubsribeLinks=i.i(w.isNonEmptyArray)(e.UnsubsribeLinks)?e.UnsubsribeLinks:[],this.subject(e.Subject),i.i(w.isArray)(e.SubjectParts)?(this.subjectPrefix(e.SubjectParts[0]),this.subjectSuffix(e.SubjectParts[1])):(this.subjectPrefix(""),this.subjectSuffix(this.subject())),this.dateTimeStampInUTC(i.i(w.pInt)(e.DateTimeStampInUTC)),this.hasAttachments(!!e.HasAttachments),this.attachmentsSpecData(i.i(w.isArray)(e.AttachmentsSpecData)?e.AttachmentsSpecData:[]),this.fromEmailString(i.i(F.b)(this.from,!0)),this.fromClearEmailString(i.i(F.c)(this.from)),this.toEmailsString(i.i(F.b)(this.to,!0)),this.toClearEmailsString(i.i(F.c)(this.to)),this.threads(i.i(w.isArray)(e.Threads)?e.Threads:[]),this.initFlagsByJson(e),this.computeSenderEmail(),t=!0),t},t.prototype.initUpdateByMessageJson=function(e){var t=!1,n=v.MessagePriority.Normal;return e&&"Object/Message"===e["@Object"]&&(n=i.i(w.pInt)(e.Priority),this.priority(-1<i.i(w.inArray)(n,[v.MessagePriority.High,v.MessagePriority.Low])?n:v.MessagePriority.Normal),this.aDraftInfo=e.DraftInfo,this.sMessageId=e.MessageId,this.sInReplyTo=e.InReplyTo,this.sReferences=e.References,this.proxy=!!e.ExternalProxy,A.a.capaOpenPGP()&&(this.isPgpSigned(!!e.PgpSigned),this.isPgpEncrypted(!!e.PgpEncrypted)),this.hasAttachments(!!e.HasAttachments),this.attachmentsSpecData(i.i(w.isArray)(e.AttachmentsSpecData)?e.AttachmentsSpecData:[]),this.foundedCIDs=i.i(w.isArray)(e.FoundedCIDs)?e.FoundedCIDs:[],this.attachments(this.initAttachmentsFromJson(e.Attachments)),this.readReceipt(e.ReadReceipt||""),this.computeSenderEmail(),t=!0),t},t.prototype.initAttachmentsFromJson=function(e){var t=0,n=0,o=null,a=[];if(e&&"Collection/AttachmentCollection"===e["@Object"]&&i.i(w.isNonEmptyArray)(e["@Collection"]))for(t=0,n=e["@Collection"].length;t<n;t++)o=N.b.newInstanceFromJson(e["@Collection"][t]),o&&(""!==o.cidWithOutTags&&0<this.foundedCIDs.length&&0<=i.i(w.inArray)(o.cidWithOutTags,this.foundedCIDs)&&(o.isLinked=!0),a.push(o));return a},t.prototype.hasUnsubsribeLinks=function(){return this.unsubsribeLinks&&0<this.unsubsribeLinks.length},t.prototype.getFirstUnsubsribeLink=function(){return this.unsubsribeLinks&&0<this.unsubsribeLinks.length?this.unsubsribeLinks[0]||"":""},t.prototype.initFlagsByJson=function(e){var t=!1;return e&&"Object/Message"===e["@Object"]&&(this.unseen(!e.IsSeen),this.flagged(!!e.IsFlagged),this.answered(!!e.IsAnswered),this.forwarded(!!e.IsForwarded),this.isReadReceipt(!!e.IsReadReceipt),this.deletedMark(!!e.IsDeleted),t=!0),t},t.prototype.fromToLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.i(F.b)(this.from,e,t)},t.prototype.fromDkimData=function(){var e=["none",""];return i.i(w.isNonEmptyArray)(this.from)&&1===this.from.length&&this.from[0]&&this.from[0].dkimStatus&&(e=[this.from[0].dkimStatus,this.from[0].dkimValue||""]),e},t.prototype.toToLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.i(F.b)(this.to,e,t)},t.prototype.ccToLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.i(F.b)(this.cc,e,t)},t.prototype.bccToLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.i(F.b)(this.bcc,e,t)},t.prototype.replyToToLine=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i.i(F.b)(this.replyTo,e,t)},t.prototype.lineAsCss=function(){return y()({deleted:this.deleted(),"deleted-mark":this.deletedMark(),selected:this.selected(),checked:this.checked(),flagged:this.flagged(),unseen:this.unseen(),answered:this.answered(),forwarded:this.forwarded(),focused:this.focused(),important:this.isImportant(),withAttachments:this.hasAttachments(),new:this.newForAnimation(),emptySubject:""===this.subject(),hasUnseenSubMessage:this.hasUnseenSubMessage(),hasFlaggedSubMessage:this.hasFlaggedSubMessage()})},t.prototype.hasVisibleAttachments=function(){return!!u.a.find(this.attachments(),function(e){return!e.isLinked})},t.prototype.findAttachmentByCid=function(e){var t=null,n=this.attachments();return i.i(w.isNonEmptyArray)(n)&&(e=e.replace(/^<+/,"").replace(/>+$/,""),t=u.a.find(n,function(t){return e===t.cidWithOutTags})),t||null},t.prototype.findAttachmentByContentLocation=function(e){var t=null,n=this.attachments();return i.i(w.isNonEmptyArray)(n)&&(t=u.a.find(n,function(t){return e===t.contentLocation})),t||null},t.prototype.messageId=function(){return this.sMessageId},t.prototype.inReplyTo=function(){return this.sInReplyTo},t.prototype.references=function(){return this.sReferences},t.prototype.fromAsSingleEmail=function(){return i.i(w.isArray)(this.from)&&this.from[0]?this.from[0].email:""},t.prototype.viewLink=function(){return i.i(C.i)(this.requestHash)},t.prototype.downloadLink=function(){return i.i(C.j)(this.requestHash)},t.prototype.replyEmails=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],o=i.i(w.isUnd)(e)?{}:e;return i.i(F.d)(this.replyTo,o,n),0===n.length&&i.i(F.d)(this.from,o,n),0!==n.length||t?n:this.replyEmails({},!0)},t.prototype.replyAllEmails=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],o=[],a=[],r=i.i(w.isUnd)(e)?{}:e;return i.i(F.d)(this.replyTo,r,o),0===o.length&&i.i(F.d)(this.from,r,o),i.i(F.d)(this.to,r,o),i.i(F.d)(this.cc,r,a),0!==o.length||t?[o,a]:(n=this.replyAllEmails({},!0),[n[0],a])},t.prototype.textBodyToString=function(){return this.body?this.body.html():""},t.prototype.attachmentsToStringLine=function(){var e=u.a.map(this.attachments(),function(e){return e.fileName+" ("+e.friendlySize+")"});return e&&0<e.length?e.join(", "):""},t.prototype.viewPopupMessage=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.showLazyExternalImagesInBody();var t=this.dateTimeStampInUTC()||0,n=0<t?g.a.unix(t):null;i.i(w.previewMessage)({title:this.subject(),subject:this.subject(),date:n?n.format("LLL"):"",fromCreds:this.fromToLine(!1),toLabel:i.i(S.i18n)("MESSAGE/LABEL_TO"),toCreds:this.toToLine(!1)},this.body,this.isHtml(),e)},t.prototype.printMessage=function(){this.viewPopupMessage(!0)},t.prototype.generateUid=function(){return this.folderFullNameRaw+"/"+this.uid},t.prototype.populateByMessageListItem=function(e){return e&&(this.folderFullNameRaw=e.folderFullNameRaw,this.uid=e.uid,this.hash=e.hash,this.requestHash=e.requestHash,this.subject(e.subject())),this.subjectPrefix(this.subjectPrefix()),this.subjectSuffix(this.subjectSuffix()),e&&(this.size(e.size()),this.dateTimeStampInUTC(e.dateTimeStampInUTC()),this.priority(e.priority()),this.proxy=e.proxy,this.fromEmailString(e.fromEmailString()),this.fromClearEmailString(e.fromClearEmailString()),this.toEmailsString(e.toEmailsString()),this.toClearEmailsString(e.toClearEmailsString()),this.emails=e.emails,this.from=e.from,this.to=e.to,this.cc=e.cc,this.bcc=e.bcc,this.replyTo=e.replyTo,this.deliveredTo=e.deliveredTo,this.unsubsribeLinks=e.unsubsribeLinks,this.unseen(e.unseen()),this.flagged(e.flagged()),this.answered(e.answered()),this.forwarded(e.forwarded()),this.isReadReceipt(e.isReadReceipt()),this.deletedMark(e.deletedMark()),this.priority(e.priority()),this.selected(e.selected()),this.checked(e.checked()),this.hasAttachments(e.hasAttachments()),this.attachmentsSpecData(e.attachmentsSpecData())),this.body=null,this.aDraftInfo=[],this.sMessageId="",this.sInReplyTo="",this.sReferences="",e&&this.threads(e.threads()),this.computeSenderEmail(),this},t.prototype.showLazyExternalImagesInBody=function(){this.body&&p()(".lazy.lazy-inited[data-original]",this.body).each(function(){p()(this).attr("src",p()(this).attr("data-original")).removeAttr("data-original")})},t.prototype.showExternalImages=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.body&&this.body.data("rl-has-images")){this.hasImages(!1),this.body.data("rl-has-images",!1);var t=this.proxy?"data-x-additional-src":"data-x-src";p()("["+t+"]",this.body).each(function(){var i=p()(this);e&&i.is("img")?i.addClass("lazy").attr("data-original",i.attr(t)).removeAttr(t):i.attr("src",i.attr(t)).removeAttr(t)}),t=this.proxy?"data-x-additional-style-url":"data-x-style-url",p()("["+t+"]",this.body).each(function(){var e=p()(this),n=i.i(w.trim)(e.attr("style"));n=""===n?"":";"===n.substr(-1)?n+" ":n+"; ",e.attr("style",n+e.attr(t)).removeAttr(t)}),e&&(p()("img.lazy",this.body).addClass("lazy-inited").lazyload({threshold:400,effect:"fadeIn",skip_invisible:!1,container:p()(".RL-MailMessageView .messageView .messageItem .content")[0]}),T.$win.resize()),i.i(w.windowResize)(500)}},t.prototype.showInternalImages=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.body&&!this.body.data("rl-init-internal-images")){this.body.data("rl-init-internal-images",!0);var t=this;p()("[data-x-src-cid]",this.body).each(function(){var i=p()(this),n=t.findAttachmentByCid(i.attr("data-x-src-cid"));n&&n.download&&(e&&i.is("img")?i.addClass("lazy").attr("data-original",n.linkPreview()):i.attr("src",n.linkPreview()))}),p()("[data-x-src-location]",this.body).each(function(){var i=p()(this),n=t.findAttachmentByContentLocation(i.attr("data-x-src-location"));n||(n=t.findAttachmentByCid(i.attr("data-x-src-location"))),n&&n.download&&(e&&i.is("img")?i.addClass("lazy").attr("data-original",n.linkPreview()):i.attr("src",n.linkPreview()))}),p()("[data-x-style-cid]",this.body).each(function(){var e="",n="",o=p()(this),a=t.findAttachmentByCid(o.attr("data-x-style-cid"));a&&a.linkPreview&&(n=o.attr("data-x-style-cid-name"),""!==n&&(e=i.i(w.trim)(o.attr("style")),e=""===e?"":";"===e.substr(-1)?e+" ":e+"; ",o.attr("style",e+n+": url('"+a.linkPreview()+"')")))}),e&&!function(e,t){u.a.delay(function(){e.addClass("lazy-inited").lazyload({threshold:400,effect:"fadeIn",skip_invisible:!1,container:t})},300)}(p()("img.lazy",t.body),p()(".RL-MailMessageView .messageView .messageItem .content")[0]),i.i(w.windowResize)(500)}},t.prototype.storeDataInDom=function(){this.body&&(this.body.data("rl-is-html",!!this.isHtml()),this.body.data("rl-has-images",!!this.hasImages()))},t.prototype.fetchDataFromDom=function(){this.body&&(this.isHtml(!!this.body.data("rl-is-html")),this.hasImages(!!this.body.data("rl-has-images")))},t.prototype.replacePlaneTextBody=function(e){this.body&&this.body.html(e).addClass("b-text-part plain")},t.prototype.flagHash=function(){return[this.deleted(),this.deletedMark(),this.unseen(),this.flagged(),this.answered(),this.forwarded(),this.isReadReceipt()].join(",")},t}(R.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(1),p=i(36),h=i(49);i.d(t,"a",function(){return f});var f=function(e){function t(n,a,s,l,c,p,h,f,m){o()(this,t);var g=r()(this,e.call(this,"OpenPgpKeyModel"));return g.index=n,g.id=s,g.ids=i.i(d.isNonEmptyArray)(l)?l:[s],g.guid=a,g.user="",g.users=c,g.email="",g.emails=p,g.armor=f,g.isPrivate=!!h,g.selectUser(m),g.deleteAccess=u.a.observable(!1),g}return l()(t,e),t.prototype.getNativeKey=function(){var e=null;try{if(e=h.a.openpgp.key.readArmored(this.armor),e&&!e.err&&e.keys&&e.keys[0])return e}catch(e){i.i(d.log)(e)}return null},t.prototype.getNativeKeys=function(){var e=this.getNativeKey();return e&&e.keys?e.keys:null},t.prototype.select=function(e,t){if(this[t]){var i=this[t].indexOf(e);-1!==i&&(this.user=this.users[i],this.email=this.emails[i])}},t.prototype.selectUser=function(e){this.select(e,"users")},t.prototype.selectEmail=function(e){this.select(e,"emails")},t}(p.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(1),p=i(36);i.d(t,"a",function(){return h});var h=function(e){function t(i,n,a){o()(this,t);var s=r()(this,e.call(this,"TemplateModel"));return s.id=i,s.name=n,s.body=a,s.populated=!0,s.deleteAccess=u.a.observable(!1),s}return l()(t,e),t.prototype.parse=function(e){var t=!1;return e&&"Object/Template"===e["@Object"]&&(this.id=i.i(d.pString)(e.ID),this.name=i.i(d.pString)(e.Name),this.body=i.i(d.pString)(e.Body),this.populated=!!e.Populated,t=!0),t},t}(p.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(12),u=i.n(c),d=i(47),p=i.n(d),h=i(14),f=i(1),m=i(20),g=i(3),b=i(7),y=i(27),v=i(10),S=i(181);i.d(t,"a",function(){return w});var w=function(e){function t(){o()(this,t);var i=r()(this,e.call(this));return i.oRequests={},i.clear(),i}return l()(t,e),t.prototype.clear=function(){this.oRequests={}},t.prototype.abort=function(e,t){return this.oRequests[e]&&(!t&&this.oRequests[e].abort&&(this.oRequests[e].__aborted__=!0,this.oRequests[e].abort()),this.oRequests[e]=null,delete this.oRequests[e]),this},t.prototype.ajaxRequest=function(e,t,n,o,a,r){var s=this;return new p.a(function(l,c){var d=i.i(f.microtime)();n=i.i(f.isNormal)(n)?n:m.g,a=i.i(f.isUnd)(a)?"":i.i(f.pString)(a),
t&&(o.XToken=v.appSettingsGet("token")),y.a("ajax-default-request",[e,o,a]),s.setTrigger(r,!0);var p=u.a.ajax({type:t?"POST":"GET",url:i.i(h.k)(a),async:!0,dataType:"json",data:t?o||{}:{},timeout:n,global:!0}).always(function(t,n){var a=!1,u=null;t&&t.Time&&(a=i.i(f.pInt)(t.Time)>i.i(f.microtime)()-d);var p="";switch(!0){case"success"===n&&t&&t.Result&&e===t.Action:p=g.StorageResultType.Success;break;case!("abort"!==n||t&&t.__aborted__):p=g.StorageResultType.Abort;break;default:p=g.StorageResultType.Error}y.a("ajax-default-response",[e,g.StorageResultType.Success===p?t:null,p,a,o]),"success"===n?t&&t.Result&&e===t.Action?(t.__cached__=a,l(t)):t&&t.Action?(u=t,c(t.ErrorCode?t.ErrorCode:g.Notification.AjaxFalse)):(u=t,c(g.Notification.AjaxParse)):"timeout"===n?(u=t,c(g.Notification.AjaxTimeout)):"abort"===n?t&&t.__aborted__||c(g.Notification.AjaxAbort):(u=t,c(g.Notification.AjaxParse)),s.oRequests[e]&&(s.oRequests[e]=null,delete s.oRequests[e]),s.setTrigger(r,!1),u&&(-1<i.i(f.inArray)(u.ErrorCode,[g.Notification.AuthError,g.Notification.AccessError,g.Notification.ConnectionError,g.Notification.DomainNotAllowed,g.Notification.AccountNotAllowed,g.Notification.MailServerError,g.Notification.UnknownNotification,g.Notification.UnknownError])&&(b.data.iAjaxErrorCount+=1),g.Notification.InvalidToken===u.ErrorCode&&(b.data.iTokenErrorCount+=1),m.e<b.data.iTokenErrorCount&&b.data.__APP__&&b.data.__APP__.loginAndLogoutReload&&b.data.__APP__.loginAndLogoutReload(!1,!0),(u.ClearAuth||u.Logout||m.f<b.data.iAjaxErrorCount)&&(b.data.__APP__&&b.data.__APP__.clearClientSideToken&&b.data.__APP__.clearClientSideToken(),b.data.__APP__&&!u.ClearAuth&&b.data.__APP__.loginAndLogoutReload&&b.data.__APP__.loginAndLogoutReload(!1,!0)))});p&&(s.oRequests[e]&&(s.oRequests[e]=null,delete s.oRequests[e]),s.oRequests[e]=p)})},t.prototype.getRequest=function(e,t,n,o){return n=i.i(f.isUnd)(n)?"":i.i(f.pString)(n),n=e+"/"+n,this.ajaxRequest(e,!1,o,null,n,t)},t.prototype.postRequest=function(e,t,i,n){return i=i||{},i.Action=e,this.ajaxRequest(e,!0,n,i,"",t)},t}(S.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(20),p=i(1),h=i(3),f=i(23),m=i(10),g=i(79),b=i(28),y=i(30),v=i(18),S=i(208),w=i(181),T=function(e){function t(){return o()(this,t),r()(this,e.apply(this,arguments))}return l()(t,e),t.prototype.isFolderExpanded=function(e,t){return t&&i.i(p.isArray)(t)&&-1!==u.a.indexOf(t,e)},t.prototype.normalizeFolder=function(e){return""===e||d.c===e||null!==f.b(e)?e:""},t.prototype.folderResponseParseRec=function(e,t,n){var o=this,a=y.a.displaySpecSetting(),r=[];return u.a.each(t,function(t){if(t){var s=f.b(t.FullNameRaw);s||(s=S.a.newInstanceFromJson(t),s&&(f.f(t.FullNameRaw,s),f.g(s.fullNameHash,t.FullNameRaw,s))),s&&(a?s.checkable(!!t.Checkable):s.checkable(!0),s.collapsed(!o.isFolderExpanded(s.fullNameHash,n)),t.Extended&&(t.Extended.Hash&&f.h(s.fullNameRaw,t.Extended.Hash),i.i(p.isNormal)(t.Extended.MessageCount)&&s.messageCountAll(t.Extended.MessageCount),i.i(p.isNormal)(t.Extended.MessageUnseenCount)&&s.messageCountUnread(t.Extended.MessageUnseenCount)),t.SubFolders&&"Collection/FolderCollection"===t.SubFolders["@Object"]&&t.SubFolders["@Collection"]&&i.i(p.isArray)(t.SubFolders["@Collection"])&&s.subFolders(o.folderResponseParseRec(e,t.SubFolders["@Collection"],n)),r.push(s))}}),r},t.prototype.foldersList=function(e){if(e&&"Collection/FolderCollection"===e["@Object"]&&e["@Collection"]&&i.i(p.isArray)(e["@Collection"])){var t=g.a(h.ClientSideKeyName.ExpandedFolders),n=i.i(p.pInt)(e.CountRec),o=i.i(p.pInt)(m.appSettingsGet("folderSpecLimit"));o=100<o?100:10>o?10:o,y.a.displaySpecSetting(0>=n||o<n),y.a.folderList(this.folderResponseParseRec(i.i(p.isUnd)(e.Namespace)?"":e.Namespace,e["@Collection"],t))}},t.prototype.foldersAdditionalParameters=function(e){if(e&&e&&"Collection/FolderCollection"===e["@Object"]&&e["@Collection"]&&i.i(p.isArray)(e["@Collection"])){i.i(p.isUnd)(e.Namespace)||(y.a.namespace=e.Namespace),b.a.threadsAllowed(!!m.appSettingsGet("useImapThread")&&e.IsThreadsSupported&&!0),y.a.folderList.optimized(!!e.Optimized);var t=!1;e.SystemFolders&&""==""+m.settingsGet("SentFolder")+m.settingsGet("DraftFolder")+m.settingsGet("SpamFolder")+m.settingsGet("TrashFolder")+m.settingsGet("ArchiveFolder")+m.settingsGet("NullFolder")&&(m.settingsSet("SentFolder",e.SystemFolders[h.ServerFolderType.SENT]||null),m.settingsSet("DraftFolder",e.SystemFolders[h.ServerFolderType.DRAFTS]||null),m.settingsSet("SpamFolder",e.SystemFolders[h.ServerFolderType.JUNK]||null),m.settingsSet("TrashFolder",e.SystemFolders[h.ServerFolderType.TRASH]||null),m.settingsSet("ArchiveFolder",e.SystemFolders[h.ServerFolderType.ALL]||null),t=!0),y.a.sentFolder(this.normalizeFolder(m.settingsGet("SentFolder"))),y.a.draftFolder(this.normalizeFolder(m.settingsGet("DraftFolder"))),y.a.spamFolder(this.normalizeFolder(m.settingsGet("SpamFolder"))),y.a.trashFolder(this.normalizeFolder(m.settingsGet("TrashFolder"))),y.a.archiveFolder(this.normalizeFolder(m.settingsGet("ArchiveFolder"))),t&&v.a.saveSystemFolders(p.noop,{SentFolder:y.a.sentFolder(),DraftFolder:y.a.draftFolder(),SpamFolder:y.a.spamFolder(),TrashFolder:y.a.trashFolder(),ArchiveFolder:y.a.archiveFolder(),NullFolder:"NullFolder"}),g.b(h.ClientSideKeyName.FoldersLashHash,e.FoldersHash)}},t}(w.a);t.a=new T},,,function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(72),u=i(256),d=i(16);i.d(t,"a",function(){return p});var p=function(e){function t(){return o()(this,t),r()(this,e.call(this,"login",[u.a]))}return l()(t,e),t.prototype.onShow=function(){i.i(d.a)().setWindowTitle("")},t}(c.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(3),p=i(7),h=i(1),f=i(23),m=i(8),g=i(29),b=i(10),y=i(28),v=i(46),S=i(40),w=i(30),T=i(39),C=i(260),E=i(257),A=i(258),F=i(259),N=i(16),R=i(9),I=i(72);i.d(t,"a",function(){return L});var L=function(e){function t(){return o()(this,t),r()(this,e.call(this,"mailbox",[C.a,E.a,A.a,F.a]))}return l()(t,e),t.prototype.updateWindowTitle=function(){var e=w.a.foldersInboxUnreadCount(),t=v.a.email();b.appSettingsGet("listPermanentFiltered")&&(e=0),i.i(N.a)().setWindowTitle((""===t?"":""+(0<e?"("+e+") ":" ")+t+" - ")+i.i(m.i18n)("TITLES/MAILBOX"))},t.prototype.onShow=function(){this.updateWindowTitle(),y.a.focusedState(d.Focused.None),y.a.focusedState(d.Focused.MessageList),b.appSettingsGet("mobile")&&i.i(p.leftPanelDisabled)(!0),b.capa(d.Capa.Folders)?i.i(p.leftPanelType)(""):i.i(p.leftPanelType)(b.capa(d.Capa.Composer)||b.capa(d.Capa.Contacts)?"short":"none")},t.prototype.onRoute=function(e,t,n){var o=e.replace(/^(.+)~([\d]+)$/,"$2"),a=i.i(f.b)(i.i(f.t)(e.replace(/~([\d]+)$/,"")));a&&(e===o&&(o=""),w.a.currentFolder(a),T.a.messageListPage(t),T.a.messageListSearch(n),T.a.messageListThreadUid(o),i.i(N.a)().reloadMessageList())},t.prototype.onStart=function(){var e=this;w.a.folderList.subscribe(h.windowResizeCallback),T.a.messageList.subscribe(h.windowResizeCallback),T.a.message.subscribe(h.windowResizeCallback),u.a.delay(function(){return S.a.layout.valueHasMutated()},d.Magics.Time50ms),u.a.delay(function(){return i.i(R.warmUpScreenPopup)(i(37))},d.Magics.Time500ms),g.b("mailbox.inbox-unread-count",function(t){w.a.foldersInboxUnreadCount(t);var i=v.a.email();u.a.each(v.a.accounts(),function(e){e&&i===e.email&&e.count(t)}),e.updateWindowTitle()})},t.prototype.onBuild=function(){p.bMobileDevice||b.appSettingsGet("mobile")||u.a.defer(function(){i.i(N.a)().initHorizontalLayoutResizer(d.ClientSideKeyName.MessageListSize)}),p.$html.on("click","#rl-right",function(){i.i(p.moveAction)(!1)})},t.prototype.routes=function(){var e=i.i(f.a)(),t=function(t,n){return n[0]=i.i(h.pString)(n[0]),n[1]=i.i(h.pInt)(n[1]),n[1]=0>=n[1]?1:n[1],n[2]=i.i(h.pString)(n[2]),""===t&&(n[0]=e,n[1]=1),[i.i(h.decodeURI)(n[0]),n[1],i.i(h.decodeURI)(n[2])]},n=function(t,n){return n[0]=i.i(h.pString)(n[0]),n[1]=i.i(h.pString)(n[1]),""===t&&(n[0]=e),[i.i(h.decodeURI)(n[0]),1,i.i(h.decodeURI)(n[1])]};return[[/^([a-zA-Z0-9~]+)\/p([1-9][0-9]*)\/(.+)\/?$/,{normalize_:t}],[/^([a-zA-Z0-9~]+)\/p([1-9][0-9]*)$/,{normalize_:t}],[/^([a-zA-Z0-9~]+)\/(.+)\/?$/,{normalize_:n}],[/^([^\/]*)$/,{normalize_:t}]]},t}(I.a)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(3),u=i(7),d=i(27),p=i(8),h=i(28),f=i(46),m=i(10),g=i(9),b=i(116),y=i(235),v=i(232),S=i(230),w=i(233),T=i(237),C=i(238),E=i(231),A=i(239),F=i(234),N=i(240),R=i(236),I=i(263),L=i(261),_=i(262),P=i(16);i.d(t,"a",function(){return D});var D=function(e){function t(){o()(this,t);var n=r()(this,e.call(this,[I.a,L.a,_.a]));return i.i(p.initOnStartOrLangChange)(function(){n.sSettingsTitle=i.i(p.i18n)("TITLES/SETTINGS")},function(){n.setSettingsTitle()}),n}return l()(t,e),t.prototype.setupSettings=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return m.capa(c.Capa.Settings)?(i.i(g.addSettingsViewModel)(y.a,"SettingsGeneral","SETTINGS_LABELS/LABEL_GENERAL_NAME","general",!0),h.a.contactsIsAllowed()&&i.i(g.addSettingsViewModel)(v.a,"SettingsContacts","SETTINGS_LABELS/LABEL_CONTACTS_NAME","contacts"),(m.capa(c.Capa.AdditionalAccounts)||m.capa(c.Capa.Identities))&&i.i(g.addSettingsViewModel)(S.a,"SettingsAccounts",m.capa(c.Capa.AdditionalAccounts)?"SETTINGS_LABELS/LABEL_ACCOUNTS_NAME":"SETTINGS_LABELS/LABEL_IDENTITIES_NAME","accounts"),m.capa(c.Capa.Sieve)&&i.i(g.addSettingsViewModel)(w.a,"SettingsFilters","SETTINGS_LABELS/LABEL_FILTERS_NAME","filters"),(m.capa(c.Capa.AutoLogout)||m.capa(c.Capa.TwoFactor))&&i.i(g.addSettingsViewModel)(T.a,"SettingsSecurity","SETTINGS_LABELS/LABEL_SECURITY_NAME","security"),f.a.isRootAccount()&&(m.settingsGet("AllowGoogleSocial")&&m.settingsGet("AllowGoogleSocialAuth")||m.settingsGet("AllowFacebookSocial")||m.settingsGet("AllowTwitterSocial"))&&i.i(g.addSettingsViewModel)(C.a,"SettingsSocial","SETTINGS_LABELS/LABEL_SOCIAL_NAME","social"),m.settingsGet("ChangePasswordIsAllowed")&&i.i(g.addSettingsViewModel)(E.a,"SettingsChangePassword","SETTINGS_LABELS/LABEL_CHANGE_PASSWORD_NAME","change-password"),m.capa(c.Capa.Templates)&&i.i(g.addSettingsViewModel)(A.a,"SettingsTemplates","SETTINGS_LABELS/LABEL_TEMPLATES_NAME","templates"),m.capa(c.Capa.Folders)&&i.i(g.addSettingsViewModel)(F.a,"SettingsFolders","SETTINGS_LABELS/LABEL_FOLDERS_NAME","folders"),m.capa(c.Capa.Themes)&&i.i(g.addSettingsViewModel)(N.a,"SettingsThemes","SETTINGS_LABELS/LABEL_THEMES_NAME","themes"),m.capa(c.Capa.OpenPGP)&&i.i(g.addSettingsViewModel)(R.a,"SettingsOpenPGP","SETTINGS_LABELS/LABEL_OPEN_PGP_NAME","openpgp"),i.i(d.h)(!1),e&&e(),!0):(e&&e(),!1)},t.prototype.onShow=function(){this.setSettingsTitle(),i.i(u.keyScope)(c.KeyState.Settings),i.i(u.leftPanelType)(""),m.appSettingsGet("mobile")&&i.i(u.leftPanelDisabled)(!0)},t.prototype.setSettingsTitle=function(){var e=f.a.email();i.i(P.a)().setWindowTitle((""===e?"":e+" - ")+this.sSettingsTitle)},t}(b.a)},,,,,,,,,,,function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(11),r=i.n(a),s=i(6),l=i.n(s),c=i(2),u=i.n(c),d=i(3),p=i(14),h=i(10),f=i(46),m=i(97),g=i(18),b=i(16),y=i(9);i.d(t,"a",function(){return v});var v=function(){function e(){o()(this,e),this.allowAdditionalAccount=i.i(h.capa)(d.Capa.AdditionalAccounts),this.allowIdentities=i.i(h.capa)(d.Capa.Identities),this.accounts=f.a.accounts,this.identities=m.a.identities,this.accountForDeletion=u.a.observable(null).deleteAccessHelper(),this.identityForDeletion=u.a.observable(null).deleteAccessHelper()}return e.prototype.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},e.prototype.addNewAccount=function(){i.i(y.showScreenPopup)(i(122))},e.prototype.editAccount=function(e){e&&e.canBeEdit()&&i.i(y.showScreenPopup)(i(122),[e])},e.prototype.addNewIdentity=function(){i.i(y.showScreenPopup)(i(124))},e.prototype.editIdentity=function(e){i.i(y.showScreenPopup)(i(124),[e])},e.prototype.deleteAccount=function(e){e&&e.deleteAccess()&&(this.accountForDeletion(null),e&&(this.accounts.remove(function(t){return e===t}),g.a.accountDelete(function(e,t){d.StorageResultType.Success===e&&t&&t.Result&&t.Reload?(i.i(y.routeOff)(),i.i(y.setHash)(i.i(p.z)(),!0),i.i(y.routeOff)(),l.a.defer(function(){return r.a.location.reload()})):i.i(b.a)().accountsAndIdentities()},e.email)))},e.prototype.deleteIdentity=function(e){e&&e.deleteAccess()&&(this.identityForDeletion(null),e&&(m.a.identities.remove(function(t){return e===t}),g.a.identityDelete(function(){i.i(b.a)().accountsAndIdentities()},e.id)))},e.prototype.accountsAndIdentitiesAfterMove=function(){g.a.accountsAndIdentitiesSortOrder(null,f.a.accountsEmails.peek(),m.a.identitiesIDS.peek())},e.prototype.onBuild=function(e){var t=this;e.on("click",".accounts-list .account-item .e-action",function(){var e=u.a.dataFor(this);e&&t.editAccount(e)}).on("click",".identities-list .identity-item .e-action",function(){var e=u.a.dataFor(this);e&&t.editIdentity(e)})},e}()},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(6),c=i.n(l),u=i(2),d=i.n(u),p=i(3),h=i(8),f=i(18),m=i(16),g=i(9);i.d(t,"a",function(){return v});var b,y,v=(b=i.i(g.command)(function(e){return!e.changeProcess()&&""!==e.currentPassword()&&""!==e.newPassword()&&""!==e.newPassword2()}),y=function(){function e(){var t=this;s()(this,e),this.changeProcess=d.a.observable(!1),this.errorDescription=d.a.observable(""),this.passwordMismatch=d.a.observable(!1),this.passwordUpdateError=d.a.observable(!1),this.passwordUpdateSuccess=d.a.observable(!1),this.currentPassword=d.a.observable(""),this.currentPassword.error=d.a.observable(!1),this.newPassword=d.a.observable(""),this.newPassword2=d.a.observable(""),this.currentPassword.subscribe(function(){t.passwordUpdateError(!1),t.passwordUpdateSuccess(!1),t.currentPassword.error(!1)}),this.newPassword.subscribe(function(){t.passwordUpdateError(!1),t.passwordUpdateSuccess(!1),t.passwordMismatch(!1)}),this.newPassword2.subscribe(function(){t.passwordUpdateError(!1),t.passwordUpdateSuccess(!1),t.passwordMismatch(!1)}),this.onChangePasswordResponse=c.a.bind(this.onChangePasswordResponse,this)}return e.prototype.saveNewPasswordCommand=function(){this.newPassword()!==this.newPassword2()?(this.passwordMismatch(!0),this.errorDescription(i.i(h.i18n)("SETTINGS_CHANGE_PASSWORD/ERROR_PASSWORD_MISMATCH"))):(this.changeProcess(!0),this.passwordUpdateError(!1),this.passwordUpdateSuccess(!1),this.currentPassword.error(!1),this.passwordMismatch(!1),this.errorDescription(""),f.a.changePassword(this.onChangePasswordResponse,this.currentPassword(),this.newPassword()))},e.prototype.onHide=function(){this.changeProcess(!1),this.currentPassword(""),this.newPassword(""),this.newPassword2(""),this.errorDescription(""),this.passwordMismatch(!1),this.currentPassword.error(!1)},e.prototype.onChangePasswordResponse=function(e,t){this.changeProcess(!1),this.passwordMismatch(!1),this.errorDescription(""),this.currentPassword.error(!1),p.StorageResultType.Success===e&&t&&t.Result?(this.currentPassword(""),this.newPassword(""),this.newPassword2(""),this.passwordUpdateSuccess(!0),this.currentPassword.error(!1),i.i(m.a)().setClientSideToken(t.Result)):(t&&p.Notification.CurrentPasswordIncorrect===t.ErrorCode&&this.currentPassword.error(!0),this.passwordUpdateError(!0),this.errorDescription(i.i(h.getNotificationFromResponse)(t,p.Notification.CouldNotSaveNewPassword)))},e}(),n(y.prototype,"saveNewPasswordCommand",[b],a()(y.prototype,"saveNewPasswordCommand"),y.prototype),y)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(3),l=i(1),c=i(28),u=i(120),d=i(18);i.d(t,"a",function(){return p});var p=function(){function e(){var t=this;o()(this,e),this.contactsAutosave=c.a.contactsAutosave,this.allowContactsSync=u.a.allowContactsSync,this.enableContactsSync=u.a.enableContactsSync,this.contactsSyncUrl=u.a.contactsSyncUrl,this.contactsSyncUser=u.a.contactsSyncUser,this.contactsSyncPass=u.a.contactsSyncPass,this.saveTrigger=r.a.computed(function(){return[t.enableContactsSync()?"1":"0",t.contactsSyncUrl(),t.contactsSyncUser(),t.contactsSyncPass()].join("|")}).extend({throttle:s.Magics.Time500ms})}return e.prototype.onBuild=function(){var e=this;this.contactsAutosave.subscribe(function(e){d.a.saveSettings(null,{ContactsAutosave:i.i(l.boolToAjax)(e)})}),this.saveTrigger.subscribe(function(){d.a.saveContactsSyncData(null,e.enableContactsSync(),e.contactsSyncUrl(),e.contactsSyncUser(),e.contactsSyncPass())})},e}()},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(6),c=i.n(l),u=i(2),d=i.n(u),p=i(1),h=i(3),f=i(8),m=i(183),g=i(18),b=i(206),y=i(9);i.d(t,"a",function(){return w});var v,S,w=(v=i.i(y.command)(function(e){return e.haveChanges()}),S=function(){function e(){var t=this;s()(this,e),this.modules=m.a.modules,this.filters=m.a.filters,this.inited=d.a.observable(!1),this.serverError=d.a.observable(!1),this.serverErrorDesc=d.a.observable(""),this.haveChanges=d.a.observable(!1),this.saveErrorText=d.a.observable(""),this.filters.subscribe(p.windowResizeCallback),this.serverError.subscribe(function(e){e||t.serverErrorDesc("")},this),this.filterRaw=m.a.raw,this.filterRaw.capa=m.a.capa,this.filterRaw.active=d.a.observable(!1),this.filterRaw.allow=d.a.observable(!1),this.filterRaw.error=d.a.observable(!1),this.filterForDeletion=d.a.observable(null).deleteAccessHelper(),this.filters.subscribe(function(){t.haveChanges(!0)}),this.filterRaw.subscribe(function(){t.haveChanges(!0),t.filterRaw.error(!1)}),this.haveChanges.subscribe(function(){t.saveErrorText("")}),this.filterRaw.active.subscribe(function(){t.haveChanges(!0),t.filterRaw.error(!1)})}return e.prototype.saveChangesCommand=function(){var e=this;if(!this.filters.saving()){if(this.filterRaw.active()&&""===i.i(p.trim)(this.filterRaw()))return this.filterRaw.error(!0),!1;this.filters.saving(!0),this.saveErrorText(""),g.a.filtersSave(function(t,n){e.filters.saving(!1),h.StorageResultType.Success===t&&n&&n.Result?(e.haveChanges(!1),e.updateList()):n&&n.ErrorCode?e.saveErrorText(n.ErrorMessageAdditional||i.i(f.getNotification)(n.ErrorCode)):e.saveErrorText(i.i(f.getNotification)(h.Notification.CantSaveFilters))},this.filters(),this.filterRaw(),this.filterRaw.active())}return!0},e.prototype.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},e.prototype.updateList=function(){var e=this;this.filters.loading()||(this.filters.loading(!0),g.a.filtersGet(function(t,n){e.filters.loading(!1),e.serverError(!1),h.StorageResultType.Success===t&&n&&n.Result&&i.i(p.isArray)(n.Result.Filters)?(e.inited(!0),e.serverError(!1),e.filters(c.a.compact(c.a.map(n.Result.Filters,function(e){var t=new b.a;return t&&t.parse(e)?t:null}))),e.modules(n.Result.Modules?n.Result.Modules:{}),e.filterRaw(n.Result.Raw||""),e.filterRaw.capa(i.i(p.isArray)(n.Result.Capa)?n.Result.Capa.join(" "):""),e.filterRaw.active(!!n.Result.RawIsActive),e.filterRaw.allow(!!n.Result.RawIsAllow)):(e.filters([]),e.modules({}),e.filterRaw(""),e.filterRaw.capa({}),e.serverError(!0),e.serverErrorDesc(n&&n.ErrorCode?i.i(f.getNotification)(n.ErrorCode):i.i(f.getNotification)(h.Notification.CantGetFilters))),e.haveChanges(!1)}))},e.prototype.deleteFilter=function(e){this.filters.remove(e),i.i(p.delegateRunOnDestroy)(e)},e.prototype.addFilter=function(){var e=this,t=new b.a;t.generateID(),i.i(y.showScreenPopup)(i(187),[t,function(){e.filters.push(t),e.filterRaw.active(!1)},!1])},e.prototype.editFilter=function(e){var t=this,n=e.cloneSelf();i.i(y.showScreenPopup)(i(187),[n,function(){var o=t.filters(),a=o.indexOf(e);-1<a&&o[a]&&(i.i(p.delegateRunOnDestroy)(o[a]),o[a]=n,t.filters(o),t.haveChanges(!0))},!0])},e.prototype.onBuild=function(e){var t=this;e.on("click",".filter-item .e-action",function(){var e=d.a.dataFor(this);e&&t.editFilter(e)})},e.prototype.onShow=function(){this.updateList()},e}(),n(S.prototype,"saveChangesCommand",[v],a()(S.prototype,"saveChangesCommand"),S.prototype),S)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(3),l=i(1),c=i(8),u=i(23),d=i(10),p=i(79),h=i(30),f=i(78),m=i(18),g=i(16),b=i(9);i.d(t,"a",function(){return y});var y=function(){function e(){o()(this,e),this.displaySpecSetting=h.a.displaySpecSetting,this.folderList=h.a.folderList,this.folderListHelp=r.a.observable("").extend({throttle:s.Magics.Time100ms}),this.loading=r.a.computed(function(){var e=h.a.foldersLoading(),t=h.a.foldersCreating(),i=h.a.foldersDeleting(),n=h.a.foldersRenaming();return e||t||i||n}),this.folderForDeletion=r.a.observable(null).deleteAccessHelper(),this.folderForEdit=r.a.observable(null).extend({toggleSubscribeProperty:[this,"edited"]}),this.useImapSubscribe=!!i.i(d.appSettingsGet)("useImapSubscribe")}return e.prototype.folderEditOnEnter=function(e){var t=e?i.i(l.trim)(e.nameForEdit()):"";""!==t&&e.name()!==t&&(p.b(s.ClientSideKeyName.FoldersLashHash,""),i.i(g.a)().foldersPromisesActionHelper(f.a.folderRename(e.fullNameRaw,t,h.a.foldersRenaming),s.Notification.CantRenameFolder),i.i(u.u)(e.fullNameRaw),e.name(t)),e.edited(!1)},e.prototype.folderEditOnEsc=function(e){e&&e.edited(!1)},e.prototype.onShow=function(){h.a.folderList.error("")},e.prototype.onBuild=function(e){var t=this;e.on("mouseover",".delete-folder-parent",function(){t.folderListHelp(i.i(c.i18n)("SETTINGS_FOLDERS/HELP_DELETE_FOLDER"))}).on("mouseover",".subscribe-folder-parent",function(){t.folderListHelp(i.i(c.i18n)("SETTINGS_FOLDERS/HELP_SHOW_HIDE_FOLDER"))}).on("mouseover",".check-folder-parent",function(){t.folderListHelp(i.i(c.i18n)("SETTINGS_FOLDERS/HELP_CHECK_FOR_NEW_MESSAGES"))}).on("mouseout",".subscribe-folder-parent, .check-folder-parent, .delete-folder-parent",function(){t.folderListHelp("")})},e.prototype.createFolder=function(){i.i(b.showScreenPopup)(i(188))},e.prototype.systemFolder=function(){i.i(b.showScreenPopup)(i(98))},e.prototype.deleteFolder=function(e){if(e&&e.canBeDeleted()&&e.deleteAccess()&&0===e.privateMessageCountAll()){if(this.folderForDeletion(null),e){var t=function t(i){return e===i||(i.subFolders.remove(t),!1)};p.b(s.ClientSideKeyName.FoldersLashHash,""),h.a.folderList.remove(t),i.i(g.a)().foldersPromisesActionHelper(f.a.folderDelete(e.fullNameRaw,h.a.foldersDeleting),s.Notification.CantDeleteFolder),i.i(u.u)(e.fullNameRaw)}}else 0<e.privateMessageCountAll()&&h.a.folderList.error(i.i(c.getNotification)(s.Notification.CantDeleteNonEmptyFolder))},e.prototype.subscribeFolder=function(e){p.b(s.ClientSideKeyName.FoldersLashHash,""),m.a.folderSetSubscribe(l.noop,e.fullNameRaw,!0),e.subScribed(!0)},e.prototype.unSubscribeFolder=function(e){p.b(s.ClientSideKeyName.FoldersLashHash,""),m.a.folderSetSubscribe(l.noop,e.fullNameRaw,!1),e.subScribed(!1)},e.prototype.checkableTrueFolder=function(e){m.a.folderSetCheckable(l.noop,e.fullNameRaw,!0),e.checkable(!0)},e.prototype.checkableFalseFolder=function(e){m.a.folderSetCheckable(l.noop,e.fullNameRaw,!1),e.checkable(!1)},e}()},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(6),r=i.n(a),s=i(2),l=i.n(s),c=i(20),u=i(7),d=i(3),p=i(1),h=i(8),f=i(9),m=i(28),g=i(53),b=i(40),y=i(97),v=i(121),S=i(39),w=i(18);i.d(t,"a",function(){return T});var T=function(){function e(){var t=this;o()(this,e),this.language=g.a.language,this.languages=g.a.languages,this.messagesPerPage=b.a.messagesPerPage,this.messagesPerPageArray=c.b,this.editorDefaultType=b.a.editorDefaultType,this.layout=b.a.layout,this.usePreviewPane=b.a.usePreviewPane,this.soundNotificationIsSupported=v.a.soundNotificationIsSupported,this.enableSoundNotification=v.a.enableSoundNotification,this.enableDesktopNotification=v.a.enableDesktopNotification,this.isDesktopNotificationSupported=v.a.isDesktopNotificationSupported,this.isDesktopNotificationDenied=v.a.isDesktopNotificationDenied,this.showImages=b.a.showImages,this.useCheckboxesInList=b.a.useCheckboxesInList,this.threadsAllowed=m.a.threadsAllowed,this.useThreads=b.a.useThreads,this.replySameFolder=b.a.replySameFolder,this.allowLanguagesOnSettings=m.a.allowLanguagesOnSettings,this.languageFullName=l.a.computed(function(){return i.i(p.convertLangName)(t.language())}),this.languageTrigger=l.a.observable(d.SaveSettingsStep.Idle).extend({throttle:d.Magics.Time100ms}),this.mppTrigger=l.a.observable(d.SaveSettingsStep.Idle),this.editorDefaultTypeTrigger=l.a.observable(d.SaveSettingsStep.Idle),this.layoutTrigger=l.a.observable(d.SaveSettingsStep.Idle),this.isAnimationSupported=u.bAnimationSupported,this.identities=y.a.identities,this.identityMain=l.a.computed(function(){var e=t.identities();return i.i(p.isArray)(e)?r.a.find(e,function(e){return e&&""===e.id()}):null}),this.identityMainDesc=l.a.computed(function(){var e=t.identityMain();return e?e.formattedName():"---"}),this.editorDefaultTypes=l.a.computed(function(){return i.i(h.trigger)(),[{id:d.EditorDefaultType.Html,name:i.i(h.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_HTML")},{id:d.EditorDefaultType.Plain,name:i.i(h.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_PLAIN")},{id:d.EditorDefaultType.HtmlForced,name:i.i(h.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_HTML_FORCED")},{id:d.EditorDefaultType.PlainForced,name:i.i(h.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_PLAIN_FORCED")}]}),this.layoutTypes=l.a.computed(function(){return i.i(h.trigger)(),[{id:d.Layout.NoPreview,name:i.i(h.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_NO_SPLIT")},{id:d.Layout.SidePreview,name:i.i(h.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_VERTICAL_SPLIT")},{id:d.Layout.BottomPreview,name:i.i(h.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_HORIZONTAL_SPLIT")}]})}return e.prototype.editMainIdentity=function(){var e=this.identityMain();e&&i.i(f.showScreenPopup)(i(124),[e])},e.prototype.testSoundNotification=function(){v.a.playSoundNotification(!0)},e.prototype.onBuild=function(){var e=this;r.a.delay(function(){var t=i.i(p.settingsSaveHelperSimpleFunction)(e.editorDefaultTypeTrigger,e),n=i.i(p.settingsSaveHelperSimpleFunction)(e.mppTrigger,e),o=i.i(p.settingsSaveHelperSimpleFunction)(e.layoutTrigger,e),a=function(t){return function(){e.languageTrigger(t),r.a.delay(function(){return e.languageTrigger(d.SaveSettingsStep.Idle)},d.Magics.Time1s)}};e.language.subscribe(function(t){e.languageTrigger(d.SaveSettingsStep.Animate),i.i(h.reload)(!1,t).then(a(d.SaveSettingsStep.TrueResult),a(d.SaveSettingsStep.FalseResult)).then(function(){w.a.saveSettings(null,{Language:t})})}),e.editorDefaultType.subscribe(w.a.saveSettingsHelper("EditorDefaultType",null,t)),e.messagesPerPage.subscribe(w.a.saveSettingsHelper("MPP",null,n)),e.showImages.subscribe(w.a.saveSettingsHelper("ShowImages",p.boolToAjax)),e.useCheckboxesInList.subscribe(w.a.saveSettingsHelper("UseCheckboxesInList",p.boolToAjax)),e.enableDesktopNotification.subscribe(function(e){i.i(p.timeOutAction)("SaveDesktopNotifications",function(){w.a.saveSettings(null,{DesktopNotifications:i.i(p.boolToAjax)(e)})},d.Magics.Time3s)}),e.enableSoundNotification.subscribe(function(e){i.i(p.timeOutAction)("SaveSoundNotification",function(){w.a.saveSettings(null,{SoundNotification:i.i(p.boolToAjax)(e)})},d.Magics.Time3s)}),e.replySameFolder.subscribe(function(e){i.i(p.timeOutAction)("SaveReplySameFolder",function(){w.a.saveSettings(null,{ReplySameFolder:i.i(p.boolToAjax)(e)})},d.Magics.Time3s)}),e.useThreads.subscribe(function(e){S.a.messageList([]),w.a.saveSettings(null,{UseThreads:i.i(p.boolToAjax)(e)})}),e.layout.subscribe(function(e){S.a.messageList([]),w.a.saveSettings(o,{Layout:e})})},d.Magics.Time50ms)},e.prototype.onShow=function(){this.enableDesktopNotification.valueHasMutated()},e.prototype.selectLanguage=function(){i.i(f.showScreenPopup)(i(80),[this.language,this.languages(),g.a.userLanguage()])},e}()},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(6),r=i.n(a),s=i(2),l=i.n(s),c=i(1),u=i(7),d=i(49),p=i(16),h=i(9);i.d(t,"a",function(){return f});var f=function(){function e(){o()(this,e),this.openpgpkeys=d.a.openpgpkeys,this.openpgpkeysPublic=d.a.openpgpkeysPublic,this.openpgpkeysPrivate=d.a.openpgpkeysPrivate,this.openPgpKeyForDeletion=l.a.observable(null).deleteAccessHelper(),this.isHttps=u.bIsHttps}return e.prototype.addOpenPgpKey=function(){i.i(h.showScreenPopup)(i(245))},e.prototype.generateOpenPgpKey=function(){i.i(h.showScreenPopup)(i(251))},e.prototype.viewOpenPgpKey=function(e){e&&i.i(h.showScreenPopup)(i(254),[e])},e.prototype.deleteOpenPgpKey=function(e){if(e&&e.deleteAccess()&&(this.openPgpKeyForDeletion(null),e&&d.a.openpgpKeyring)){var t=r.a.find(d.a.openpgpkeys(),function(t){return e===t});t&&(d.a.openpgpkeys.remove(t),i.i(c.delegateRunOnDestroy)(t),d.a.openpgpKeyring[t.isPrivate?"privateKeys":"publicKeys"].removeForId(t.guid),d.a.openpgpKeyring.store()),i.i(p.a)().reloadOpenPgpKeys()}},e}()},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(6),r=i.n(a),s=i(2),l=i.n(s),c=i(1),u=i(3),d=i(8),p=i(10),h=i(9),f=i(40),m=i(18);i.d(t,"a",function(){return g});var g=function(){function e(){o()(this,e),this.capaAutoLogout=i.i(p.capa)(u.Capa.AutoLogout),this.capaTwoFactor=i.i(p.capa)(u.Capa.TwoFactor),this.autoLogout=f.a.autoLogout,this.autoLogout.trigger=l.a.observable(u.SaveSettingsStep.Idle),this.autoLogoutOptions=l.a.computed(function(){return i.i(d.trigger)(),[{id:0,name:i.i(d.i18n)("SETTINGS_SECURITY/AUTOLOGIN_NEVER_OPTION_NAME")},{id:5,name:i.i(d.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:5})},{id:10,name:i.i(d.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:10})},{id:30,name:i.i(d.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:30})},{id:60,name:i.i(d.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:60})},{id:120,name:i.i(d.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:2})},{id:300,name:i.i(d.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:5})},{id:600,name:i.i(d.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:10})}]})}return e.prototype.configureTwoFactor=function(){i.i(h.showScreenPopup)(i(191))},e.prototype.onBuild=function(){var e=this;this.capaAutoLogout&&r.a.delay(function(){var t=i.i(c.settingsSaveHelperSimpleFunction)(e.autoLogout.trigger,e);e.autoLogout.subscribe(m.a.saveSettingsHelper("AutoLogout",c.pInt,t))})},e}()},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(54),c=i(16),u=i(9);i.d(t,"a",function(){return y});var d,p,h,f,m,g,b,y=(d=i.i(u.command)(function(e){return!e.googleLoggined()&&!e.googleActions()}),p=i.i(u.command)(),h=i.i(u.command)(function(e){return!e.facebookLoggined()&&!e.facebookActions()}),f=i.i(u.command)(),m=i.i(u.command)(function(e){return!e.twitterLoggined()&&!e.twitterActions()}),g=i.i(u.command)(),b=function(){function e(){s()(this,e),this.googleEnable=l.a.google.enabled,this.googleEnableAuth=l.a.google.capa.auth,this.googleEnableAuthFast=l.a.google.capa.authFast,this.googleEnableDrive=l.a.google.capa.drive,this.googleEnablePreview=l.a.google.capa.preview,
this.googleActions=l.a.google.loading,this.googleLoggined=l.a.google.loggined,this.googleUserName=l.a.google.userName,this.facebookEnable=l.a.facebook.enabled,this.facebookActions=l.a.facebook.loading,this.facebookLoggined=l.a.facebook.loggined,this.facebookUserName=l.a.facebook.userName,this.twitterEnable=l.a.twitter.enabled,this.twitterActions=l.a.twitter.loading,this.twitterLoggined=l.a.twitter.loggined,this.twitterUserName=l.a.twitter.userName}return e.prototype.connectGoogleCommand=function(){this.googleLoggined()||i.i(c.a)().googleConnect()},e.prototype.disconnectGoogleCommand=function(){i.i(c.a)().googleDisconnect()},e.prototype.connectFacebookCommand=function(){this.facebookLoggined()||i.i(c.a)().facebookConnect()},e.prototype.disconnectFacebookCommand=function(){i.i(c.a)().facebookDisconnect()},e.prototype.connectTwitterCommand=function(){this.twitterLoggined()||i.i(c.a)().twitterConnect()},e.prototype.disconnectTwitterCommand=function(){i.i(c.a)().twitterDisconnect()},e}(),n(b.prototype,"connectGoogleCommand",[d],a()(b.prototype,"connectGoogleCommand"),b.prototype),n(b.prototype,"disconnectGoogleCommand",[p],a()(b.prototype,"disconnectGoogleCommand"),b.prototype),n(b.prototype,"connectFacebookCommand",[h],a()(b.prototype,"connectFacebookCommand"),b.prototype),n(b.prototype,"disconnectFacebookCommand",[f],a()(b.prototype,"disconnectFacebookCommand"),b.prototype),n(b.prototype,"connectTwitterCommand",[m],a()(b.prototype,"connectTwitterCommand"),b.prototype),n(b.prototype,"disconnectTwitterCommand",[g],a()(b.prototype,"disconnectTwitterCommand"),b.prototype),b)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(2),r=i.n(a),s=i(8),l=i(185),c=i(18),u=i(16),d=i(9);i.d(t,"a",function(){return p});var p=function(){function e(){var t=this;o()(this,e),this.templates=l.a.templates,this.processText=r.a.computed(function(){return l.a.templates.loading()?i.i(s.i18n)("SETTINGS_TEMPLETS/LOADING_PROCESS"):""}),this.visibility=r.a.computed(function(){return""===t.processText()?"hidden":"visible"}),this.templateForDeletion=r.a.observable(null).deleteAccessHelper()}return e.prototype.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},e.prototype.addNewTemplate=function(){i.i(d.showScreenPopup)(i(190))},e.prototype.editTemplate=function(e){e&&i.i(d.showScreenPopup)(i(190),[e])},e.prototype.deleteTemplate=function(e){var t=this;e&&e.deleteAccess()&&(this.templateForDeletion(null),e&&(this.templates.remove(function(t){return e===t}),c.a.templateDelete(function(){t.reloadTemplates()},e.id)))},e.prototype.reloadTemplates=function(){i.i(u.a)().templates()},e.prototype.onBuild=function(e){var t=this;e.on("click",".templates-list .template-item .e-action",function(){var e=r.a.dataFor(this);e&&t.editTemplate(e)}),this.reloadTemplates()},e}()},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(6),r=i.n(a),s=i(12),l=i.n(s),c=i(2),u=i.n(c),d=i(99),p=i.n(d),h=i(3),f=i(1),m=i(14),g=i(8),b=i(10),y=i(57),v=i(18);i.d(t,"a",function(){return S});var S=function(){function e(){var t=this;o()(this,e),this.theme=y.a.theme,this.themes=y.a.themes,this.themesObjects=u.a.observableArray([]),this.background={},this.background.name=y.a.themeBackgroundName,this.background.hash=y.a.themeBackgroundHash,this.background.uploaderButton=u.a.observable(null),this.background.loading=u.a.observable(!1),this.background.error=u.a.observable(""),this.capaUserBackground=u.a.observable(i.i(b.capa)(h.Capa.UserBackground)),this.themeTrigger=u.a.observable(h.SaveSettingsStep.Idle).extend({throttle:h.Magics.Time100ms}),this.iTimer=0,this.oThemeAjaxRequest=null,this.theme.subscribe(function(e){r.a.each(t.themesObjects(),function(t){t.selected(e===t.name)}),i.i(f.changeTheme)(e,t.themeTrigger),v.a.saveSettings(null,{Theme:e})}),this.background.hash.subscribe(function(e){var t=l()("#rl-bg");e?t.attr("style","background-image: none !important;").backstretch(i.i(m.A)(e),{fade:h.Magics.Time1s,centeredX:!0,centeredY:!0}).removeAttr("style"):t.data("backstretch")&&t.backstretch("destroy").attr("style","")})}return e.prototype.onBuild=function(){var e=this.theme();this.themesObjects(r.a.map(this.themes(),function(t){return{name:t,nameDisplay:i.i(f.convertThemeName)(t),selected:u.a.observable(t===e),themePreviewSrc:i.i(m.B)(t)}})),this.initUploader()},e.prototype.onShow=function(){this.background.error("")},e.prototype.clearBackground=function(){var e=this;this.capaUserBackground()&&v.a.clearUserBackground(function(){e.background.name(""),e.background.hash("")})},e.prototype.initUploader=function(){var e=this;if(this.background.uploaderButton()&&this.capaUserBackground()){var t=new p.a({action:i.i(m.C)(),name:"uploader",queueSize:1,multipleSizeLimit:1,disableDragAndDrop:!0,disableMultiple:!0,clickElement:this.background.uploaderButton()});t.on("onStart",function(){return e.background.loading(!0),e.background.error(""),!0}).on("onComplete",function(t,n,o){if(e.background.loading(!1),n&&t&&o&&o.Result&&o.Result.Name&&o.Result.Hash)e.background.name(o.Result.Name),e.background.hash(o.Result.Hash);else{e.background.name(""),e.background.hash("");var a="";if(o.ErrorCode)switch(o.ErrorCode){case h.UploadErrorCode.FileIsTooBig:a=i.i(g.i18n)("SETTINGS_THEMES/ERROR_FILE_IS_TOO_BIG");break;case h.UploadErrorCode.FileType:a=i.i(g.i18n)("SETTINGS_THEMES/ERROR_FILE_TYPE_ERROR")}!a&&o.ErrorMessage&&(a=o.ErrorMessage),e.background.error(a||i.i(g.i18n)("SETTINGS_THEMES/ERROR_UNKNOWN"))}return!0})}},e}()},,,,,function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(2),h=i.n(p),f=i(1),m=i(49),g=i(16),b=i(9),y=i(13);i.d(t,"AddOpenPgpKeyPopupView",function(){return C}),i.d(t,"default",function(){return C});var v,S,w,T,C=(v=i.i(b.popup)({name:"View/Popup/AddOpenPgpKey",templateID:"PopupsAddOpenPgpKey"}),S=i.i(b.command)(),v((T=function(e){function t(){s()(this,t);var i=c()(this,e.call(this));return i.key=h.a.observable(""),i.key.focus=h.a.observable(!1),i.key.error=h.a.observable(!1),i.key.errorMessage=h.a.observable(""),i.key.subscribe(function(){i.key.error(!1),i.key.errorMessage("")}),i}return d()(t,e),t.prototype.addOpenPgpKeyCommand=function(){var e=/[\-]{3,6}BEGIN[\s]PGP[\s](PRIVATE|PUBLIC)[\s]KEY[\s]BLOCK[\-]{3,6}[\s\S]+?[\-]{3,6}END[\s]PGP[\s](PRIVATE|PUBLIC)[\s]KEY[\s]BLOCK[\-]{3,6}/gi,t=m.a.openpgpKeyring,n=i.i(f.trim)(this.key());if(/[\n]/.test(n)&&(n=n.replace(/[\r]+/g,"").replace(/[\n]{2,}/g,"\n\n")),this.key.error(""===n),this.key.errorMessage(""),!t||this.key.error())return!1;var o=null,a=30,r=!1;do if(o=e.exec(n),o&&0<a){if(o[0]&&o[1]&&o[2]&&o[1]===o[2]){var s=null;"PRIVATE"===o[1]?s=t.privateKeys.importKey(o[0]):"PUBLIC"===o[1]&&(s=t.publicKeys.importKey(o[0])),s&&(this.key.error(!0),this.key.errorMessage(s&&s[0]?""+s[0]:""),i.i(f.log)(s))}a-=1,r=!1}else r=!0;while(!r);return t.store(),i.i(g.a)().reloadOpenPgpKeys(),!this.key.error()&&(i.i(f.delegateRun)(this,"cancelCommand"),!0)},t.prototype.clearPopup=function(){this.key(""),this.key.error(!1),this.key.errorMessage("")},t.prototype.onShow=function(){this.clearPopup()},t.prototype.onShowWithDelay=function(){this.key.focus(!0)},t}(y.a),n(T.prototype,"addOpenPgpKeyCommand",[S],a()(T.prototype,"addOpenPgpKeyCommand"),T.prototype),w=T))||w)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(6),h=i.n(p),f=i(2),m=i.n(f),g=i(1),b=i(8),y=i(35),v=i(39),S=i(9),w=i(13);i.d(t,"AdvancedSearchPopupView",function(){return F}),i.d(t,"default",function(){return F});var T,C,E,A,F=(T=i.i(S.popup)({name:"View/Popup/AdvancedSearch",templateID:"PopupsAdvancedSearch"}),C=i.i(S.command)(),T((A=function(e){function t(){s()(this,t);var n=c()(this,e.call(this));return n.fromFocus=m.a.observable(!1),n.from=m.a.observable(""),n.to=m.a.observable(""),n.subject=m.a.observable(""),n.text=m.a.observable(""),n.selectedDateValue=m.a.observable(-1),n.hasAttachment=m.a.observable(!1),n.starred=m.a.observable(!1),n.unseen=m.a.observable(!1),n.selectedDates=m.a.computed(function(){return i.i(b.trigger)(),[{id:-1,name:i.i(b.i18n)("SEARCH/LABEL_ADV_DATE_ALL")},{id:3,name:i.i(b.i18n)("SEARCH/LABEL_ADV_DATE_3_DAYS")},{id:7,name:i.i(b.i18n)("SEARCH/LABEL_ADV_DATE_7_DAYS")},{id:30,name:i.i(b.i18n)("SEARCH/LABEL_ADV_DATE_MONTH")},{id:90,name:i.i(b.i18n)("SEARCH/LABEL_ADV_DATE_3_MONTHS")},{id:180,name:i.i(b.i18n)("SEARCH/LABEL_ADV_DATE_6_MONTHS")},{id:365,name:i.i(b.i18n)("SEARCH/LABEL_ADV_DATE_YEAR")}]}),n}return d()(t,e),t.prototype.searchCommand=function(){var e=this.buildSearchString();""!==e&&v.a.mainMessageListSearch(e),this.cancelCommand()},t.prototype.parseSearchStringValue=function(e){var t=this,i=(e||"").split(/[\s]+/g);h.a.each(i,function(e){switch(e){case"has:attachment":t.hasAttachment(!0);break;case"is:unseen,flagged":t.starred(!0);case"is:unseen":t.unseen(!0)}})},t.prototype.buildSearchStringValue=function(e){return-1<e.indexOf(" ")&&(e='"'+e+'"'),e},t.prototype.buildSearchString=function(){var e=[],t=i.i(g.trim)(this.from()),n=i.i(g.trim)(this.to()),o=i.i(g.trim)(this.subject()),a=i.i(g.trim)(this.text()),r=[],s=[];return t&&""!==t&&e.push("from:"+this.buildSearchStringValue(t)),n&&""!==n&&e.push("to:"+this.buildSearchStringValue(n)),o&&""!==o&&e.push("subject:"+this.buildSearchStringValue(o)),this.hasAttachment()&&s.push("attachment"),this.unseen()&&r.push("unseen"),this.starred()&&r.push("flagged"),0<s.length&&e.push("has:"+s.join(",")),0<r.length&&e.push("is:"+r.join(",")),-1<this.selectedDateValue()&&e.push("date:"+i.i(y.searchSubtractFormatDateHelper)(this.selectedDateValue())+"/"),a&&""!==a&&e.push("text:"+this.buildSearchStringValue(a)),i.i(g.trim)(e.join(" "))},t.prototype.clearPopup=function(){this.from(""),this.to(""),this.subject(""),this.text(""),this.selectedDateValue(-1),this.hasAttachment(!1),this.starred(!1),this.unseen(!1),this.fromFocus(!0)},t.prototype.onShow=function(e){this.clearPopup(),this.parseSearchStringValue(e)},t.prototype.onShowWithDelay=function(){this.fromFocus(!0)},t}(w.a),n(A.prototype,"searchCommand",[C],a()(A.prototype,"searchCommand"),A.prototype),E=A))||E)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(6),h=i.n(p),f=i(12),m=i.n(f),g=i(2),b=i.n(g),y=i(19),v=i.n(y),S=i(1),w=i(3),T=i(8),C=i(49),E=i(38),A=i(9),F=i(13);i.d(t,"ComposeOpenPgpPopupView",function(){return k}),i.d(t,"default",function(){return k});var N,R,I,L,_,P,D,M=-8,k=(N=i.i(A.popup)({name:"View/Popup/ComposeOpenPgp",templateID:"PopupsComposeOpenPgp"}),R=i.i(A.command)(function(e){return!e.submitRequest()&&(e.sign()||e.encrypt())}),I=i.i(A.command)(),L=i.i(A.command)(),_=i.i(A.command)(),N((D=function(e){function t(){s()(this,t);var n=c()(this,e.call(this));return n.publicKeysOptionsCaption=i.i(T.i18n)("PGP_NOTIFICATIONS/ADD_A_PUBLICK_KEY"),n.privateKeysOptionsCaption=i.i(T.i18n)("PGP_NOTIFICATIONS/SELECT_A_PRIVATE_KEY"),n.notification=b.a.observable(""),n.sign=b.a.observable(!1),n.encrypt=b.a.observable(!1),n.password=b.a.observable(""),n.password.focus=b.a.observable(!1),n.buttonFocus=b.a.observable(!1),n.text=b.a.observable(""),n.selectedPrivateKey=b.a.observable(null),n.selectedPublicKey=b.a.observable(null),n.signKey=b.a.observable(null),n.encryptKeys=b.a.observableArray([]),n.encryptKeysView=b.a.computed(function(){return h.a.compact(h.a.map(n.encryptKeys(),function(e){return e?e.key:null}))}),n.privateKeysOptions=b.a.computed(function(){var e=h.a.map(C.a.openpgpkeysPrivate(),function(e,t){return n.signKey()&&n.signKey().key.id===e.id?null:h.a.map(e.users,function(i){return{id:e.guid,name:"("+e.id.substr(M).toUpperCase()+") "+i,key:e,class:t%2?"odd":"even"}})});return h.a.compact(h.a.flatten(e,!0))}),n.publicKeysOptions=b.a.computed(function(){var e=h.a.map(C.a.openpgpkeysPublic(),function(e,t){return-1<i.i(S.inArray)(e,n.encryptKeysView())?null:h.a.map(e.users,function(i){return{id:e.guid,name:"("+e.id.substr(M).toUpperCase()+") "+i,key:e,class:t%2?"odd":"even"}})});return h.a.compact(h.a.flatten(e,!0))}),n.submitRequest=b.a.observable(!1),n.resultCallback=null,n.selectedPrivateKey.subscribe(function(e){e&&(n.selectCommand(),n.updateCommand())}),n.selectedPublicKey.subscribe(function(e){e&&n.addCommand()}),n.sDefaultKeyScope=w.KeyState.PopupComposeOpenPGP,n.defautOptionsAfterRender=S.defautOptionsAfterRender,n.addOptionClass=function(e,t){n.defautOptionsAfterRender(e,t),t&&!i.i(S.isUnd)(t.class)&&e&&m()(e).addClass(t.class)},n.deletePublickKey=h.a.bind(n.deletePublickKey,n),n}return d()(t,e),t.prototype.doCommand=function(){var e=this,t=!0,n=null,o=[];if(this.submitRequest(!0),t&&this.sign()&&(this.signKey()?this.signKey().key||(this.notification(i.i(T.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND_FOR",{EMAIL:this.signKey().email})),t=!1):(this.notification(i.i(T.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND")),t=!1),t)){var a=this.signKey().key.getNativeKeys();n=a[0]||null;try{n&&n.decrypt(i.i(S.pString)(this.password()))}catch(e){n=null}n||(this.notification(i.i(T.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND")),t=!1)}return t&&this.encrypt()&&(0===this.encryptKeys().length?(this.notification(i.i(T.i18n)("PGP_NOTIFICATIONS/NO_PUBLIC_KEYS_FOUND")),t=!1):this.encryptKeys()&&(o=[],h.a.each(this.encryptKeys(),function(n){n&&n.key?o=o.concat(h.a.compact(h.a.flatten(n.key.getNativeKeys()))):n&&n.email&&(e.notification(i.i(T.i18n)("PGP_NOTIFICATIONS/NO_PUBLIC_KEYS_FOUND_FOR",{EMAIL:n.email})),t=!1)}),!t||0!==o.length&&this.encryptKeys().length===o.length||(t=!1))),t&&this.resultCallback?h.a.delay(function(){var t=null;try{n&&0===o.length?t=C.a.openpgp.sign({data:e.text(),privateKeys:[n]}):n&&0<o.length?t=C.a.openpgp.encrypt({data:e.text(),publicKeys:o,privateKeys:[n]}):!n&&0<o.length&&(t=C.a.openpgp.encrypt({data:e.text(),publicKeys:o}))}catch(t){i.i(S.log)(t),e.notification(i.i(T.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+t}))}if(t)try{t.then(function(t){e.resultCallback(t.data),e.cancelCommand()}).catch(function(t){e.notification(i.i(T.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+t}))})}catch(t){e.notification(i.i(T.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+t}))}e.submitRequest(!1)},w.Magics.Time20ms):this.submitRequest(!1),t},t.prototype.selectCommand=function(){var e=this.selectedPrivateKey(),t=e?h.a.find(this.privateKeysOptions(),function(t){return t&&e===t.id}):null;t&&this.signKey({empty:!t.key,selected:b.a.observable(!!t.key),users:t.key.users,hash:t.key.id.substr(M).toUpperCase(),key:t.key})},t.prototype.addCommand=function(){var e=this.selectedPublicKey(),t=this.encryptKeys(),i=e?h.a.find(this.publicKeysOptions(),function(t){return t&&e===t.id}):null;i&&(t.push({empty:!i.key,selected:b.a.observable(!!i.key),removable:b.a.observable(!this.sign()||!this.signKey()||this.signKey().key.id!==i.key.id),users:i.key.users,hash:i.key.id.substr(M).toUpperCase(),key:i.key}),this.encryptKeys(t))},t.prototype.updateCommand=function(){var e=this;h.a.each(this.encryptKeys(),function(t){t.removable(!e.sign()||!e.signKey()||e.signKey().key.id!==t.key.id)})},t.prototype.deletePublickKey=function(e){this.encryptKeys.remove(e)},t.prototype.clearPopup=function(){this.notification(""),this.sign(!1),this.encrypt(!1),this.password(""),this.password.focus(!1),this.buttonFocus(!1),this.signKey(null),this.encryptKeys([]),this.text(""),this.resultCallback=null},t.prototype.onBuild=function(){var e=this;v()("tab,shift+tab",w.KeyState.PopupComposeOpenPGP,function(){switch(!0){case e.password.focus():e.buttonFocus(!0);break;case e.buttonFocus():e.password.focus(!0)}return!1})},t.prototype.onHideWithDelay=function(){this.clearPopup()},t.prototype.onShowWithDelay=function(){this.sign()?this.password.focus(!0):this.buttonFocus(!0)},t.prototype.onShow=function(e,t,n,o,a,r){var s=this;this.clearPopup();var l=[],c="",u=new E.EmailModel;if(this.resultCallback=e,""!==o&&l.push(o),""!==a&&l.push(a),""!==r&&l.push(r),l=l.join(", ").split(","),l=h.a.compact(h.a.map(l,function(e){return u.clear(),u.mailsoParse(i.i(S.trim)(e)),""!==u.email&&u.email})),n&&n.email()){c=n.email(),l.unshift(c);var d=C.a.findAllPrivateKeysByEmailNotNative(c);d&&d[0]&&this.signKey({users:d[0].users||[c],hash:d[0].id.substr(M).toUpperCase(),key:d[0]})}this.signKey()&&this.sign(!0),l&&0<l.length&&(this.encryptKeys(h.a.uniq(h.a.compact(h.a.flatten(h.a.map(l,function(e){var t=C.a.findAllPublicKeysByEmailNotNative(e);return t?h.a.map(t,function(t){return{empty:!t,selected:b.a.observable(!!t),removable:b.a.observable(!s.sign()||!s.signKey()||s.signKey().key.id!==t.id),users:t?t.users||[e]:[e],hash:t?t.id.substr(M).toUpperCase():"",key:t}}):[]}),!0)),function(e){return e.hash})),0<this.encryptKeys().length&&this.encrypt(!0)),this.text(t)},t}(F.a),n(D.prototype,"doCommand",[R],a()(D.prototype,"doCommand"),D.prototype),n(D.prototype,"selectCommand",[I],a()(D.prototype,"selectCommand"),D.prototype),n(D.prototype,"addCommand",[L],a()(D.prototype,"addCommand"),D.prototype),n(D.prototype,"updateCommand",[_],a()(D.prototype,"updateCommand"),D.prototype),P=D))||P)},,function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(2),h=i.n(p),f=i(3),m=i(8),g=i(23),b=i(39),y=i(18),v=i(16),S=i(9),w=i(13);i.d(t,"FolderClearPopupView",function(){return F}),i.d(t,"default",function(){return F});var T,C,E,A,F=(T=i.i(S.popup)({name:"View/Popup/FolderClear",templateID:"PopupsFolderClear"}),C=i.i(S.command)(function(e){var t=e.selectedFolder(),i=e.clearingProcess();return!i&&null!==t}),T((A=function(e){function t(){s()(this,t);var n=c()(this,e.call(this));return n.selectedFolder=h.a.observable(null),n.clearingProcess=h.a.observable(!1),n.clearingError=h.a.observable(""),n.folderFullNameForClear=h.a.computed(function(){var e=n.selectedFolder();return e?e.printableFullName():""}),n.folderNameForClear=h.a.computed(function(){var e=n.selectedFolder();return e?e.localName():""}),n.dangerDescHtml=h.a.computed(function(){return i.i(m.i18n)("POPUPS_CLEAR_FOLDER/DANGER_DESC_HTML_1",{FOLDER:n.folderNameForClear()})}),n}return d()(t,e),t.prototype.clearCommand=function(){var e=this,t=this.selectedFolder();t&&(b.a.message(null),b.a.messageList([]),this.clearingProcess(!0),t.messageCountAll(0),t.messageCountUnread(0),i.i(g.h)(t.fullNameRaw,""),y.a.folderClear(function(t,n){e.clearingProcess(!1),f.StorageResultType.Success===t&&n&&n.Result?(i.i(v.a)().reloadMessageList(!0),e.cancelCommand()):n&&n.ErrorCode?e.clearingError(i.i(m.getNotification)(n.ErrorCode)):e.clearingError(i.i(m.getNotification)(f.Notification.MailServerError))},t.fullNameRaw))},t.prototype.clearPopup=function(){this.clearingProcess(!1),this.selectedFolder(null)},t.prototype.onShow=function(e){this.clearPopup(),e&&this.selectedFolder(e)},t}(w.a),n(A.prototype,"clearCommand",[C],a()(A.prototype,"clearCommand"),A.prototype),E=A))||E)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(6),h=i.n(p),f=i(2),m=i.n(f),g=i(19),b=i.n(g),y=i(12),v=i.n(y),S=i(1),w=i(3),T=i(9),C=i(13);i.d(t,"MessageOpenPgpPopupView",function(){return R}),i.d(t,"default",function(){return R});var E,A,F,N,R=(E=i.i(T.popup)({name:"View/Popup/MessageOpenPgp",templateID:"PopupsMessageOpenPgp"}),A=i.i(T.command)(function(e){return!e.submitRequest()}),E((N=function(e){function t(){s()(this,t);var i=c()(this,e.call(this));return i.notification=m.a.observable(""),i.selectedKey=m.a.observable(null),i.privateKeys=m.a.observableArray([]),i.password=m.a.observable(""),i.password.focus=m.a.observable(!1),i.buttonFocus=m.a.observable(!1),i.resultCallback=null,i.submitRequest=m.a.observable(!1),i.sDefaultKeyScope=w.KeyState.PopupMessageOpenPGP,i}return d()(t,e),t.prototype.doCommand=function(){var e=this;this.submitRequest(!0),h.a.delay(function(){var t=null;try{if(e.resultCallback&&e.selectedKey()){var n=e.selectedKey().getNativeKeys();if(t=n&&n[0]?n[0]:null)try{t.decrypt(i.i(S.pString)(e.password()))||(i.i(S.log)("Error: Private key cannot be decrypted"),t=null)}catch(e){i.i(S.log)(e),t=null}else i.i(S.log)("Error: Private key cannot be found")}}catch(e){i.i(S.log)(e),t=null}e.submitRequest(!1),e.cancelCommand(),e.resultCallback(t)},w.Magics.Time100ms)},t.prototype.clearPopup=function(){this.notification(""),this.password(""),this.password.focus(!1),this.buttonFocus(!1),this.selectedKey(!1),this.submitRequest(!1),this.resultCallback=null,this.privateKeys([])},t.prototype.onBuild=function(e){var t=this;b()("tab,shift+tab",w.KeyState.PopupMessageOpenPGP,function(){switch(!0){case t.password.focus():t.buttonFocus(!0);break;case t.buttonFocus():t.password.focus(!0)}return!1});var i=this;e.on("click",".key-list__item",function(){e.find(".key-list__item .key-list__item__radio").addClass("icon-radio-unchecked").removeClass("icon-radio-checked"),v()(this).find(".key-list__item__radio").removeClass("icon-radio-unchecked").addClass("icon-radio-checked"),i.selectedKey(m.a.dataFor(this)),i.password.focus(!0)})},t.prototype.onHideWithDelay=function(){this.clearPopup()},t.prototype.onShowWithDelay=function(){this.password.focus(!0)},t.prototype.onShow=function(e,t){this.clearPopup(),this.resultCallback=e,this.privateKeys(t),this.viewModelDom&&this.viewModelDom.find(".key-list__item").first().click()},t}(C.a),n(N.prototype,"doCommand",[A],a()(N.prototype,"doCommand"),N.prototype),F=N))||F)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(6),h=i.n(p),f=i(2),m=i.n(f),g=i(3),b=i(1),y=i(49),v=i(16),S=i(9),w=i(13);i.d(t,"NewOpenPgpKeyPopupView",function(){return F}),i.d(t,"default",function(){return F});var T,C,E,A,F=(T=i.i(S.popup)({name:"View/Popup/NewOpenPgpKey",templateID:"PopupsNewOpenPgpKey"}),C=i.i(S.command)(),T((A=function(e){function t(){s()(this,t);var i=c()(this,e.call(this));return i.email=m.a.observable(""),i.email.focus=m.a.observable(""),i.email.error=m.a.observable(!1),i.name=m.a.observable(""),i.password=m.a.observable(""),i.keyBitLength=m.a.observable(g.Magics.BitLength2048),i.submitRequest=m.a.observable(!1),i.submitError=m.a.observable(""),i.email.subscribe(function(){i.email.error(!1)}),i}return d()(t,e),t.prototype.generateOpenPgpKeyCommand=function(){var e=this,t={},n=y.a.openpgpKeyring;return this.email.error(""===i.i(b.trim)(this.email())),!(!n||this.email.error())&&(t.email=this.email(),""!==this.name()&&(t.name=this.name()),this.submitRequest(!0),this.submitError(""),h.a.delay(function(){try{y.a.openpgp.generateKey({userIds:[t],numBits:i.i(b.pInt)(e.keyBitLength()),passphrase:i.i(b.trim)(e.password())}).then(function(t){e.submitRequest(!1),t&&t.privateKeyArmored&&(n.privateKeys.importKey(t.privateKeyArmored),n.publicKeys.importKey(t.publicKeyArmored),n.store(),i.i(v.a)().reloadOpenPgpKeys(),i.i(b.delegateRun)(e,"cancelCommand"))}).catch(function(t){e.submitRequest(!1),e.showError(t)})}catch(t){e.submitRequest(!1),e.showError(t)}},g.Magics.Time100ms),!0)},t.prototype.showError=function(e){i.i(b.log)(e),e&&e.message&&this.submitError(e.message)},t.prototype.clearPopup=function(){this.name(""),this.password(""),this.email(""),this.email.error(!1),this.keyBitLength(g.Magics.BitLength2048),this.submitError("")},t.prototype.onShow=function(){this.clearPopup()},t.prototype.onShowWithDelay=function(){this.email.focus(!0)},t}(w.a),n(A.prototype,"generateOpenPgpKeyCommand",[C],a()(A.prototype,"generateOpenPgpKeyCommand"),A.prototype),E=A))||E)},,function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(2),h=i.n(p),f=i(3),m=i(7),g=i(18),b=i(9),y=i(13);i.d(t,"TwoFactorTestPopupView",function(){return C}),i.d(t,"default",function(){return C});var v,S,w,T,C=(v=i.i(b.popup)({name:"View/Popup/TwoFactorTest",templateID:"PopupsTwoFactorTest"}),S=i.i(b.command)(function(e){return""!==e.code()&&!e.testing()}),v((T=function(e){function t(){s()(this,t);var i=c()(this,e.call(this));return i.code=h.a.observable(""),i.code.focused=h.a.observable(!1),i.code.status=h.a.observable(null),i.koTestedTrigger=null,i.testing=h.a.observable(!1),i}return d()(t,e),t.prototype.testCodeCommand=function(){var e=this;this.testing(!0),g.a.testTwoFactor(function(t,i){e.testing(!1),e.code.status(f.StorageResultType.Success===t&&i&&!!i.Result),e.koTestedTrigger&&e.code.status()&&e.koTestedTrigger(!0)},this.code())},t.prototype.clearPopup=function(){this.code(""),this.code.focused(!1),this.code.status(null),this.testing(!1),this.koTestedTrigger=null},t.prototype.onShow=function(e){this.clearPopup(),this.koTestedTrigger=e},t.prototype.onShowWithDelay=function(){m.bMobileDevice||this.code.focused(!0)},t}(y.a),n(T.prototype,"testCodeCommand",[S],a()(T.prototype,"testCodeCommand"),T.prototype),w=T))||w)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(19),p=i.n(d),h=i(3),f=i(1),m=i(9),g=i(13);i.d(t,"ViewOpenPgpKeyPopupView",function(){return v}),i.d(t,"default",function(){return v});var b,y,v=(b=i.i(m.popup)({name:"View/Popup/ViewOpenPgpKey",templateID:"PopupsViewOpenPgpKey"}),b(y=function(e){function t(){o()(this,t);var i=r()(this,e.call(this));return i.key=u.a.observable(""),i.keyDom=u.a.observable(null),i.sDefaultKeyScope=h.KeyState.PopupViewOpenPGP,i}return l()(t,e),t.prototype.clearPopup=function(){this.key("")},t.prototype.selectKey=function(){var e=this.keyDom();e&&i.i(f.selectElement)(e)},t.prototype.onShow=function(e){this.clearPopup(),e&&this.key(e.armor)},t.prototype.onBuild=function(){var e=this;p()("ctrl+a, command+a",h.KeyState.PopupViewOpenPGP,function(){return e.selectKey(),!1})},t}(g.a))||y)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(2),u=i.n(c),d=i(78),p=i(9),h=i(13);i.d(t,"WelcomePagePopupView",function(){return g}),i.d(t,"default",function(){return g});var f,m,g=(f=i.i(p.popup)({name:"View/Popup/WelcomePage",templateID:"PopupsWelcomePage"}),f(m=function(e){function t(){o()(this,t);var i=r()(this,e.call(this));return i.welcomePageURL=u.a.observable(""),i.closeFocused=u.a.observable(!1),i}return l()(t,e),t.prototype.clearPopup=function(){this.welcomePageURL(""),this.closeFocused(!1)},t.prototype.onShow=function(e){this.clearPopup(),this.welcomePageURL(e)},t.prototype.onShowWithDelay=function(){this.closeFocused(!0)},t.prototype.onHide=function(){d.a.welcomeClose()},t}(h.a))||m)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(11),h=i.n(p),f=i(12),m=i.n(f),g=i(6),b=i.n(g),y=i(2),v=i.n(y),S=i(3),w=i(1),T=i(7),C=i(14),E=i(8),A=i(27),F=i(28),N=i(53),R=i(10),I=i(79),L=i(18),_=i(16),P=i(9),D=i(13);i.d(t,"a",function(){return K});var M,k,O,x,U,H,B,G,K=(M=i.i(P.view)({name:["View/App/Login","View/User/Login"],type:P.ViewType.Center,templateID:"Login"}),k=i.i(P.command)(function(e){return!e.submitRequest()&&e.facebookLoginEnabled()}),O=i.i(P.command)(function(e){return!e.submitRequest()&&e.googleLoginEnabled()}),x=i.i(P.command)(function(e){return!e.submitRequest()&&e.googleFastLoginEnabled()}),U=i.i(P.command)(function(e){return!e.submitRequest()&&e.twitterLoginEnabled()}),H=i.i(P.command)(function(e){return!e.submitRequest()}),M((G=function(e){function t(){s()(this,t);var n=c()(this,e.call(this));return n.hideSubmitButton=!!R.appSettingsGet("hideSubmitButton"),n.welcome=v.a.observable(!!R.settingsGet("UseLoginWelcomePage")),n.email=v.a.observable(""),n.password=v.a.observable(""),n.signMe=v.a.observable(!1),n.additionalCode=v.a.observable(""),n.additionalCode.error=v.a.observable(!1),n.additionalCode.errorAnimation=v.a.observable(!1).extend({falseTimeout:500}),n.additionalCode.focused=v.a.observable(!1),n.additionalCode.visibility=v.a.observable(!1),n.additionalCodeSignMe=v.a.observable(!1),n.logoImg=i.i(w.trim)(R.settingsGet("LoginLogo")),n.loginPowered=!!R.settingsGet("LoginPowered"),n.loginDescription=i.i(w.trim)(R.settingsGet("LoginDescription")),n.mobile=!!R.appSettingsGet("mobile"),n.mobileDevice=!!R.appSettingsGet("mobileDevice"),n.forgotPasswordLinkUrl=R.appSettingsGet("forgotPasswordLinkUrl"),n.registrationLinkUrl=R.appSettingsGet("registrationLinkUrl"),n.emailError=v.a.observable(!1),n.passwordError=v.a.observable(!1),n.emailErrorAnimation=v.a.observable(!1).extend({falseTimeout:500}),n.passwordErrorAnimation=v.a.observable(!1).extend({falseTimeout:500}),n.formHidden=v.a.observable(!1),n.formError=v.a.computed(function(){return n.emailErrorAnimation()||n.passwordErrorAnimation()||n.additionalCode.visibility()&&n.additionalCode.errorAnimation()}),n.emailFocus=v.a.observable(!1),n.passwordFocus=v.a.observable(!1),n.email.subscribe(function(){n.emailError(!1),n.additionalCode(""),n.additionalCode.visibility(!1)}),n.password.subscribe(function(){n.passwordError(!1)}),n.additionalCode.subscribe(function(){
n.additionalCode.error(!1)}),n.additionalCode.visibility.subscribe(function(){n.additionalCode.error(!1)}),n.emailError.subscribe(function(e){n.emailErrorAnimation(!!e)}),n.passwordError.subscribe(function(e){n.passwordErrorAnimation(!!e)}),n.additionalCode.error.subscribe(function(e){n.additionalCode.errorAnimation(!!e)}),n.submitRequest=v.a.observable(!1),n.submitError=v.a.observable(""),n.submitErrorAddidional=v.a.observable(""),n.submitError.subscribe(function(e){""===e&&n.submitErrorAddidional("")}),n.allowLanguagesOnLogin=F.a.allowLanguagesOnLogin,n.langRequest=v.a.observable(!1),n.language=N.a.language,n.languages=N.a.languages,n.bSendLanguage=!1,n.languageFullName=v.a.computed(function(){return i.i(w.convertLangName)(n.language())}),n.signMeType=v.a.observable(S.LoginSignMeType.Unused),n.signMeType.subscribe(function(e){n.signMe(S.LoginSignMeType.DefaultOn===e)}),n.signMeVisibility=v.a.computed(function(){return S.LoginSignMeType.Unused!==n.signMeType()}),n.facebookLoginEnabled=v.a.observable(!1),n.googleLoginEnabled=v.a.observable(!1),n.googleFastLoginEnabled=v.a.observable(!1),n.twitterLoginEnabled=v.a.observable(!1),n.socialLoginEnabled=v.a.computed(function(){var e=n.facebookLoginEnabled(),t=n.googleLoginEnabled(),i=n.twitterLoginEnabled();return e||t||i}),R.settingsGet("AdditionalLoginError")&&!n.submitError()&&n.submitError(R.settingsGet("AdditionalLoginError")),n}return d()(t,e),t.prototype.windowOpenFeatures=function(e){return"left=200,top=100,width="+e+",height="+e+",menubar=no,status=no,resizable=yes,scrollbars=yes"},t.prototype.facebookCommand=function(){return h.a.open(i.i(C.n)(),"Facebook",this.windowOpenFeatures(500)),!0},t.prototype.googleCommand=function(){return h.a.open(i.i(C.o)(),"Google",this.windowOpenFeatures(550)),!0},t.prototype.googleFastCommand=function(){return h.a.open(i.i(C.o)(!0),"Google",this.windowOpenFeatures(550)),!0},t.prototype.twitterCommand=function(){return h.a.open(i.i(C.p)(),"Twitter",this.windowOpenFeatures(500)),!0},t.prototype.submitCommand=function(){var e=this;if(i.i(w.triggerAutocompleteInputChange)(),this.emailError(!1),this.passwordError(!1),this.emailError(""===i.i(w.trim)(this.email())),this.passwordError(""===i.i(w.trim)(this.password())),this.additionalCode.visibility()&&(this.additionalCode.error(!1),this.additionalCode.error(""===i.i(w.trim)(this.additionalCode()))),this.emailError()||this.passwordError()||this.additionalCode.visibility()&&this.additionalCode.error()){switch(!0){case this.emailError():this.emailFocus(!0);break;case this.passwordError():this.passwordFocus(!0);break;case this.additionalCode.visibility()&&this.additionalCode.error():this.additionalCode.focused(!0)}return!1}var t=0,n="",o=function(e,i){t=e||0,n=i||""};if(A.a("user-login-submit",[o]),0<t)return this.submitError(i.i(E.getNotification)(t)),!1;if(""!==n)return this.submitError(n),!1;this.submitRequest(!0),T.$win.trigger("rl.tooltips.diactivate");var a=function(t){L.a.login(function(t,n){T.$win.trigger("rl.tooltips.diactivate"),T.$win.trigger("rl.tooltips.activate"),S.StorageResultType.Success===t&&n&&"Login"===n.Action?n.Result?n.TwoFactorAuth?(e.additionalCode(""),e.additionalCode.visibility(!0),e.submitRequest(!1),b.a.delay(function(){return e.additionalCode.focused(!0)},S.Magics.Time100ms)):n.Admin?i.i(_.a)().redirectToAdminPanel():i.i(_.a)().loginAndLogoutReload(!1):n.ErrorCode?(e.submitRequest(!1),-1<i.i(w.inArray)(n.ErrorCode,[S.Notification.InvalidInputArgument])&&(n.ErrorCode=S.Notification.AuthError),e.submitError(i.i(E.getNotificationFromResponse)(n)),""===e.submitError()?e.submitError(i.i(E.getNotification)(S.Notification.UnknownError)):n.ErrorMessageAdditional&&e.submitErrorAddidional(n.ErrorMessageAdditional)):e.submitRequest(!1):(e.submitRequest(!1),e.submitError(i.i(E.getNotification)(S.Notification.UnknownError)))},e.email(),"",t,!!e.signMe(),e.bSendLanguage?e.language():"",e.additionalCode.visibility()?e.additionalCode():"",!!e.additionalCode.visibility()&&!!e.additionalCodeSignMe()),I.b(S.ClientSideKeyName.LastSignMe,e.signMe()?"-1-":"-0-")};return a(this.password()),!0},t.prototype.displayMainForm=function(){this.welcome(!1)},t.prototype.onShow=function(){i.i(P.routeOff)()},t.prototype.onShowWithDelay=function(){""!==this.email()&&""!==this.password()?this.passwordFocus(!0):""===this.email()?this.emailFocus(!0):""===this.password()?this.passwordFocus(!0):this.emailFocus(!0)},t.prototype.onHide=function(){this.emailFocus(!1),this.passwordFocus(!1)},t.prototype.onBuild=function(){var e=this,t=I.a(S.ClientSideKeyName.LastSignMe),n=(R.settingsGet("SignMe")||"unused").toLowerCase(),o=R.appSettingsGet("jsHash"),a=function(t){t=i.i(w.pInt)(t),0===t?(e.submitRequest(!0),i.i(_.a)().loginAndLogoutReload(!1)):e.submitError(i.i(E.getNotification)(t))};switch(this.facebookLoginEnabled(!!R.settingsGet("AllowFacebookSocial")),this.twitterLoginEnabled(!!R.settingsGet("AllowTwitterSocial")),this.googleLoginEnabled(!!R.settingsGet("AllowGoogleSocial")&&!!R.settingsGet("AllowGoogleSocialAuth")),this.googleFastLoginEnabled(!!R.settingsGet("AllowGoogleSocial")&&!!R.settingsGet("AllowGoogleSocialAuthFast")),n){case S.LoginSignMeTypeAsString.DefaultOff:case S.LoginSignMeTypeAsString.DefaultOn:switch(this.signMeType(S.LoginSignMeTypeAsString.DefaultOn===n?S.LoginSignMeType.DefaultOn:S.LoginSignMeType.DefaultOff),t){case"-1-":this.signMeType(S.LoginSignMeType.DefaultOn);break;case"-0-":this.signMeType(S.LoginSignMeType.DefaultOff)}break;case S.LoginSignMeTypeAsString.Unused:default:this.signMeType(S.LoginSignMeType.Unused)}this.email(F.a.devEmail),this.password(F.a.devPassword),(this.googleLoginEnabled()||this.googleFastLoginEnabled())&&(h.a["rl_"+o+"_google_login_service"]=a),this.facebookLoginEnabled()&&(h.a["rl_"+o+"_facebook_login_service"]=a),this.twitterLoginEnabled()&&(h.a["rl_"+o+"_twitter_login_service"]=a),b.a.delay(function(){N.a.language.subscribe(function(t){e.langRequest(!0),i.i(E.reload)(!1,t).then(function(){e.langRequest(!1),e.bSendLanguage=!0},function(){e.langRequest(!1)})})},S.Magics.Time50ms),i.i(w.triggerAutocompleteInputChange)(!0),R.appSettingsGet("activeBackgroud")&&this.initActiveBackgroud()},t.prototype.submitForm=function(){this.submitCommand()},t.prototype.selectLanguage=function(){i.i(P.showScreenPopup)(i(80),[this.language,this.languages(),N.a.userLanguage()])},t.prototype.selectLanguageOnTab=function(e){var t=this;return!!e||(b.a.delay(function(){t.emailFocus(!0)},S.Magics.Time50ms),!1)},t.prototype.initActiveBackgroud=function(){var e=m()("#rl-bg"),t=25,i=T.$win.height(),n=T.$win.width(),o=t/i,a=t/n,r=i/2,s=n/2;e.addClass("animated"),m()("#rl-app").on("mousemove",b.a.throttle(function(i){e.css({top:o*(i.pageY-r)*-1-t,left:a*(i.pageX-s)*-1-t})},1))},t}(D.a),n(G.prototype,"facebookCommand",[k],a()(G.prototype,"facebookCommand"),G.prototype),n(G.prototype,"googleCommand",[O],a()(G.prototype,"googleCommand"),G.prototype),n(G.prototype,"googleFastCommand",[x],a()(G.prototype,"googleFastCommand"),G.prototype),n(G.prototype,"twitterCommand",[U],a()(G.prototype,"twitterCommand"),G.prototype),n(G.prototype,"submitCommand",[H],a()(G.prototype,"submitCommand"),G.prototype),B=G))||B)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(11),u=i.n(c),d=i(12),p=i.n(d),h=i(2),f=i.n(h),m=i(19),g=i.n(m),b=i(1),y=i(3),v=i(7),S=i(14),w=i(23),T=i(28),C=i(40),E=i(30),A=i(39),F=i(10),N=i(16),R=i(9),I=i(13);i.d(t,"a",function(){return P});var L,_,P=(L=i.i(R.view)({name:"View/User/MailBox/FolderList",type:R.ViewType.Left,templateID:"MailFolderList"}),L(_=function(e){function t(){o()(this,t);var n=r()(this,e.call(this));return n.oContentVisible=null,n.oContentScrollable=null,n.composeInEdit=T.a.composeInEdit,n.messageList=A.a.messageList,n.folderList=E.a.folderList,n.folderListSystem=E.a.folderListSystem,n.foldersChanging=E.a.foldersChanging,n.moveAction=v.moveAction,n.foldersListWithSingleInboxRootFolder=E.a.foldersListWithSingleInboxRootFolder,n.leftPanelDisabled=v.leftPanelDisabled,n.iDropOverTimer=0,n.allowComposer=!!F.capa(y.Capa.Composer),n.allowContacts=!!T.a.contactsIsAllowed(),n.allowFolders=!!F.capa(y.Capa.Folders),n.folderListFocused=f.a.computed(function(){return y.Focused.FolderList===T.a.focusedState()}),n.isInboxStarred=f.a.computed(function(){return E.a.currentFolder()&&E.a.currentFolder().isInbox()&&-1<i.i(b.trim)(A.a.messageListSearch()).indexOf("is:flagged")}),n}return l()(t,e),t.prototype.onBuild=function(e){this.oContentVisible=p()(".b-content",e),this.oContentScrollable=p()(".content",this.oContentVisible);var t=this,n=F.appSettingsGet("mobile"),o=function(e,t,o){var a=i.i(v.moveAction)();n&&i.i(v.leftPanelDisabled)(!0),t.preventDefault(),o&&t.stopPropagation();var r=f.a.dataFor(e);r&&(a?(i.i(v.moveAction)(!1),i.i(N.a)().moveMessagesToFolder(E.a.currentFolderFullNameRaw(),A.a.messageListCheckedOrSelectedUidsWithSubMails(),r.fullNameRaw,!1)):(y.Layout.NoPreview===C.a.layout()&&A.a.message(null),r.fullNameRaw===E.a.currentFolderFullNameRaw()&&i.i(w.h)(r.fullNameRaw,""),o?i.i(R.setHash)(i.i(S.r)(r.fullNameHash,1,"is:flagged")):i.i(R.setHash)(i.i(S.r)(r.fullNameHash))),T.a.focusedState(y.Focused.MessageList))};e.on("click",".b-folders .e-item .e-link .e-collapsed-sign",function(e){var t=f.a.dataFor(this);if(t&&e){var n=t.collapsed();i.i(N.a)().setExpandedFolder(t.fullNameHash,n),t.collapsed(!n),e.preventDefault(),e.stopPropagation()}}).on("click",".b-folders .e-item .e-link.selectable .inbox-star-icon",function(e){o(this,e,!t.isInboxStarred())}).on("click",".b-folders .e-item .e-link.selectable",function(e){o(this,e,!1)}),g()("up, down",y.KeyState.FolderList,function(i,n){var o=n&&"up"===n.shortcut?y.EventKeyCode.Up:y.EventKeyCode.Down,a=p()(".b-folders .e-item .e-link:not(.hidden):visible",e);if(i&&a.length){var r=a.index(a.filter(".focused"));-1<r&&a.eq(r).removeClass("focused"),y.EventKeyCode.Up===o&&0<r?r-=1:y.EventKeyCode.Down===o&&r<a.length-1&&(r+=1),a.eq(r).addClass("focused"),t.scrollToFocused()}return!1}),g()("enter",y.KeyState.FolderList,function(){var t=p()(".b-folders .e-item .e-link:not(.hidden).focused",e);return t.length&&t[0]&&(T.a.focusedState(y.Focused.MessageList),t.click()),!1}),g()("space",y.KeyState.FolderList,function(){var t=p()(".b-folders .e-item .e-link:not(.hidden).focused",e);if(t.length&&t[0]){var n=f.a.dataFor(t[0]);if(n){var o=n.collapsed();i.i(N.a)().setExpandedFolder(n.fullNameHash,o),n.collapsed(!o)}}return!1}),g()("esc, tab, shift+tab, right",y.KeyState.FolderList,function(){return T.a.focusedState(y.Focused.MessageList),i.i(v.moveAction)(!1),!1}),T.a.focusedState.subscribe(function(t){p()(".b-folders .e-item .e-link.focused",e).removeClass("focused"),y.Focused.FolderList===t&&p()(".b-folders .e-item .e-link.selected",e).addClass("focused")})},t.prototype.messagesDropOver=function(e){u.a.clearTimeout(this.iDropOverTimer),e&&e.collapsed()&&(this.iDropOverTimer=u.a.setTimeout(function(){e.collapsed(!1),i.i(N.a)().setExpandedFolder(e.fullNameHash,!0),i.i(b.windowResize)()},y.Magics.Time500ms))},t.prototype.messagesDropOut=function(){u.a.clearTimeout(this.iDropOverTimer)},t.prototype.scrollToFocused=function(){if(!this.oContentVisible||!this.oContentScrollable)return!1;var e=20,t=p()(".e-item .e-link.focused",this.oContentScrollable),i=t.position(),n=this.oContentVisible.height(),o=t.outerHeight();return!(!i||!(0>i.top||i.top+o>n))&&(0>i.top?this.oContentScrollable.scrollTop(this.oContentScrollable.scrollTop()+i.top-e):this.oContentScrollable.scrollTop(this.oContentScrollable.scrollTop()+i.top-n+o+e),!0)},t.prototype.messagesDrop=function(e,t){if(e&&t&&t.helper){var n=t.helper.data("rl-folder"),o=v.$html.hasClass("rl-ctrl-key-pressed"),a=t.helper.data("rl-uids");i.i(b.isNormal)(n)&&""!==n&&i.i(b.isArray)(a)&&i.i(N.a)().moveMessagesToFolder(n,a,e.fullNameRaw,o)}},t.prototype.composeClick=function(){F.capa(y.Capa.Composer)&&i.i(R.showScreenPopup)(i(37))},t.prototype.createFolder=function(){i.i(R.showScreenPopup)(i(188))},t.prototype.configureFolders=function(){i.i(R.setHash)(i.i(S.q)("folders"))},t.prototype.contactsClick=function(){this.allowContacts&&i.i(R.showScreenPopup)(i(123))},t}(I.a))||_)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(11),h=i.n(p),f=i(6),m=i.n(f),g=i(12),b=i.n(g),y=i(2),v=i.n(y),S=i(19),w=i.n(S),T=i(99),C=i.n(T),E=i(274),A=i.n(E),F=i(3),N=i(20),R=i(7),I=i(1),L=i(14),_=i(178),P=i(29),D=i(8),M=i(23),k=i(28),O=i(184),x=i(40),U=i(30),H=i(39),B=i(10),G=i(18),K=i(16),V=i(9),z=i(13);i.d(t,"a",function(){return ae});var j,q,W,Y,$,J,X,Z,Q,ee,te,ie,ne,oe=function(e){return e.canBeMoved()},ae=(j=i.i(V.view)({name:"View/User/MailBox/MessageList",type:V.ViewType.Right,templateID:"MailMessageList"}),q=i.i(V.command)(),W=i.i(V.command)(),Y=i.i(V.command)(oe),$=i.i(V.command)(oe),J=i.i(V.command)(oe),X=i.i(V.command)(oe),Z=i.i(V.command)(oe),Q=i.i(V.command)(oe),ee=i.i(V.command)(oe),te=i.i(V.command)(oe),j((ne=function(e){function t(){s()(this,t);var n=c()(this,e.call(this));return n.sLastUid=null,n.bPrefetch=!1,n.emptySubjectValue="",n.iGoToUpUpOrDownDownTimeout=0,n.mobile=!!B.appSettingsGet("mobile"),n.newMoveToFolder=k.a.newMoveToFolder,n.allowReload=!!B.capa(F.Capa.Reload),n.allowSearch=!!B.capa(F.Capa.Search),n.allowSearchAdv=!!B.capa(F.Capa.SearchAdv),n.allowComposer=!!B.capa(F.Capa.Composer),n.allowMessageListActions=!!B.capa(F.Capa.MessageListActions),n.allowDangerousActions=!!B.capa(F.Capa.DangerousActions),n.allowFolders=!!B.capa(F.Capa.Folders),n.popupVisibility=R.popupVisibility,n.message=H.a.message,n.messageList=H.a.messageList,n.messageListDisableAutoSelect=H.a.messageListDisableAutoSelect,n.folderList=U.a.folderList,n.composeInEdit=k.a.composeInEdit,n.leftPanelDisabled=R.leftPanelDisabled,n.selectorMessageSelected=H.a.selectorMessageSelected,n.selectorMessageFocused=H.a.selectorMessageFocused,n.isMessageSelected=H.a.isMessageSelected,n.messageListSearch=H.a.messageListSearch,n.messageListThreadUid=H.a.messageListThreadUid,n.messageListError=H.a.messageListError,n.folderMenuForMove=U.a.folderMenuForMove,n.useCheckboxesInList=x.a.useCheckboxesInList,n.mainMessageListSearch=H.a.mainMessageListSearch,n.messageListEndFolder=H.a.messageListEndFolder,n.messageListEndThreadUid=H.a.messageListEndThreadUid,n.messageListChecked=H.a.messageListChecked,n.messageListCheckedOrSelected=H.a.messageListCheckedOrSelected,n.messageListCheckedOrSelectedUidsWithSubMails=H.a.messageListCheckedOrSelectedUidsWithSubMails,n.messageListCompleteLoadingThrottle=H.a.messageListCompleteLoadingThrottle,n.messageListCompleteLoadingThrottleForAnimation=H.a.messageListCompleteLoadingThrottleForAnimation,i.i(D.initOnStartOrLangChange)(function(){n.emptySubjectValue=i.i(D.i18n)("MESSAGE_LIST/EMPTY_SUBJECT_TEXT")}),n.userQuota=O.a.quota,n.userUsageSize=O.a.usage,n.userUsageProc=O.a.percentage,n.moveDropdownTrigger=v.a.observable(!1),n.moreDropdownTrigger=v.a.observable(!1),n.dragOver=v.a.observable(!1).extend({throttle:1}),n.dragOverEnter=v.a.observable(!1).extend({throttle:1}),n.dragOverArea=v.a.observable(null),n.dragOverBodyArea=v.a.observable(null),n.messageListItemTemplate=v.a.computed(function(){return n.mobile||F.Layout.SidePreview===x.a.layout()?"MailMessageListItem":"MailMessageListItemNoPreviewPane"}),n.messageListSearchDesc=v.a.computed(function(){var e=H.a.messageListEndSearch();return""===e?"":i.i(D.i18n)("MESSAGE_LIST/SEARCH_RESULT_FOR",{SEARCH:e})}),n.messageListPagenator=v.a.computed(i.i(I.computedPagenatorHelper)(H.a.messageListPage,H.a.messageListPageCount)),n.checkAll=v.a.computed({read:function(){return 0<H.a.messageListChecked().length},write:function(e){e=!!e,m.a.each(H.a.messageList(),function(t){t.checked(e)})}}),n.inputMessageListSearchFocus=v.a.observable(!1),n.sLastSearchValue="",n.inputProxyMessageListSearch=v.a.computed({read:n.mainMessageListSearch,write:function(e){n.sLastSearchValue=e}}),n.isIncompleteChecked=v.a.computed(function(){var e=H.a.messageList().length,t=H.a.messageListChecked().length;return 0<e&&0<t&&e>t}),n.hasMessages=v.a.computed(function(){return 0<n.messageList().length}),n.hasCheckedOrSelectedLines=v.a.computed(function(){return 0<n.messageListCheckedOrSelected().length}),n.isSpamFolder=v.a.computed(function(){return U.a.spamFolder()===n.messageListEndFolder()&&""!==U.a.spamFolder()}),n.isSpamDisabled=v.a.computed(function(){return N.c===U.a.spamFolder()}),n.isTrashFolder=v.a.computed(function(){return U.a.trashFolder()===n.messageListEndFolder()&&""!==U.a.trashFolder()}),n.isDraftFolder=v.a.computed(function(){return U.a.draftFolder()===n.messageListEndFolder()&&""!==U.a.draftFolder()}),n.isSentFolder=v.a.computed(function(){return U.a.sentFolder()===n.messageListEndFolder()&&""!==U.a.sentFolder()}),n.isArchiveFolder=v.a.computed(function(){return U.a.archiveFolder()===n.messageListEndFolder()&&""!==U.a.archiveFolder()}),n.isArchiveDisabled=v.a.computed(function(){return N.c===U.a.archiveFolder()}),n.isArchiveVisible=v.a.computed(function(){return!n.isArchiveFolder()&&!n.isArchiveDisabled()&&!n.isDraftFolder()}),n.isSpamVisible=v.a.computed(function(){return!(n.isSpamFolder()||n.isSpamDisabled()||n.isDraftFolder()||n.isSentFolder())}),n.isUnSpamVisible=v.a.computed(function(){return n.isSpamFolder()&&!n.isSpamDisabled()&&!n.isDraftFolder()&&!n.isSentFolder()}),n.mobileCheckedStateShow=v.a.computed(function(){var e=0<n.messageListChecked().length;return!n.mobile||e}),n.mobileCheckedStateHide=v.a.computed(function(){var e=0<n.messageListChecked().length;return!n.mobile||!e}),n.messageListFocused=v.a.computed(function(){return F.Focused.MessageList===k.a.focusedState()}),n.canBeMoved=n.hasCheckedOrSelectedLines,n.quotaTooltip=m.a.bind(n.quotaTooltip,n),n.selector=new _.a(n.messageList,n.selectorMessageSelected,n.selectorMessageFocused,".messageListItem .actionHandle",".messageListItem.selected",".messageListItem .checkboxMessage",".messageListItem.focused"),n.selector.on("onItemSelect",function(e){H.a.selectMessage(e)}),n.selector.on("onItemGetUid",function(e){return e?e.generateUid():""}),n.selector.on("onAutoSelect",function(){return n.useAutoSelect()}),n.selector.on("onUpUpOrDownDown",function(e){n.goToUpUpOrDownDown(e)}),P.b("mailbox.message-list.selector.go-down",function(e){n.selector.goDown(e)}),P.b("mailbox.message-list.selector.go-up",function(e){n.selector.goUp(e)}),P.b("mailbox.message.show",function(e,t){var o=m.a.find(n.messageList(),function(i){return i&&e===i.folderFullNameRaw&&t===i.uid});"INBOX"===e&&i.i(V.setHash)(i.i(L.r)(e,1)),o?n.selector.selectMessageItem(o):("INBOX"!==e&&i.i(V.setHash)(i.i(L.r)(e,1)),H.a.selectMessageByFolderAndUid(e,t))}),H.a.messageListEndHash.subscribe(function(){n.selector.scrollToTop()}),n}return d()(t,e),t.prototype.clearCommand=function(){B.capa(F.Capa.DangerousActions)&&i.i(V.showScreenPopup)(i(249),[U.a.currentFolder()])},t.prototype.reloadCommand=function(){!H.a.messageListCompleteLoadingThrottleForAnimation()&&this.allowReload&&i.i(K.a)().reloadMessageList(!1,!0)},t.prototype.multyForwardCommand=function(){B.capa(F.Capa.Composer)&&i.i(V.showScreenPopup)(i(37),[F.ComposeType.ForwardAsAttachment,H.a.messageListCheckedOrSelected()])},t.prototype.deleteWithoutMoveCommand=function(){B.capa(F.Capa.DangerousActions)&&i.i(K.a)().deleteMessagesFromFolder(F.FolderType.Trash,U.a.currentFolderFullNameRaw(),H.a.messageListCheckedOrSelectedUidsWithSubMails(),!1)},t.prototype.deleteCommand=function(){i.i(K.a)().deleteMessagesFromFolder(F.FolderType.Trash,U.a.currentFolderFullNameRaw(),H.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},t.prototype.archiveCommand=function(){i.i(K.a)().deleteMessagesFromFolder(F.FolderType.Archive,U.a.currentFolderFullNameRaw(),H.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},t.prototype.spamCommand=function(){i.i(K.a)().deleteMessagesFromFolder(F.FolderType.Spam,U.a.currentFolderFullNameRaw(),H.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},t.prototype.notSpamCommand=function(){i.i(K.a)().deleteMessagesFromFolder(F.FolderType.NotSpam,U.a.currentFolderFullNameRaw(),H.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},t.prototype.moveCommand=function(){},t.prototype.moveNewCommand=function(e,t){this.newMoveToFolder()&&this.mobileCheckedStateShow()&&(e&&t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation&&t.stopPropagation()),i.i(R.moveAction)()?(k.a.focusedState(F.Focused.MessageList),i.i(R.moveAction)(!1)):(k.a.focusedState(F.Focused.FolderList),i.i(R.moveAction)(!0)))},t.prototype.hideLeft=function(e,t){t.preventDefault(),t.stopPropagation(),i.i(R.leftPanelDisabled)(!0)},t.prototype.showLeft=function(e,t){t.preventDefault(),t.stopPropagation(),i.i(R.leftPanelDisabled)(!1)},t.prototype.composeClick=function(){B.capa(F.Capa.Composer)&&i.i(V.showScreenPopup)(i(37))},t.prototype.goToUpUpOrDownDown=function(e){var t=this;return!(0<this.messageListChecked().length)&&(h.a.clearTimeout(this.iGoToUpUpOrDownDownTimeout),this.iGoToUpUpOrDownDownTimeout=h.a.setTimeout(function(){var i=null,n=null,o=null,a=null;m.a.find(t.messageListPagenator(),function(e){if(e){if(a&&(n=e),e.current&&(a=e,i=o),n)return!0;o=e}return!1}),F.Layout.NoPreview!==x.a.layout()||t.message()?t.selector.iSelectNextHelper=e?-1:1:t.selector.iFocusedNextHelper=e?-1:1,(e?i:n)&&(t.selector.unselect(),t.gotoPage(e?i:n))},F.Magics.Time350ms),!0)},t.prototype.useAutoSelect=function(){return!this.messageListDisableAutoSelect()&&(!/is:unseen/.test(this.mainMessageListSearch())&&F.Layout.NoPreview!==x.a.layout())},t.prototype.searchEnterAction=function(){this.mainMessageListSearch(this.sLastSearchValue),this.inputMessageListSearchFocus(!1)},t.prototype.printableMessageCountForDeletion=function(){var e=this.messageListCheckedOrSelectedUidsWithSubMails().length;return 1<e?" ("+(100>e?e:"99+")+")":""},t.prototype.cancelSearch=function(){this.mainMessageListSearch(""),this.inputMessageListSearchFocus(!1)},t.prototype.cancelThreadUid=function(){i.i(V.setHash)(i.i(L.r)(U.a.currentFolderFullNameHash(),H.a.messageListPageBeforeThread(),H.a.messageListSearch()))},t.prototype.moveSelectedMessagesToFolder=function(e,t){return this.canBeMoved()&&i.i(K.a)().moveMessagesToFolder(U.a.currentFolderFullNameRaw(),H.a.messageListCheckedOrSelectedUidsWithSubMails(),e,t),!1},t.prototype.dragAndDronHelper=function(e){e&&e.checked(!0);var t=i.i(I.draggablePlace)(),n=function(){var e=H.a.messageListCheckedOrSelectedUidsWithSubMails();t.data("rl-uids",e),t.find(".text").text(""+e.length)};return t.data("rl-folder",U.a.currentFolderFullNameRaw()),n(),m.a.defer(n),t},t.prototype.setAction=function(e,t,n){i.i(K.a)().messageListAction(e,t,n)},t.prototype.setActionForAll=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(""!==e){var o=0,a=[],r=i.i(M.b)(e);if(r){switch(t){case F.MessageSetAction.SetSeen:r=i.i(M.b)(e),r&&(m.a.each(H.a.messageList(),function(e){e.unseen()&&(o+=1),e.unseen(!1),a.push(e.uid)}),n?(r.messageCountUnread(r.messageCountUnread()-o),0>r.messageCountUnread()&&r.messageCountUnread(0)):r.messageCountUnread(0),i.i(M.m)(e)),G.a.messageSetSeenToAll(I.noop,e,!0,n?a:null);break;case F.MessageSetAction.UnsetSeen:r=i.i(M.b)(e),r&&(m.a.each(H.a.messageList(),function(e){e.unseen()||(o+=1),e.unseen(!0),a.push(e.uid)}),n?(r.messageCountUnread(r.messageCountUnread()+o),r.messageCountAll()<r.messageCountUnread()&&r.messageCountUnread(r.messageCountAll())):r.messageCountUnread(r.messageCountAll()),i.i(M.m)(e)),G.a.messageSetSeenToAll(I.noop,e,!1,n?a:null)}i.i(K.a)().reloadFlagsCurrentMessageListAndMessageFromCache()}}},t.prototype.listSetSeen=function(){this.setAction(U.a.currentFolderFullNameRaw(),F.MessageSetAction.SetSeen,H.a.messageListCheckedOrSelected())},t.prototype.listSetAllSeen=function(){this.setActionForAll(U.a.currentFolderFullNameRaw(),F.MessageSetAction.SetSeen,this.messageListEndThreadUid())},t.prototype.listUnsetSeen=function(){this.setAction(U.a.currentFolderFullNameRaw(),F.MessageSetAction.UnsetSeen,H.a.messageListCheckedOrSelected())},t.prototype.listSetFlags=function(){this.setAction(U.a.currentFolderFullNameRaw(),F.MessageSetAction.SetFlag,H.a.messageListCheckedOrSelected())},t.prototype.listUnsetFlags=function(){this.setAction(U.a.currentFolderFullNameRaw(),F.MessageSetAction.UnsetFlag,H.a.messageListCheckedOrSelected())},t.prototype.flagMessages=function(e){var t=this.messageListCheckedOrSelected();if(e){var n=m.a.map(t,function(e){return e.uid});0<n.length&&-1<i.i(I.inArray)(e.uid,n)?this.setAction(e.folderFullNameRaw,e.flagged()?F.MessageSetAction.UnsetFlag:F.MessageSetAction.SetFlag,t):this.setAction(e.folderFullNameRaw,e.flagged()?F.MessageSetAction.UnsetFlag:F.MessageSetAction.SetFlag,[e])}},t.prototype.flagMessagesFast=function(e){var t=this.messageListCheckedOrSelected();if(0<t.length)if(i.i(I.isUnd)(e)){var n=m.a.filter(t,function(e){return e.flagged()});this.setAction(t[0].folderFullNameRaw,t.length===n.length?F.MessageSetAction.UnsetFlag:F.MessageSetAction.SetFlag,t)}else this.setAction(t[0].folderFullNameRaw,e?F.MessageSetAction.SetFlag:F.MessageSetAction.UnsetFlag,t)},t.prototype.seenMessagesFast=function(e){var t=this.messageListCheckedOrSelected();if(0<t.length)if(i.i(I.isUnd)(e)){var n=m.a.filter(t,function(e){return e.unseen()});this.setAction(t[0].folderFullNameRaw,0<n.length?F.MessageSetAction.SetSeen:F.MessageSetAction.UnsetSeen,t)}else this.setAction(t[0].folderFullNameRaw,e?F.MessageSetAction.SetSeen:F.MessageSetAction.UnsetSeen,t)},t.prototype.gotoPage=function(e){e&&i.i(V.setHash)(i.i(L.r)(U.a.currentFolderFullNameHash(),e.value,H.a.messageListSearch(),H.a.messageListThreadUid()))},t.prototype.gotoThread=function(e){e&&0<e.threadsLen()&&(H.a.messageListPageBeforeThread(H.a.messageListPage()),i.i(V.setHash)(i.i(L.r)(U.a.currentFolderFullNameHash(),1,H.a.messageListSearch(),e.uid)))},t.prototype.clearListIsVisible=function(){return""===this.messageListSearchDesc()&&""===this.messageListError()&&""===this.messageListEndThreadUid()&&0<this.messageList().length&&(this.isSpamFolder()||this.isTrashFolder())},t.prototype.onBuild=function(e){var t=this,n=this;this.oContentVisible=b()(".b-content",e),this.oContentScrollable=b()(".content",this.oContentVisible),this.selector.init(this.oContentVisible,this.oContentScrollable,F.KeyState.MessageList),this.mobile&&e.on("click",function(){i.i(R.leftPanelDisabled)(!0)}),e.on("click",".messageList .b-message-list-wrapper",function(){F.Focused.MessageView===k.a.focusedState()&&k.a.focusedState(F.Focused.MessageList)}).on("click",".e-pagenator .e-page",function(){n.gotoPage(v.a.dataFor(this))}).on("click",".messageList .checkboxCkeckAll",function(){t.checkAll(!t.checkAll())}).on("click",".messageList .messageListItem .flagParent",function(){n.flagMessages(v.a.dataFor(this))}).on("click",".messageList .messageListItem .threads-len",function(){n.gotoThread(v.a.dataFor(this))}).on("dblclick",".messageList .messageListItem .actionHandle",function(){n.gotoThread(v.a.dataFor(this))}),this.initUploaderForAppend(),this.initShortcuts(),!R.bMobileDevice&&A.a&&B.capa(F.Capa.Prefetch)&&(A.a.setIdleDuration(F.Magics.ifvisibleIdle10s),A.a.idle(function(){t.prefetchNextTick()}))},t.prototype.initShortcuts=function(){var e=this;w()("enter",F.KeyState.MessageList,function(){return!e.message()||!e.useAutoSelect()||(P.a("mailbox.message-view.toggle-full-screen"),!1)}),B.capa(F.Capa.MessageListActions)&&(w()("z",[F.KeyState.MessageList,F.KeyState.MessageView],function(){return e.archiveCommand(),!1}),w()("delete, shift+delete, shift+3",F.KeyState.MessageList,function(t,i){return!t||(0<H.a.messageListCheckedOrSelected().length&&(i&&"shift+delete"===i.shortcut?e.deleteWithoutMoveCommand():e.deleteCommand()),!1)})),B.capa(F.Capa.Reload)&&w()("ctrl+r, command+r",[F.KeyState.FolderList,F.KeyState.MessageList,F.KeyState.MessageView],function(){return e.reloadCommand(),!1}),w()("ctrl+a, command+a",F.KeyState.MessageList,function(){return e.checkAll(!(e.checkAll()&&!e.isIncompleteChecked())),!1}),B.capa(F.Capa.Composer)&&w()("w,c",[F.KeyState.MessageList,F.KeyState.MessageView],function(){return i.i(V.showScreenPopup)(i(37)),!1}),B.capa(F.Capa.MessageListActions)&&w()("i",[F.KeyState.MessageList,F.KeyState.MessageView],function(){return e.flagMessagesFast(),!1}),w()("t",[F.KeyState.MessageList],function(){var t=e.selectorMessageSelected();return t||(t=e.selectorMessageFocused()),t&&0<t.threadsLen()&&e.gotoThread(t),!1}),B.capa(F.Capa.MessageListActions)&&w()("m",F.KeyState.MessageList,function(){return e.newMoveToFolder()?e.moveNewCommand():e.moveDropdownTrigger(!0),!1}),B.capa(F.Capa.MessageListActions)&&(w()("q",[F.KeyState.MessageList,F.KeyState.MessageView],function(){return e.seenMessagesFast(!0),!1}),w()("u",[F.KeyState.MessageList,F.KeyState.MessageView],function(){return e.seenMessagesFast(!1),!1})),B.capa(F.Capa.Composer)&&w()("shift+f",[F.KeyState.MessageList,F.KeyState.MessageView],function(){return e.multyForwardCommand(),!1}),B.capa(F.Capa.Search)&&w()("/",[F.KeyState.MessageList,F.KeyState.MessageView],function(){return e.inputMessageListSearchFocus(!0),!1}),w()("esc",F.KeyState.MessageList,function(){return""!==e.messageListSearchDesc()?(e.cancelSearch(),!1):""===e.messageListEndThreadUid()||(e.cancelThreadUid(),!1)}),w()("tab, shift+tab, left, right",F.KeyState.MessageList,function(t,i){return t&&i&&("shift+tab"===i.shortcut||"left"===i.shortcut)?k.a.focusedState(F.Focused.FolderList):e.message()&&k.a.focusedState(F.Focused.MessageView),!1}),w()("ctrl+left, command+left",F.KeyState.MessageView,I.noopFalse),w()("ctrl+right, command+right",F.KeyState.MessageView,I.noopFalse)},t.prototype.prefetchNextTick=function(){var e=this;if(A.a&&!this.bPrefetch&&!A.a.now()&&this.viewModelVisibility()){var t=m.a.find(this.messageList(),function(e){return e&&!i.i(M.r)(e.folderFullNameRaw,e.uid)});t&&(this.bPrefetch=!0,i.i(M.l)(t.folderFullNameRaw,t.uid),G.a.message(function(t,i){var n=!(F.StorageResultType.Success!==t||!i||!i.Result);m.a.delay(function(){e.bPrefetch=!1,n&&e.prefetchNextTick()},F.Magics.Time1s)},t.folderFullNameRaw,t.uid))}},t.prototype.advancedSearchClick=function(){B.capa(F.Capa.SearchAdv)&&i.i(V.showScreenPopup)(i(246),[this.mainMessageListSearch()])},t.prototype.quotaTooltip=function(){return i.i(D.i18n)("MESSAGE_LIST/QUOTA_SIZE",{SIZE:i.i(I.friendlySize)(this.userUsageSize()),PROC:this.userUsageProc(),LIMIT:i.i(I.friendlySize)(this.userQuota())})},t.prototype.initUploaderForAppend=function(){var e=this;if(!B.appSettingsGet("allowAppendMessage")||!this.dragOverArea())return!1;var t=new C.a({action:i.i(L.y)(),name:"AppendFile",queueSize:1,multipleSizeLimit:1,hidden:{Folder:function(){return U.a.currentFolderFullNameRaw()}},dragAndDropElement:this.dragOverArea(),dragAndDropBodyElement:this.dragOverBodyArea()});return this.dragOver.subscribe(function(t){t&&e.selector.scrollToTop()}),t.on("onDragEnter",function(){e.dragOverEnter(!0)}).on("onDragLeave",function(){e.dragOverEnter(!1)}).on("onBodyDragEnter",function(){e.dragOver(!0)}).on("onBodyDragLeave",function(){e.dragOver(!1)}).on("onSelect",function(e,t){return!(!e||!t||"message/rfc822"!==t.Type)&&(H.a.messageListLoading(!0),!0)}).on("onComplete",function(){i.i(K.a)().reloadMessageList(!0,!0)}),!!t},t}(z.a),n(ne.prototype,"clearCommand",[q],a()(ne.prototype,"clearCommand"),ne.prototype),n(ne.prototype,"reloadCommand",[W],a()(ne.prototype,"reloadCommand"),ne.prototype),n(ne.prototype,"multyForwardCommand",[Y],a()(ne.prototype,"multyForwardCommand"),ne.prototype),n(ne.prototype,"deleteWithoutMoveCommand",[$],a()(ne.prototype,"deleteWithoutMoveCommand"),ne.prototype),n(ne.prototype,"deleteCommand",[J],a()(ne.prototype,"deleteCommand"),ne.prototype),
n(ne.prototype,"archiveCommand",[X],a()(ne.prototype,"archiveCommand"),ne.prototype),n(ne.prototype,"spamCommand",[Z],a()(ne.prototype,"spamCommand"),ne.prototype),n(ne.prototype,"notSpamCommand",[Q],a()(ne.prototype,"notSpamCommand"),ne.prototype),n(ne.prototype,"moveCommand",[ee],a()(ne.prototype,"moveCommand"),ne.prototype),n(ne.prototype,"moveNewCommand",[te],a()(ne.prototype,"moveNewCommand"),ne.prototype),ie=ne))||ie)},function(e,t,i){"use strict";function n(e,t,i,n,o){var a={};return Object.keys(n).forEach(function(e){a[e]=n[e]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(e,t,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var o=i(15),a=i.n(o),r=i(0),s=i.n(r),l=i(5),c=i.n(l),u=i(4),d=i.n(u),p=i(11),h=i.n(p),f=i(6),m=i.n(f),g=i(12),b=i.n(g),y=i(2),v=i.n(y),S=i(19),w=i.n(S),T=i(20),C=i(3),E=i(7),A=i(1),F=i(101),N=i(29),R=i(8),I=i(14),L=i(23),_=i(54),P=i(28),D=i(40),M=i(46),k=i(30),O=i(39),x=i(79),U=i(10),H=i(18),B=i(78),G=i(16),K=i(9),V=i(13);i.d(t,"a",function(){return Z});var z,j,q,W,Y,$,J,X,Z=(z=i.i(K.view)({name:"View/User/MailBox/MessageView",type:K.ViewType.Right,templateID:"MailMessageView"}),j=i.i(K.command)(),q=i.i(K.command)(function(e){return e.messageVisibility()}),W=i.i(K.command)(function(e){return e.messageVisibility()}),Y=i.i(K.command)(function(e){return!e.messageListAndMessageViewLoading()}),$=i.i(K.command)(function(e){return!e.messageListAndMessageViewLoading()}),z((X=function(e){function t(){s()(this,t);var n=c()(this,e.call(this)),o="",a=function(e){return i.i(K.createCommand)(function(){n.lastReplyAction(e),n.replyOrforward(e)},n.canBeRepliedOrForwarded)},r=function(e,t){return i.i(K.createCommand)(function(){var o=n.message();o&&n.allowMessageListActions&&(n.message(null),i.i(G.a)().deleteMessagesFromFolder(e,o.folderFullNameRaw,[o.uid],t))},n.messageVisibility)};return n.oDom=null,n.oHeaderDom=null,n.oMessageScrollerDom=null,n.bodyBackgroundColor=v.a.observable(""),n.pswp=null,n.allowComposer=!!U.capa(C.Capa.Composer),n.allowMessageActions=!!U.capa(C.Capa.MessageActions),n.allowMessageListActions=!!U.capa(C.Capa.MessageListActions),n.logoImg=i.i(A.trim)(U.settingsGet("UserLogoMessage")),n.logoIframe=i.i(A.trim)(U.settingsGet("UserIframeMessage")),n.mobile=!!U.appSettingsGet("mobile"),n.attachmentsActions=P.a.attachmentsActions,n.message=O.a.message,n.messageListChecked=O.a.messageListChecked,n.hasCheckedMessages=O.a.hasCheckedMessages,n.messageListCheckedOrSelectedUidsWithSubMails=O.a.messageListCheckedOrSelectedUidsWithSubMails,n.messageLoadingThrottle=O.a.messageLoadingThrottle,n.messagesBodiesDom=O.a.messagesBodiesDom,n.useThreads=D.a.useThreads,n.replySameFolder=D.a.replySameFolder,n.layout=D.a.layout,n.usePreviewPane=D.a.usePreviewPane,n.isMessageSelected=O.a.isMessageSelected,n.messageActiveDom=O.a.messageActiveDom,n.messageError=O.a.messageError,n.fullScreenMode=O.a.messageFullScreenMode,n.messageListOfThreadsLoading=v.a.observable(!1).extend({rateLimit:1}),n.highlightUnselectedAttachments=v.a.observable(!1).extend({falseTimeout:2e3}),n.showAttachmnetControls=v.a.observable(!1),n.allowAttachmnetControls=v.a.computed(function(){return 0<n.attachmentsActions().length&&U.capa(C.Capa.AttachmentsActions)}),n.downloadAsZipAllowed=v.a.computed(function(){return-1<i.i(A.inArray)("zip",n.attachmentsActions())&&n.allowAttachmnetControls()}),n.downloadAsZipLoading=v.a.observable(!1),n.downloadAsZipError=v.a.observable(!1).extend({falseTimeout:7e3}),n.saveToOwnCloudAllowed=v.a.computed(function(){return-1<i.i(A.inArray)("owncloud",n.attachmentsActions())&&n.allowAttachmnetControls()}),n.saveToOwnCloudLoading=v.a.observable(!1),n.saveToOwnCloudSuccess=v.a.observable(!1).extend({falseTimeout:2e3}),n.saveToOwnCloudError=v.a.observable(!1).extend({falseTimeout:7e3}),n.saveToOwnCloudSuccess.subscribe(function(e){e&&n.saveToOwnCloudError(!1)}),n.saveToOwnCloudError.subscribe(function(e){e&&n.saveToOwnCloudSuccess(!1)}),n.saveToDropboxAllowed=v.a.computed(function(){return-1<i.i(A.inArray)("dropbox",n.attachmentsActions())&&n.allowAttachmnetControls()}),n.saveToDropboxLoading=v.a.observable(!1),n.saveToDropboxSuccess=v.a.observable(!1).extend({falseTimeout:2e3}),n.saveToDropboxError=v.a.observable(!1).extend({falseTimeout:7e3}),n.saveToDropboxSuccess.subscribe(function(e){e&&n.saveToDropboxError(!1)}),n.saveToDropboxError.subscribe(function(e){e&&n.saveToDropboxSuccess(!1)}),n.showAttachmnetControls.subscribe(function(e){n.message()&&m.a.each(n.message().attachments(),function(t){t&&t.checked(!!e)})}),n.lastReplyAction_=v.a.observable(""),n.lastReplyAction=v.a.computed({read:n.lastReplyAction_,write:function(e){n.lastReplyAction_(-1===i.i(A.inArray)(e,[C.ComposeType.Reply,C.ComposeType.ReplyAll,C.ComposeType.Forward])?C.ComposeType.Reply:e)}}),n.lastReplyAction(x.a(C.ClientSideKeyName.LastReplyAction)||C.ComposeType.Reply),n.lastReplyAction_.subscribe(function(e){x.b(C.ClientSideKeyName.LastReplyAction,e)}),n.showFullInfo=v.a.observable("1"===x.a(C.ClientSideKeyName.MessageHeaderFullInfo)),n.moreDropdownTrigger=v.a.observable(!1),n.messageDomFocused=v.a.observable(!1).extend({rateLimit:0}),n.messageVisibility=v.a.computed(function(){return!n.messageLoadingThrottle()&&!!n.message()}),n.message.subscribe(function(e){e||O.a.selectorMessageSelected(null)}),n.canBeRepliedOrForwarded=v.a.computed(function(){var e=n.messageVisibility();return!n.isDraftFolder()&&e}),n.replyCommand=a(C.ComposeType.Reply),n.replyAllCommand=a(C.ComposeType.ReplyAll),n.forwardCommand=a(C.ComposeType.Forward),n.forwardAsAttachmentCommand=a(C.ComposeType.ForwardAsAttachment),n.editAsNewCommand=a(C.ComposeType.EditAsNew),n.deleteCommand=r(C.FolderType.Trash,!0),n.deleteWithoutMoveCommand=r(C.FolderType.Trash,!1),n.archiveCommand=r(C.FolderType.Archive,!0),n.spamCommand=r(C.FolderType.Spam,!0),n.notSpamCommand=r(C.FolderType.NotSpam,!0),n.dropboxEnabled=_.a.dropbox.enabled,n.dropboxApiKey=_.a.dropbox.apiKey,n.viewBodyTopValue=v.a.observable(0),n.viewFolder="",n.viewUid="",n.viewHash="",n.viewSubject=v.a.observable(""),n.viewFromShort=v.a.observable(""),n.viewFromDkimData=v.a.observable(["none",""]),n.viewToShort=v.a.observable(""),n.viewFrom=v.a.observable(""),n.viewTo=v.a.observable(""),n.viewCc=v.a.observable(""),n.viewBcc=v.a.observable(""),n.viewReplyTo=v.a.observable(""),n.viewTimeStamp=v.a.observable(0),n.viewSize=v.a.observable(""),n.viewLineAsCss=v.a.observable(""),n.viewViewLink=v.a.observable(""),n.viewUnsubscribeLink=v.a.observable(""),n.viewDownloadLink=v.a.observable(""),n.viewUserPic=v.a.observable(T.n),n.viewUserPicVisible=v.a.observable(!1),n.viewIsImportant=v.a.observable(!1),n.viewIsFlagged=v.a.observable(!1),n.viewFromDkimVisibility=v.a.computed(function(){return"none"!==n.viewFromDkimData()[0]}),n.viewFromDkimStatusIconClass=v.a.computed(function(){switch(n.viewFromDkimData()[0]){case"none":return"icon-none iconcolor-display-none";case"pass":return"icon-ok iconcolor-green";default:return"icon-warning-alt iconcolor-red"}}),n.viewFromDkimStatusTitle=v.a.computed(function(){var e=n.viewFromDkimData();if(i.i(A.isNonEmptyArray)(e)){if(e[0]&&e[1])return e[1];if(e[0])return"DKIM: "+e[0]}return""}),n.messageActiveDom.subscribe(function(e){n.bodyBackgroundColor(e?n.detectDomBackgroundColor(e):"")},n),n.message.subscribe(function(e){n.messageActiveDom(null),e?(n.showAttachmnetControls(!1),n.viewHash!==e.hash&&n.scrollMessageToTop(),n.viewFolder=e.folderFullNameRaw,n.viewUid=e.uid,n.viewHash=e.hash,n.viewSubject(e.subject()),n.viewFromShort(e.fromToLine(!0,!0)),n.viewFromDkimData(e.fromDkimData()),n.viewToShort(e.toToLine(!0,!0)),n.viewFrom(e.fromToLine(!1)),n.viewTo(e.toToLine(!1)),n.viewCc(e.ccToLine(!1)),n.viewBcc(e.bccToLine(!1)),n.viewReplyTo(e.replyToToLine(!1)),n.viewTimeStamp(e.dateTimeStampInUTC()),n.viewSize(e.friendlySize()),n.viewLineAsCss(e.lineAsCss()),n.viewViewLink(e.viewLink()),n.viewUnsubscribeLink(e.getFirstUnsubsribeLink()),n.viewDownloadLink(e.downloadLink()),n.viewIsImportant(e.isImportant()),n.viewIsFlagged(e.flagged()),o=e.fromAsSingleEmail(),i.i(L.s)(o,function(e,t){e!==n.viewUserPic()&&o===t&&(n.viewUserPicVisible(!1),n.viewUserPic(T.n),""!==e&&(n.viewUserPicVisible(!0),n.viewUserPic(e)))})):(n.viewFolder="",n.viewUid="",n.viewHash="",n.scrollMessageToTop())}),n.message.viewTrigger.subscribe(function(){var e=n.message();e?n.viewIsFlagged(e.flagged()):n.viewIsFlagged(!1)}),n.fullScreenMode.subscribe(function(e){E.$html.toggleClass("rl-message-fullscreen",e),i.i(A.windowResize)()}),n.messageLoadingThrottle.subscribe(A.windowResizeCallback),n.messageFocused=v.a.computed(function(){return C.Focused.MessageView===P.a.focusedState()}),n.messageListAndMessageViewLoading=v.a.computed(function(){return O.a.messageListCompleteLoadingThrottle()||O.a.messageLoadingThrottle()}),N.b("mailbox.message-view.toggle-full-screen",function(){n.toggleFullScreen()}),n.attachmentPreview=m.a.bind(n.attachmentPreview,n),n}return d()(t,e),t.prototype.closeMessageCommand=function(){O.a.message(null)},t.prototype.messageVisibilityCommand=function(){},t.prototype.messageEditCommand=function(){this.editMessage()},t.prototype.goUpCommand=function(){N.a("mailbox.message-list.selector.go-up",[C.Layout.NoPreview!==this.layout()||!!this.message()])},t.prototype.goDownCommand=function(){N.a("mailbox.message-list.selector.go-down",[C.Layout.NoPreview!==this.layout()||!!this.message()])},t.prototype.detectDomBackgroundColor=function(e){var t=5,i="",n=function(e){var t=e?e.children():null;return t&&1===t.length&&t.is("table,div,center")?t:null},o=function(e){var t="";return e&&(t=e.css("background-color")||"",e.is("table")||(t="rgba(0, 0, 0, 0)"===t||"transparent"===t?"":t)),t};if(e&&1===e.length){for(var a=e;""===i&&(t-=1,!(0>=t))&&(a=n(a));)i=o(a);i="rgba(0, 0, 0, 0)"===i||"transparent"===i?"":i}return i},t.prototype.fullScreen=function(){this.fullScreenMode(!0),i.i(A.windowResize)()},t.prototype.unFullScreen=function(){this.fullScreenMode(!1),i.i(A.windowResize)()},t.prototype.toggleFullScreen=function(){i.i(A.removeSelection)(),this.fullScreenMode(!this.fullScreenMode()),i.i(A.windowResize)()},t.prototype.replyOrforward=function(e){U.capa(C.Capa.Composer)&&i.i(K.showScreenPopup)(i(37),[e,O.a.message()])},t.prototype.checkHeaderHeight=function(){this.oHeaderDom&&this.viewBodyTopValue(this.message()?this.oHeaderDom.height()+C.Magics.Size20px+C.Magics.Size1px:0)},t.prototype.attachmentPreview=function(e){if(e&&e.isImage()&&!e.isLinked&&this.message()&&this.message().attachments()){var t=0,n=0,o=b()("<div>"),a=m.a.compact(m.a.map(this.message().attachments(),function(i){return i&&!i.isLinked&&i.isImage()?(i===e&&(t=n),n+=1,{src:i.linkPreview(),thumb:i.linkThumbnail(),subHtml:i.fileName,downloadUrl:i.linkPreview()}):null}));return 0<a.length&&(o.on("onBeforeOpen.lg",function(){i.i(E.useKeyboardShortcuts)(!1),i.i(A.removeInFocus)(!0)}),o.on("onCloseAfter.lg",function(){i.i(E.useKeyboardShortcuts)(!0)}),o.lightGallery({dynamic:!0,loadYoutubeThumbnail:!1,loadVimeoThumbnail:!1,thumbWidth:80,thumbContHeight:95,showThumbByDefault:!1,mode:"lg-lollipop",index:t,dynamicEl:a})),!1}return!0},t.prototype.onBuild=function(e){var t=this,n=this,o=m.a.bind(this.checkHeaderHeight,this);this.oDom=e,this.fullScreenMode.subscribe(function(e){e&&t.message()&&P.a.focusedState(C.Focused.MessageView)}),this.showAttachmnetControls.subscribe(o),this.fullScreenMode.subscribe(o),this.showFullInfo.subscribe(o),this.message.subscribe(o),N.b("window.resize",m.a.throttle(function(){m.a.delay(o,1),m.a.delay(o,C.Magics.Time200ms),m.a.delay(o,C.Magics.Time500ms)},C.Magics.Time50ms)),this.showFullInfo.subscribe(function(e){i.i(A.windowResize)(),i.i(A.windowResize)(C.Magics.Time200ms),x.b(C.ClientSideKeyName.MessageHeaderFullInfo,e?"1":"0")}),_.a.appendDropbox(),this.oHeaderDom=b()(".messageItemHeader",e),this.oHeaderDom=this.oHeaderDom[0]?this.oHeaderDom:null,this.mobile&&e.on("click",function(){i.i(E.leftPanelDisabled)(!0)}),e.on("click","a",function(e){return!(e&&C.Magics.EventWhichMouseMiddle!==e.which&&i.i(A.mailToHelper)(b()(this).attr("href"),U.capa(C.Capa.Composer)?i(37):null))}).on("click",".attachmentsPlace .attachmentIconParent",function(e){e&&e.stopPropagation&&e.stopPropagation()}).on("click",".attachmentsPlace .showPreplay",function(e){e&&e.stopPropagation&&e.stopPropagation();var t=v.a.dataFor(this);if(t&&F.a.supported)switch(!0){case F.a.supportedMp3&&t.isMp3():F.a.playMp3(t.linkDownload(),t.fileName);break;case F.a.supportedOgg&&t.isOgg():F.a.playOgg(t.linkDownload(),t.fileName);break;case F.a.supportedWav&&t.isWav():F.a.playWav(t.linkDownload(),t.fileName)}}).on("click",".attachmentsPlace .attachmentItem .attachmentNameParent",function(){var e=v.a.dataFor(this);e&&e.download&&i.i(G.a)().download(e.linkDownload())}).on("click",".messageItemHeader .subjectParent .flagParent",function(){var e=n.message();e&&i.i(G.a)().messageListAction(e.folderFullNameRaw,e.flagged()?C.MessageSetAction.UnsetFlag:C.MessageSetAction.SetFlag,[e])}).on("click",".thread-list .flagParent",function(){var e=v.a.dataFor(this);return e&&e.folder&&e.uid&&i.i(G.a)().messageListAction(e.folder,e.flagged()?C.MessageSetAction.UnsetFlag:C.MessageSetAction.SetFlag,[e]),n.threadsDropdownTrigger(!0),!1}),P.a.focusedState.subscribe(function(e){C.Focused.MessageView!==e&&(t.scrollMessageToTop(),t.scrollMessageToLeft())}),E.keyScopeReal.subscribe(function(e){t.messageDomFocused(C.KeyState.MessageView===e&&!i.i(A.inFocus)())}),this.oMessageScrollerDom=e.find(".messageItem .content"),this.oMessageScrollerDom=this.oMessageScrollerDom&&this.oMessageScrollerDom[0]?this.oMessageScrollerDom:null,this.initShortcuts()},t.prototype.escShortcuts=function(){return!this.viewModelVisibility()||!this.message()||(this.fullScreenMode()?(this.fullScreenMode(!1),C.Layout.NoPreview!==this.layout()&&P.a.focusedState(C.Focused.MessageList)):C.Layout.NoPreview===this.layout()?this.message(null):P.a.focusedState(C.Focused.MessageList),!1)},t.prototype.initShortcuts=function(){var e=this;w()("esc, backspace",C.KeyState.MessageView,m.a.bind(this.escShortcuts,this)),w()("enter",C.KeyState.MessageView,function(){return e.toggleFullScreen(),!1}),w()("r",[C.KeyState.MessageList,C.KeyState.MessageView],function(){return!O.a.message()||(e.replyCommand(),!1)}),w()("a",[C.KeyState.MessageList,C.KeyState.MessageView],function(){return!O.a.message()||(e.replyAllCommand(),!1)}),w()("f",[C.KeyState.MessageList,C.KeyState.MessageView],function(){return!O.a.message()||(e.forwardCommand(),!1)}),w()("ctrl+i, command+i",[C.KeyState.MessageList,C.KeyState.MessageView],function(){return O.a.message()&&e.showFullInfo(!e.showFullInfo()),!1}),w()("b",[C.KeyState.MessageList,C.KeyState.MessageView],function(){return!O.a.message()||!O.a.message().body||(O.a.message().body.find(".rlBlockquoteSwitcher").click(),!1)}),w()("ctrl+up, command+up, ctrl+left, command+left",[C.KeyState.MessageList,C.KeyState.MessageView],function(){return e.goUpCommand(),!1}),w()("ctrl+down, command+down, ctrl+right, command+right",[C.KeyState.MessageList,C.KeyState.MessageView],function(){return e.goDownCommand(),!1}),w()("ctrl+p, command+p",[C.KeyState.MessageView,C.KeyState.MessageList],function(){return e.message()&&e.message().printMessage(),!1}),w()("delete, shift+delete",C.KeyState.MessageView,function(t,i){return!t||(i&&"shift+delete"===i.shortcut?e.deleteWithoutMoveCommand():e.deleteCommand(),!1)}),w()("tab, shift+tab, left",C.KeyState.MessageView,function(t,i){if(!e.fullScreenMode()&&e.message()&&C.Layout.NoPreview!==e.layout())if(t&&i&&"left"===i.shortcut){if(e.oMessageScrollerDom&&0<e.oMessageScrollerDom.scrollLeft())return!0;P.a.focusedState(C.Focused.MessageList)}else P.a.focusedState(C.Focused.MessageList);else if(e.message()&&C.Layout.NoPreview===e.layout()&&t&&i&&"left"===i.shortcut)return!0;return!1})},t.prototype.isDraftFolder=function(){return O.a.message()&&k.a.draftFolder()===O.a.message().folderFullNameRaw},t.prototype.isSentFolder=function(){return O.a.message()&&k.a.sentFolder()===O.a.message().folderFullNameRaw},t.prototype.isSpamFolder=function(){return O.a.message()&&k.a.spamFolder()===O.a.message().folderFullNameRaw},t.prototype.isSpamDisabled=function(){return O.a.message()&&k.a.spamFolder()===T.c},t.prototype.isArchiveFolder=function(){return O.a.message()&&k.a.archiveFolder()===O.a.message().folderFullNameRaw},t.prototype.isArchiveDisabled=function(){return O.a.message()&&k.a.archiveFolder()===T.c},t.prototype.isDraftOrSentFolder=function(){return this.isDraftFolder()||this.isSentFolder()},t.prototype.composeClick=function(){U.capa(C.Capa.Composer)&&i.i(K.showScreenPopup)(i(37))},t.prototype.editMessage=function(){U.capa(C.Capa.Composer)&&O.a.message()&&i.i(K.showScreenPopup)(i(37),[C.ComposeType.Draft,O.a.message()])},t.prototype.scrollMessageToTop=function(){this.oMessageScrollerDom&&(C.Magics.Size50px<this.oMessageScrollerDom.scrollTop()?this.oMessageScrollerDom.scrollTop(C.Magics.Size50px).animate({scrollTop:0},C.Magics.Time200ms):this.oMessageScrollerDom.scrollTop(0),i.i(A.windowResize)())},t.prototype.scrollMessageToLeft=function(){this.oMessageScrollerDom&&(this.oMessageScrollerDom.scrollLeft(0),i.i(A.windowResize)())},t.prototype.getAttachmentsHashes=function(){var e=this.message()?this.message().attachments():[];return m.a.compact(m.a.map(e,function(e){return e&&!e.isLinked&&e.checked()?e.download:""}))},t.prototype.downloadAsZip=function(){var e=this,t=this.getAttachmentsHashes();0<t.length?B.a.attachmentsActions("Zip",t,this.downloadAsZipLoading).then(function(t){t&&t.Result&&t.Result.Files&&t.Result.Files[0]&&t.Result.Files[0].Hash?i.i(G.a)().download(i.i(I.d)(t.Result.Files[0].Hash)):e.downloadAsZipError(!0)}).catch(function(){e.downloadAsZipError(!0)}):this.highlightUnselectedAttachments(!0)},t.prototype.saveToOwnCloud=function(){var e=this,t=this.getAttachmentsHashes();0<t.length?B.a.attachmentsActions("OwnCloud",t,this.saveToOwnCloudLoading).then(function(t){t&&t.Result?e.saveToOwnCloudSuccess(!0):e.saveToOwnCloudError(!0)}).catch(function(){e.saveToOwnCloudError(!0)}):this.highlightUnselectedAttachments(!0)},t.prototype.saveToDropbox=function(){var e=this,t=[],n=this.getAttachmentsHashes();0<n.length?h.a.Dropbox&&B.a.attachmentsActions("Dropbox",n,this.saveToDropboxLoading).then(function(n){n&&n.Result&&n.Result.Url&&n.Result.ShortLife&&n.Result.Files&&(h.a.Dropbox&&i.i(A.isArray)(n.Result.Files)?(m.a.each(n.Result.Files,function(e){t.push({url:n.Result.Url+i.i(I.d)(e.Hash,n.Result.ShortLife),filename:e.FileName})}),h.a.Dropbox.save({files:t,progress:function(){e.saveToDropboxLoading(!0),e.saveToDropboxError(!1),e.saveToDropboxSuccess(!1)},cancel:function(){e.saveToDropboxSuccess(!1),e.saveToDropboxError(!1),e.saveToDropboxLoading(!1)},success:function(){e.saveToDropboxSuccess(!0),e.saveToDropboxLoading(!1)},error:function(){e.saveToDropboxError(!0),e.saveToDropboxLoading(!1)}})):e.saveToDropboxError(!0))}).catch(function(){e.saveToDropboxError(!0)}):this.highlightUnselectedAttachments(!0)},t.prototype.showImages=function(e){e&&e.showExternalImages&&e.showExternalImages(!0),this.checkHeaderHeight()},t.prototype.printableCheckedMessageCount=function(){var e=this.messageListCheckedOrSelectedUidsWithSubMails().length;return 0<e?100>e?e:"99+":""},t.prototype.readReceipt=function(e){e&&""!==e.readReceipt()&&(H.a.sendReadReceiptMessage(A.noop,e.folderFullNameRaw,e.uid,e.readReceipt(),i.i(R.i18n)("READ_RECEIPT/SUBJECT",{SUBJECT:e.subject()}),i.i(R.i18n)("READ_RECEIPT/BODY",{"READ-RECEIPT":M.a.email()})),e.isReadReceipt(!0),i.i(L.o)(e),i.i(G.a)().reloadFlagsCurrentMessageListAndMessageFromCache()),this.checkHeaderHeight()},t}(V.a),n(X.prototype,"closeMessageCommand",[j],a()(X.prototype,"closeMessageCommand"),X.prototype),n(X.prototype,"messageVisibilityCommand",[q],a()(X.prototype,"messageVisibilityCommand"),X.prototype),n(X.prototype,"messageEditCommand",[W],a()(X.prototype,"messageEditCommand"),X.prototype),n(X.prototype,"goUpCommand",[Y],a()(X.prototype,"goUpCommand"),X.prototype),n(X.prototype,"goDownCommand",[$],a()(X.prototype,"goDownCommand"),X.prototype),J=X))||J)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(9),u=i(192);i.d(t,"a",function(){return h});var d,p,h=(d=i.i(c.view)({name:"View/User/MailBox/SystemDropDown",type:c.ViewType.Right,templateID:"SystemDropDown"}),d(p=function(e){function t(){return o()(this,t),r()(this,e.apply(this,arguments))}return l()(t,e),t}(u.a))||p)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(6),u=i.n(c),d=i(12),p=i.n(d),h=i(19),f=i.n(h),m=i(3),g=i(7),b=i(14),y=i(23),v=i(10),S=i(9),w=i(13);i.d(t,"a",function(){return E});var T,C,E=(T=i.i(S.view)({name:"View/User/Settings/Menu",type:S.ViewType.Left,templateID:"SettingsMenu"}),T(C=function(e){function t(i){o()(this,t);var n=r()(this,e.call(this));return n.leftPanelDisabled=g.leftPanelDisabled,n.mobile=v.appSettingsGet("mobile"),n.menu=i.menu,n}return l()(t,e),t.prototype.onBuild=function(e){this.mobile&&e.on("click",".b-settings-menu .e-item.selectable",function(){i.i(g.leftPanelDisabled)(!0)}),f()("up, down",m.KeyState.Settings,u.a.throttle(function(t,n){var o=n&&"up"===n.shortcut,a=p()(".b-settings-menu .e-item",e);if(t&&a.length){var r=a.index(a.filter(".selected"));o&&0<r?r-=1:!o&&r<a.length-1&&(r+=1);var s=a.eq(r).attr("href");s&&i.i(S.setHash)(s,!1,!0)}},m.Magics.Time200ms))},t.prototype.link=function(e){return i.i(b.q)(e)},t.prototype.backToMailBoxClick=function(){i.i(S.setHash)(i.i(b.D)(i.i(y.a)()))},t}(w.a))||C)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(14),u=i(23),d=i(7),p=i(10),h=i(39),f=i(9),m=i(13);i.d(t,"a",function(){return y});var g,b,y=(g=i.i(f.view)({name:"View/User/Settings/Pane",type:f.ViewType.Right,templateID:"SettingsPane"}),g(b=function(e){function t(){o()(this,t);var i=r()(this,e.call(this));return i.mobile=p.appSettingsGet("mobile"),i.leftPanelDisabled=d.leftPanelDisabled,i}return l()(t,e),t.prototype.onShow=function(){h.a.message(null)},t.prototype.hideLeft=function(e,t){t.preventDefault(),t.stopPropagation(),i.i(d.leftPanelDisabled)(!0)},t.prototype.showLeft=function(e,t){t.preventDefault(),t.stopPropagation(),i.i(d.leftPanelDisabled)(!1)},t.prototype.onBuild=function(e){this.mobile&&e.on("click",function(){i.i(d.leftPanelDisabled)(!0)})},t.prototype.backToMailBoxClick=function(){i.i(f.setHash)(i.i(c.D)(i.i(u.a)()))},t}(m.a))||b)},function(e,t,i){"use strict";var n=i(0),o=i.n(n),a=i(5),r=i.n(a),s=i(4),l=i.n(s),c=i(9),u=i(192);i.d(t,"a",function(){return h});var d,p,h=(d=i.i(c.view)({name:"View/User/Settings/SystemDropDown",type:c.ViewType.Right,templateID:"SystemDropDown"}),d(p=function(e){function t(){return o()(this,t),r()(this,e.apply(this,arguments))}return l()(t,e),t}(u.a))||p)},function(e,t,i){var n,o;!function(){"use strict";function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=typeof n;if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n))e.push(i.apply(null,n));else if("object"===o)for(var r in n)a.call(n,r)&&n[r]&&e.push(r)}}return e.join(" ")}var a={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=i:(n=[],o=function(){return i}.apply(t,n),!(void 0!==o&&(e.exports=o)))}()},function(e,t,i){var n,o;!function(a){var r=!1;if(n=a,o="function"==typeof n?n.call(t,i,t,e):n,!(void 0!==o&&(e.exports=o)),r=!0,e.exports=a(),r=!0,!r){var s=window.Cookies,l=window.Cookies=a();l.noConflict=function(){return window.Cookies=s,l}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var i=arguments[e];for(var n in i)t[n]=i[n]}return t}function t(i){function n(t,o,a){var r;if("undefined"!=typeof document){if(arguments.length>1){if(a=e({path:"/"},n.defaults,a),"number"==typeof a.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*a.expires),a.expires=s}try{r=JSON.stringify(o),/^[\{\[]/.test(r)&&(o=r)}catch(e){}return o=i.write?i.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",o,a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}t||(r={});for(var l=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,u=0;u<l.length;u++){var d=l[u].split("="),p=d.slice(1).join("=");'"'===p.charAt(0)&&(p=p.slice(1,-1));try{var h=d[0].replace(c,decodeURIComponent);if(p=i.read?i.read(p,h):i(p,h)||p.replace(c,decodeURIComponent),this.json)try{p=JSON.parse(p)}catch(e){}if(t===h){r=p;break}t||(r[h]=p)}catch(e){}}return r}}return n.set=n,n.get=function(e){return n.call(n,e)},n.getJSON=function(){return n.apply({json:!0},[].slice.call(arguments))},n.defaults={},n.remove=function(t,i){n(t,"",e(i,{expires:-1}))},n.withConverter=t,n}return t(function(){})})},,,,,,,,function(e,t){e.exports=window.Tinycon},function(e,t){e.exports=window.ifvisible},function(e,t){e.exports=window.qr},,function(e,t,i){"use strict";var n=i(93),o=i(177);i.i(n.a)(o.default)}]);
